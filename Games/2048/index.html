<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="download_date" content="2025-10-09T22:12:35.923Z"/>
    
    <title>2048</title>

    <script id="twitter-wjs">Function&&Function.prototype&&Function.prototype.bind&&(/(MSIE ([6789]|10|11))|Trident/.test(navigator.userAgent)||(window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.loaded&&window.twttr.widgets.load&&window.twttr.widgets.load(),window.__twttr&&window.__twttr.widgets&&window.__twttr.widgets.init||function(t){function e(e){for(var n,i,o=e[0],s=e[1],a=0,c=[];a<o.length;a++)i=o[a],r[i]&&c.push(r[i][0]),r[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);for(u&&u(e);c.length;)c.shift()()}var n={},r={0:0};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise(function(e,i){n=r[t]=[e,i]});e.push(n[2]=o);var s,a=document.getElementsByTagName("head")[0],u=document.createElement("script");u.charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.src=function(t){return i.p+"js/"+({1:"dm_button",2:"button",3:"moment",4:"periscope_on_air",5:"timeline",6:"tweet"}[t]||t)+"."+{1:"f53535f7e1a7738ec410842054f2de1c",2:"856debeac157d9669cf51e73a08fbc93",3:"cd19c6b67c2f5cf62643a0c94915ac9a",4:"59d430bc7d44af5536b78dbdd566058f",5:"e108540dddc96e4b707f5cf259a582d7",6:"d7aeb21a88e025d2ea5f5431a103f586"}[t]+".js"}(t),s=function(e){u.onerror=u.onload=null,clearTimeout(c);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src,s=new Error("Loading chunk "+t+" failed.\n("+i+": "+o+")");s.type=i,s.request=o,n[1](s)}r[t]=void 0}};var c=setTimeout(function(){s({type:"timeout",target:u})},12e4);u.onerror=u.onload=s,a.appendChild(u)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="https://platform.twitter.com/",i.oe=function(t){throw console.error(t),t};var o=window.__twttrll=window.__twttrll||[],s=o.push.bind(o);o.push=e,o=o.slice();for(var a=0;a<o.length;a++)e(o[a]);var u=s;i(i.s=82)}([function(t,e,n){var r=n(1);function i(t,e){var n;for(n in t)t.hasOwnProperty&&!t.hasOwnProperty(n)||e(n,t[n]);return t}function o(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function s(t){return t===Object(t)}function a(t){var e;if(!s(t))return!1;if(Object.keys)return!Object.keys(t).length;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function u(t){return t?Array.prototype.slice.call(t):[]}t.exports={aug:function(t){return u(arguments).slice(1).forEach(function(e){i(e,function(e,n){t[e]=n})}),t},async:function(t,e){r.setTimeout(function(){t.call(e||null)},0)},compact:function t(e){return i(e,function(n,r){s(r)&&(t(r),a(r)&&delete e[n]),void 0!==r&&null!==r&&""!==r||delete e[n]}),e},contains:function(t,e){return!(!t||!t.indexOf)&&t.indexOf(e)>-1},forIn:i,isObject:s,isEmptyObject:a,toType:o,isType:function(t,e){return t==o(e)},toRealArray:u}},function(t,e){t.exports=window},function(t,e,n){var r=n(16),i=/(?:^|(?:https?:)?\/\/(?:www\.)?twitter\.com(?::\d+)?(?:\/intent\/(?:follow|user)\/?\?screen_name=|(?:\/#!)?\/))@?([\w]+)(?:\?|&|$)/i,o=/(?:^|(?:https?:)?\/\/(?:www\.)?twitter\.com(?::\d+)?\/(?:#!\/)?[\w_]+\/status(?:es)?\/)(\d+)/i,s=/^http(s?):\/\/(\w+\.)*twitter\.com([:/]|$)/i,a=/^http(s?):\/\/(ton|pbs)\.twimg\.com/,u=/^#?([^.,<>!\s/#\-()'"]+)$/,c=/twitter\.com(?::\d{2,4})?\/intent\/(\w+)/,d=/^https?:\/\/(?:www\.)?twitter\.com\/\w+\/timelines\/(\d+)/i,f=/^https?:\/\/(?:www\.)?twitter\.com\/i\/moments\/(\d+)/i,l=/^https?:\/\/(?:www\.)?twitter\.com\/(\w+)\/(?:likes|favorites)/i,h=/^https?:\/\/(?:www\.)?twitter\.com\/(\w+)\/lists\/([\w-%]+)/i,p=/^https?:\/\/(?:www\.)?twitter\.com\/i\/live\/(\d+)/i,m=/^https?:\/\/syndication\.twitter\.com\/settings/i,v=/^https?:\/\/(localhost|platform)\.twitter\.com(?::\d+)?\/widgets\/widget_iframe\.(.+)/i,g=/^https?:\/\/(?:www\.)?twitter\.com\/search\?q=(\w+)/i;function w(t){return"string"==typeof t&&i.test(t)&&RegExp.$1.length<=20}function y(t){if(w(t))return RegExp.$1}function b(t,e){var n=r.decodeURL(t);if(e=e||!1,n.screen_name=y(t),n.screen_name)return r.url("https://twitter.com/intent/"+(e?"follow":"user"),n)}function _(t){return"string"==typeof t&&u.test(t)}function E(t){return"string"==typeof t&&o.test(t)}t.exports={isHashTag:_,hashTag:function(t,e){if(e=void 0===e||e,_(t))return(e?"#":"")+RegExp.$1},isScreenName:w,screenName:y,isStatus:E,status:function(t){return E(t)&&RegExp.$1},intentForProfileURL:b,intentForFollowURL:function(t){return b(t,!0)},isTwitterURL:function(t){return s.test(t)},isTwimgURL:function(t){return a.test(t)},isIntentURL:function(t){return c.test(t)},isSettingsURL:function(t){return m.test(t)},isWidgetIframeURL:function(t){return v.test(t)},isSearchUrl:function(t){return g.test(t)},regexen:{profile:i},momentId:function(t){return f.test(t)&&RegExp.$1},collectionId:function(t){return d.test(t)&&RegExp.$1},intentType:function(t){return c.test(t)&&RegExp.$1},likesScreenName:function(t){return l.test(t)&&RegExp.$1},listScreenNameAndSlug:function(t){var e,n,r;if(h.test(t)){e=RegExp.$1,n=RegExp.$2;try{r=decodeURIComponent(n)}catch(t){}return{ownerScreenName:e,slug:r||n}}return!1},eventId:function(t){return p.test(t)&&RegExp.$1}}},function(t,e,n){var r=n(6);t.exports=function(){var t=this;this.promise=new r(function(e,n){t.resolve=e,t.reject=n})}},function(t,e){t.exports=document},function(t,e,n){var r=n(0),i=[!0,1,"1","on","ON","true","TRUE","yes","YES"],o=[!1,0,"0","off","OFF","false","FALSE","no","NO"];function s(t){return void 0!==t&&null!==t&&""!==t}function a(t){return c(t)&&t%1==0}function u(t){return c(t)&&!a(t)}function c(t){return s(t)&&!isNaN(t)}function d(t){return r.contains(o,t)}function f(t){return r.contains(i,t)}t.exports={hasValue:s,isInt:a,isFloat:u,isNumber:c,isString:function(t){return"string"===r.toType(t)},isArray:function(t){return s(t)&&"array"==r.toType(t)},isTruthValue:f,isFalseValue:d,asInt:function(t){if(a(t))return parseInt(t,10)},asFloat:function(t){if(u(t))return t},asNumber:function(t){if(c(t))return t},asBoolean:function(t){return!(!s(t)||!f(t)&&(d(t)||!t))}}},function(t,e,n){var r=n(1),i=n(20),o=n(45);i.hasPromiseSupport()||(r.Promise=o),t.exports=r.Promise},function(t,e,n){var r=n(0);t.exports=function(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var i=r.toRealArray(arguments);return t.apply(e,n.concat(i))}}},function(t,e){t.exports=location},function(t,e,n){var r=n(47);t.exports=new r("__twttr")},function(t,e,n){var r=n(0),i=/\b([\w-_]+)\b/g;function o(t){return new RegExp("\\b"+t+"\\b","g")}function s(t,e){t.classList?t.classList.add(e):o(e).test(t.className)||(t.className+=" "+e)}function a(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(o(e)," ")}function u(t,e){return t.classList?t.classList.contains(e):r.contains(c(t),e)}function c(t){return r.toRealArray(t.classList?t.classList:t.className.match(i))}t.exports={add:s,remove:a,replace:function(t,e,n){if(t.classList&&u(t,e))return a(t,e),void s(t,n);t.className=t.className.replace(o(e),n)},toggle:function(t,e,n){return void 0===n&&t.classList&&t.classList.toggle?t.classList.toggle(e,n):(n?s(t,e):a(t,e),n)},present:u,list:c}},function(t,e,n){var r=n(19),i=n(5),o=n(16),s=n(0),a=n(108);t.exports=function(t){var e=t.href&&t.href.split("?")[1],n=e?o.decode(e):{},u={lang:a(t),width:t.getAttribute("data-width")||t.getAttribute("width"),height:t.getAttribute("data-height")||t.getAttribute("height"),related:t.getAttribute("data-related"),partner:t.getAttribute("data-partner")};return i.asBoolean(t.getAttribute("data-dnt"))&&r.setOn(),s.forIn(u,function(t,e){var r=n[t];n[t]=i.hasValue(r)?r:e}),s.compact(n)}},function(t,e,n){var r=n(109),i=n(21);t.exports=function(){var t="data-twitter-extracted-"+i.generate();return function(e,n){return r(e,n).filter(function(e){return!e.hasAttribute(t)}).map(function(e){return e.setAttribute(t,"true"),e})}}},function(t,e){function n(t,e,n,r,i,o,s){this.factory=t,this.Sandbox=e,this.srcEl=o,this.targetEl=i,this.parameters=r,this.className=n,this.options=s}n.prototype.destroy=function(){this.srcEl=this.targetEl=null},t.exports=n},function(t,e){t.exports={DM_BUTTON:"twitter-dm-button",FOLLOW_BUTTON:"twitter-follow-button",HASHTAG_BUTTON:"twitter-hashtag-button",MENTION_BUTTON:"twitter-mention-button",MOMENT:"twitter-moment",PERISCOPE:"periscope-on-air",SHARE_BUTTON:"twitter-share-button",TIMELINE:"twitter-timeline",TWEET:"twitter-tweet"}},function(t,e,n){var r=n(6),i=n(19),o=n(50),s=n(34),a=n(5),u=n(0);t.exports=function(t,e,n){var c;return t=t||[],e=e||{},c="Æ’("+t.join(", ")+", target, [options]);",function(){var d,f,l,h,p=Array.prototype.slice.apply(arguments,[0,t.length]),m=Array.prototype.slice.apply(arguments,[t.length]);return m.forEach(function(t){t&&(t.nodeType!==Node.ELEMENT_NODE?u.isType("function",t)?d=t:u.isType("object",t)&&(f=t):l=t)}),p.length!==t.length||0===m.length?(d&&u.async(function(){d(!1)}),r.reject(new Error("Not enough parameters. Expected: "+c))):l?(f=u.aug({},f||{},e),t.forEach(function(t){f[t]=p.shift()}),a.asBoolean(f.dnt)&&i.setOn(),h=s.getExperiments().then(function(t){return o.addWidget(n(f,l,void 0,t))}),d&&h.then(d,function(){d(!1)}),h):(d&&u.async(function(){d(!1)}),r.reject(new Error("No target element specified. Expected: "+c)))}}},function(t,e,n){var r=n(5),i=n(0);function o(t){return encodeURIComponent(t).replace(/\+/g,"%2B").replace(/'/g,"%27")}function s(t){return decodeURIComponent(t)}function a(t){var e=[];return i.forIn(t,function(t,n){var s=o(t);i.isType("array",n)||(n=[n]),n.forEach(function(t){r.hasValue(t)&&e.push(s+"="+o(t))})}),e.sort().join("&")}function u(t){var e={};return t?(t.split("&").forEach(function(t){var n=t.split("="),r=s(n[0]),o=s(n[1]);if(2==n.length){if(!i.isType("array",e[r]))return r in e?(e[r]=[e[r]],void e[r].push(o)):void(e[r]=o);e[r].push(o)}}),e):{}}t.exports={url:function(t,e){return a(e).length>0?i.contains(t,"?")?t+"&"+a(e):t+"?"+a(e):t},decodeURL:function(t){var e=t&&t.split("?");return 2==e.length?u(e[1]):{}},decode:u,encode:a,encodePart:o,decodePart:s}},function(t,e,n){var r=n(90),i=n(3),o=n(0);function s(t,e){return function(){try{e.resolve(t.call(this))}catch(t){e.reject(t)}}}t.exports={sync:function(t,e){t.call(e)},read:function(t,e){var n=new i;return r.read(s(t,n),e),n.promise},write:function(t,e){var n=new i;return r.write(s(t,n),e),n.promise},defer:function(t,e,n){var a=new i;return o.isType("function",t)&&(n=e,e=t,t=1),r.defer(t,s(e,a),n),a.promise}}},function(t,e,n){var r=n(8),i=n(1),o=n(0),s={},a=o.contains(r.href,"tw_debug=true");function u(){}function c(){}function d(){return i.performance&&+i.performance.now()||+new Date}function f(t,e){if(i.console&&i.console[t])switch(e.length){case 1:i.console[t](e[0]);break;case 2:i.console[t](e[0],e[1]);break;case 3:i.console[t](e[0],e[1],e[2]);break;case 4:i.console[t](e[0],e[1],e[2],e[3]);break;case 5:i.console[t](e[0],e[1],e[2],e[3],e[4]);break;default:0!==e.length&&i.console.warn&&i.console.warn("too many params passed to logger."+t)}}t.exports={devError:u,devInfo:c,devObject:function(t,e){},publicError:function(){f("error",o.toRealArray(arguments))},publicLog:function(){f("info",o.toRealArray(arguments))},publicWarn:function(){f("warn",o.toRealArray(arguments))},time:function(t){a&&(s[t]=d())},timeEnd:function(t){a&&s[t]&&(d(),s[t])}}},function(t,e,n){var r=n(4),i=n(8),o=n(38),s=n(94),a=n(5),u=n(33),c=!1,d=/https?:\/\/([^/]+).*/i;t.exports={setOn:function(){c=!0},enabled:function(t,e){return!!(c||a.asBoolean(u.val("dnt"))||s.isUrlSensitive(e||i.host)||o.isFramed()&&s.isUrlSensitive(o.rootDocumentLocation())||(t=d.test(t||r.referrer)&&RegExp.$1)&&s.isUrlSensitive(t))}}},function(t,e,n){var r=n(4),i=n(83),o=n(1),s=n(0),a=i.userAgent;function u(t){return/(Trident|MSIE|Edge[/ ]?\d)/.test(t=t||a)}t.exports={retina:function(t){return(t=t||o).devicePixelRatio?t.devicePixelRatio>=1.5:!!t.matchMedia&&t.matchMedia("only screen and (min-resolution: 144dpi)").matches},anyIE:u,ie9:function(t){return/MSIE 9/.test(t=t||a)},ie10:function(t){return/MSIE 10/.test(t=t||a)},ios:function(t){return/(iPad|iPhone|iPod)/.test(t=t||a)},android:function(t){return/^Mozilla\/5\.0 \(Linux; (U; )?Android/.test(t=t||a)},canPostMessage:function(t,e){return t=t||o,e=e||a,t.postMessage&&!(u(e)&&t.opener)},touch:function(t,e,n){return t=t||o,e=e||i,n=n||a,"ontouchstart"in t||/Opera Mini/.test(n)||e.msMaxTouchPoints>0},cssTransitions:function(){var t=r.body.style;return void 0!==t.transition||void 0!==t.webkitTransition||void 0!==t.mozTransition||void 0!==t.oTransition||void 0!==t.msTransition},hasPromiseSupport:function(){return!!(o.Promise&&o.Promise.resolve&&o.Promise.reject&&o.Promise.all&&o.Promise.race&&(new o.Promise(function(e){t=e}),s.isType("function",t)));var t},hasIntersectionObserverSupport:function(){return!!o.IntersectionObserver},hasPerformanceInformation:function(){return o.performance&&o.performance.getEntriesByType}}},function(t,e){var n="i",r=0,i=0;t.exports={generate:function(){return n+String(+new Date)+Math.floor(1e5*Math.random())+r++},deterministic:function(){return n+String(i++)}}},function(t,e,n){var r=n(46),i=n(49),o=n(0);t.exports=o.aug(r.get("events")||{},i.Emitter)},function(t,e,n){var r=n(6),i=n(3);function o(t,e){return t.then(e,e)}function s(t){return t instanceof r}t.exports={always:o,allResolved:function(t){var e;return void 0===t?r.reject(new Error("undefined is not an object")):Array.isArray(t)?(e=t.length)?new r(function(n,r){var i=0,o=[];function a(){(i+=1)===e&&(0===o.length?r():n(o))}function u(t){o.push(t),a()}t.forEach(function(t){s(t)?t.then(u,a):u(t)})}):r.resolve([]):r.reject(new Error("Type error"))},some:function(t){var e;return e=(t=t||[]).length,t=t.filter(s),e?e!==t.length?r.reject("non-Promise passed to .some"):new r(function(e,n){var r=0;function i(){(r+=1)===t.length&&n()}t.forEach(function(t){t.then(e,i)})}):r.reject("no promises passed to .some")},isPromise:s,allSettled:function(t){function e(){}return r.all((t||[]).map(function(t){return o(t,e)}))},timeout:function(t,e){var n=new i;return setTimeout(function(){n.reject(new Error("Promise timed out"))},e),t.then(function(t){n.resolve(t)},function(t){n.reject(t)}),n.promise}}},function(t,e,n){var r=n(1).JSON;t.exports={stringify:r.stringify||r.encode,parse:r.parse||r.decode}},function(t,e,n){var r=n(39),i=n(97),o=n(7);(r=Object.create(r)).build=o(r.build,null,i),t.exports=r},function(t,e,n){var r=n(49).makeEmitter();t.exports={emitter:r,START:"start",ALL_WIDGETS_RENDER_START:"all_widgets_render_start",ALL_WIDGETS_RENDER_END:"all_widgets_render_end",ALL_WIDGETS_AND_IMAGES_LOADED:"all_widgets_and_images_loaded"}},function(t,e,n){var r=n(9),i=n(102),o="https://syndication.twitter.com",s="https://platform.twitter.com",a=["https://syndication.twitter.com","https://cdn.syndication.twimg.com","https://localhost.twitter.com:8444"],u=["https://syndication.twitter.com","https://localhost.twitter.com:8445"],c=["https://platform.twitter.com","https://localhost.twitter.com",/^https:\/\/ton\.local\.twitter\.com\/syndication-internal\/embed-iframe\/[0-9A-Za-z_-]+\/app/],d=function(t,e){return t.some(function(t){return t instanceof RegExp?t.test(e):t===e})},f=function(){var t=r.get("backendHost");return t&&d(a,t)?t:"https://cdn.syndication.twimg.com"},l=function(){var t=r.get("settingsSvcHost");return t&&d(u,t)?t:o};function h(t,e){var n=[t];return e.forEach(function(t){n.push(function(t){var e=(t||"").toString(),n="/"===e.slice(0,1)?1:0,r=function(t){return"/"===t.slice(-1)}(e)?-1:void 0;return e.slice(n,r)}(t))}),n.join("/")}t.exports={cookieConsent:function(t){var e=t||[];return e.unshift("cookie/consent"),h(l(),e)},embedIframe:function(t,e){var n=t||[],o=s,a=r.get("embedIframeURL");return a&&d(c,a)?h(a,n)+".html":(n.unshift(i.getBaseURLPath(e)),h(o,n)+".html")},embedService:function(t){var e=t||[],n=o;return e.unshift("srv"),h(n,e)},eventVideo:function(t){var e=t||[];return e.unshift("video/event"),h(f(),e)},grid:function(t){var e=t||[];return e.unshift("grid/collection"),h(f(),e)},moment:function(t){var e=t||[];return e.unshift("moments"),h(f(),e)},settings:function(t){var e=t||[];return e.unshift("settings"),h(l(),e)},settingsScribe:function(t){var e=t||[];return e.unshift("i/jot/embeds"),h(l(),e)},timeline:function(t){var e=t||[];return e.unshift("timeline"),h(f(),e)},tweetBatch:function(t){var e=t||[];return e.unshift("tweets.json"),h(f(),e)},video:function(t){var e=t||[];return e.unshift("widgets/video"),h(f(),e)}}},function(t,e,n){var r=n(4),i=n(0);t.exports=function(t,e,n){var o;if(n=n||r,t=t||{},e=e||{},t.name){try{o=n.createElement('<iframe name="'+t.name+'"></iframe>')}catch(e){(o=n.createElement("iframe")).name=t.name}delete t.name}else o=n.createElement("iframe");return t.id&&(o.id=t.id,delete t.id),o.allowtransparency="true",o.scrolling="no",o.setAttribute("frameBorder",0),o.setAttribute("allowTransparency",!0),i.forIn(t,function(t,e){o.setAttribute(t,e)}),i.forIn(e,function(t,e){o.style[t]=e}),o}},function(t,e,n){var r=n(25),i=n(100);t.exports=r.build([i])},function(t,e,n){var r=n(25),i=n(116);t.exports=r.build([i])},function(t,e,n){var r=n(39),i=n(40),o=n(7);(r=Object.create(r)).build=o(r.build,null,i),t.exports=r},function(t,e,n){var r=n(70),i=n(19),o=n(5),s=n(21),a=n(0);t.exports=function(t){t.params({chrome:{},height:{transform:o.asInt},instanceId:{required:!0,fallback:s.deterministic},isPreconfigured:{},lang:{required:!0,transform:r.matchLanguage,fallback:"en"},theme:{},tweetLimit:{transform:o.asInt}}),t.defineProperty("endpoint",{get:function(){throw new Error("endpoint not specified")}}),t.define("queryParams",function(){return a.compact({dnt:i.enabled(),limit:this.params.tweetLimit,lang:this.params.lang})})}},function(t,e,n){var r,i=n(4);function o(t){var e,n,o,s=0;for(r={},e=(t=t||i).getElementsByTagName("meta");e[s];s++){if(n=e[s],/^twitter:/.test(n.getAttribute("name")))o=n.getAttribute("name").replace(/^twitter:/,"");else{if(!/^twitter:/.test(n.getAttribute("property")))continue;o=n.getAttribute("property").replace(/^twitter:/,"")}r[o]=n.getAttribute("content")||n.getAttribute("value")}}o(),t.exports={init:o,val:function(t){return r[t]}}},function(t,e,n){var r=n(104),i=n(24),o=n(1);function s(t){var e="";if(!t)return"";try{return e=i.stringify(t),o.btoa(e)}catch(t){return""}}function a(t){return r.settingsLoaded().then(function(e){return e[t]})}function u(){return a("features")}t.exports={encodeFeatures:s,shouldObtainCookieConsent:function(){return a("shouldObtainCookieConsent")},getExperiments:u,getExperiment:function(t){return u().then(function(e){if(!e[t])throw new Error("Experiment not found");return e[t]})},getHorizonSettings:function(){return r.settingsLoaded().then(function(t){return{features:t.features,sessionId:t.sessionId}})},getActiveExperimentDataString:function(){return u().then(function(t){return s(t)})},getExperimentKeys:function(){return u().then(function(t){return Object.keys(t)})},load:function(){r.load()}}},function(t,e,n){var r=n(10),i={},o=-1,s={};function a(t){var e=t.getAttribute("data-twitter-event-id");return e||(t.setAttribute("data-twitter-event-id",++o),o)}function u(t,e,n){var r=0,i=t&&t.length||0;for(r=0;r<i;r++)if(t[r].call(e,n,e),n.ceaseImmediately)return!1}function c(t,e,n){for(var i=n||t.target||t.srcElement,o=r.list(i).map(function(t){return"."+t}).concat(i.tagName),s=0,a=o.length;s<a;s++)if(!1===u(e[o[s]],i,t))return;t.cease||i!==this&&c.call(this,t,e,i.parentElement||i.parentNode)}function d(t,e,n,r){function i(r){c.call(t,r,n[e])}!function(t,e,n,r){t.id&&(s[t.id]=s[t.id]||[],s[t.id].push({el:t,listener:e,type:n,rootId:r}))}(t,i,e,r),t.addEventListener(e,i,!1)}function f(t){t&&t.preventDefault?t.preventDefault():t.returnValue=!1}function l(t){t&&(t.cease=!0)&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}t.exports={stop:function(t){return l(t),f(t),!1},stopPropagation:l,stopImmediatePropagation:function(t){t&&(t.ceaseImmediately=!0,l(t),t.stopImmediatePropagation())},preventDefault:f,delegate:function(t,e,n,r){var o=a(t);i[o]=i[o]||{},i[o][e]||(i[o][e]={},d(t,e,i[o],o)),i[o][e][n]=i[o][e][n]||[],i[o][e][n].push(r)},simulate:function(t,e,n){var r=a(e),o=i[r]&&i[r];c.call(e,{target:n},o[t])},removeDelegatesForWidget:function(t){var e=s[t];e&&(e.forEach(function(t){t.el.removeEventListener(t.type,t.listener,!1),delete i[t.rootId]}),delete s[t])}}},function(t,e,n){var r=n(0),i=n(48);t.exports={closest:function t(e,n,o){var s;if(n)return o=o||n&&n.ownerDocument,s=r.isType("function",e)?e:function(t){return function(e){return!!e.tagName&&i(e,t)}}(e),n===o?s(n)?n:void 0:s(n)?n:t(s,n.parentNode,o)}}},function(t,e,n){var r=n(42),i=n(4),o=n(19),s=n(36),a=n(74),u=n(24),c=n(9),d=n(2),f=n(0),l=1,h=r.version,p=c.get("clientEventEndpoint")||"https://syndication.twitter.com/i/jot";function m(t){return f.aug({client:"tfw"},t||{})}function v(t,e,n){return e=e||{},f.aug({},e,{_category_:t,triggered_on:e.triggered_on||+new Date,dnt:o.enabled(n)})}t.exports={extractTermsFromDOM:function t(e,n){var r;return n=n||{},e&&e.nodeType===Node.ELEMENT_NODE?((r=e.getAttribute("data-scribe"))&&r.split(" ").forEach(function(t){var e=t.trim().split(":"),r=e[0],i=e[1];r&&i&&!n[r]&&(n[r]=i)}),t(e.parentNode,n)):n},clickEventElement:function(t){var e=s.closest("[data-expanded-url]",t),n=e&&e.getAttribute("data-expanded-url");return n&&d.isTwitterURL(n)?"twitter_url":"url"},flattenClientEventPayload:function(t,e){return f.aug({},e,{event_namespace:t})},formatGenericEventData:v,formatClientEventData:function(t,e,n){var r=t&&t.widget_origin||i.referrer;return(t=v("tfw_client_event",t,r)).client_version=h,t.format_version=void 0!==n?n:1,e||(t.widget_origin=r),t},formatClientEventNamespace:m,formatHorizonTweetData:function(t){var e={item_ids:[],item_details:{}};return e.item_ids.push(t),e.item_details[t]={item_type:a.TWEET},e},formatTweetAssociation:function(t,e){var n={};return(e=e||{}).association_namespace=m(t),n[l]=e,n},noticeSeen:function(t){return"notice"===t.element&&"seen"===t.action},splitLogEntry:function(t){var e,n,r,i,o;return t.item_ids&&t.item_ids.length>1?(e=Math.floor(t.item_ids.length/2),n=t.item_ids.slice(0,e),r={},i=t.item_ids.slice(e),o={},n.forEach(function(e){r[e]=t.item_details[e]}),i.forEach(function(e){o[e]=t.item_details[e]}),[f.aug({},t,{item_ids:n,item_details:r}),f.aug({},t,{item_ids:i,item_details:o})]):[t]},stringify:function(t){var e,n=Array.prototype.toJSON;return delete Array.prototype.toJSON,e=u.stringify(t),n&&(Array.prototype.toJSON=n),e},CLIENT_EVENT_ENDPOINT:p,RUFOUS_REDIRECT:"https://platform.twitter.com/jot.html"}},function(t,e,n){var r=n(8),i=n(73),o=n(0),s=i.getCanonicalURL()||r.href,a=s;t.exports={isFramed:function(){return s!==a},rootDocumentLocation:function(t){return t&&o.isType("string",t)&&(s=t),s},currentDocumentLocation:function(){return a}}},function(t,e,n){var r=n(95),i=n(96),o=n(0);t.exports={couple:function(){return o.toRealArray(arguments)},build:function(t,e,n){var o=new t;return(e=i(r(e||[]))).forEach(function(t){t.call(null,o)}),o.build(n)}}},function(t,e,n){var r=n(98),i=n(0),o=n(41);function s(){this.Component=this.factory(),this._adviceArgs=[],this._lastArgs=[]}i.aug(s.prototype,{factory:o,build:function(t){var e=this;return this.Component,i.aug(this.Component.prototype.boundParams,t),this._adviceArgs.concat(this._lastArgs).forEach(function(t){(function(t,e,n){var r=this[e];if(!r)throw new Error(e+" does not exist");this[e]=t(r,n)}).apply(e.Component.prototype,t)}),delete this._lastArgs,delete this._adviceArgs,this.Component},params:function(t){var e=this.Component.prototype.paramConfigs;t=t||{},this.Component.prototype.paramConfigs=i.aug({},t,e)},define:function(t,e){if(t in this.Component.prototype)throw new Error(t+" has previously been defined");this.override(t,e)},defineStatic:function(t,e){this.Component[t]=e},override:function(t,e){this.Component.prototype[t]=e},defineProperty:function(t,e){if(t in this.Component.prototype)throw new Error(t+" has previously been defined");this.overrideProperty(t,e)},overrideProperty:function(t,e){var n=i.aug({configurable:!0},e);Object.defineProperty(this.Component.prototype,t,n)},before:function(t,e){this._adviceArgs.push([r.before,t,e])},after:function(t,e){this._adviceArgs.push([r.after,t,e])},around:function(t,e){this._adviceArgs.push([r.around,t,e])},last:function(t,e){this._lastArgs.push([r.after,t,e])}}),t.exports=s},function(t,e,n){var r=n(0);function i(){return!0}function o(t){return t}t.exports=function(){function t(t){var e=this;t=t||{},this.params=Object.keys(this.paramConfigs).reduce(function(n,s){var a=[],u=e.boundParams,c=e.paramConfigs[s],d=c.validate||i,f=c.transform||o;if(s in u&&a.push(u[s]),s in t&&a.push(t[s]),a="fallback"in c?a.concat(c.fallback):a,n[s]=function(t,e,n){var i=null;return t.some(function(t){if(t=r.isType("function",t)?t():t,e(t))return i=n(t),!0}),i}(a,d,f),c.required&&null==n[s])throw new Error(s+" is a required parameter");return n},{}),this.initialize()}return r.aug(t.prototype,{paramConfigs:{},boundParams:{},initialize:function(){}}),t}},function(t){t.exports={version:"2615f7e52b7e0:1702314776716"}},function(t,e,n){var r=n(1);t.exports=function(t,e,n){var i,o=0;return n=n||null,function s(){var a=n||this,u=arguments,c=+new Date;if(r.clearTimeout(i),c-o>e)return o=c,void t.apply(a,u);i=r.setTimeout(function(){s.apply(a,u)},e)}}},function(t,e,n){var r=n(18);t.exports=function(){r.publicError("Error: This Timeline type is no longer supported (Likes, Collections, & Moments). \n\t","* Twitter still supports Profile and List Timelines \n\t","* You can learn more about this change in our announcement: \n\t","https://twittercommunity.com/t/removing-support-for-embedded-like-collection-and-moment-timelines/150313 \n\t","* In order to create a new Embedded Timeline, visit: https://publish.twitter.com")}},function(t,e,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */var r;r=function(){"use strict";function t(t){return"function"==typeof t}var e=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},n=0,r=void 0,i=void 0,o=function(t,e){l[n]=t,l[n+1]=e,2===(n+=2)&&(i?i(h):w())},s="undefined"!=typeof window?window:void 0,a=s||{},u=a.MutationObserver||a.WebKitMutationObserver,c="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var t=setTimeout;return function(){return t(h,1)}}var l=new Array(1e3);function h(){for(var t=0;t<n;t+=2)(0,l[t])(l[t+1]),l[t]=void 0,l[t+1]=void 0;n=0}var p,m,v,g,w=void 0;function y(t,e){var n=this,r=new this.constructor(E);void 0===r[_]&&k(r);var i=n._state;if(i){var s=arguments[i-1];o(function(){return D(i,r,s,n._result)})}else I(n,r,t,e);return r}function b(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(E);return C(e,t),e}c?w=function(){return process.nextTick(h)}:u?(m=0,v=new u(h),g=document.createTextNode(""),v.observe(g,{characterData:!0}),w=function(){g.data=m=++m%2}):d?((p=new MessageChannel).port1.onmessage=h,w=function(){return p.port2.postMessage(0)}):w=void 0===s?function(){try{var t=Function("return this")().require("vertx");return void 0!==(r=t.runOnLoop||t.runOnContext)?function(){r(h)}:f()}catch(t){return f()}}():f();var _=Math.random().toString(36).substring(2);function E(){}var x=void 0,T=1,A=2,S={error:null};function R(t){try{return t.then}catch(t){return S.error=t,S}}function N(e,n,r){n.constructor===e.constructor&&r===y&&n.constructor.resolve===b?function(t,e){e._state===T?P(t,e._result):e._state===A?j(t,e._result):I(e,void 0,function(e){return C(t,e)},function(e){return j(t,e)})}(e,n):r===S?(j(e,S.error),S.error=null):void 0===r?P(e,n):t(r)?function(t,e,n){o(function(t){var r=!1,i=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?C(t,n):P(t,n))},function(e){r||(r=!0,j(t,e))},t._label);!r&&i&&(r=!0,j(t,i))},t)}(e,n,r):P(e,n)}function C(t,e){var n,r;t===e?j(t,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=e),null===n||"object"!==r&&"function"!==r?P(t,e):N(t,e,R(e)))}function L(t){t._onerror&&t._onerror(t._result),O(t)}function P(t,e){t._state===x&&(t._result=e,t._state=T,0!==t._subscribers.length&&o(O,t))}function j(t,e){t._state===x&&(t._state=A,t._result=e,o(L,t))}function I(t,e,n,r){var i=t._subscribers,s=i.length;t._onerror=null,i[s]=e,i[s+T]=n,i[s+A]=r,0===s&&t._state&&o(O,t)}function O(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,i=void 0,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?D(n,r,i,o):i(o);t._subscribers.length=0}}function D(e,n,r,i){var o=t(r),s=void 0,a=void 0,u=void 0,c=void 0;if(o){if((s=function(t,e){try{return t(e)}catch(t){return S.error=t,S}}(r,i))===S?(c=!0,a=s.error,s.error=null):u=!0,n===s)return void j(n,new TypeError("A promises callback cannot return that same promise."))}else s=i,u=!0;n._state!==x||(o&&u?C(n,s):c?j(n,a):e===T?P(n,s):e===A&&j(n,s))}var z=0;function k(t){t[_]=z++,t._state=void 0,t._result=void 0,t._subscribers=[]}var M=function(){function t(t,n){this._instanceConstructor=t,this.promise=new t(E),this.promise[_]||k(this.promise),e(n)?(this.length=n.length,this._remaining=n.length,this._result=new Array(this.length),0===this.length?P(this.promise,this._result):(this.length=this.length||0,this._enumerate(n),0===this._remaining&&P(this.promise,this._result))):j(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===x&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===b){var i=R(t);if(i===y&&t._state!==x)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(n===U){var o=new n(E);N(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===x&&(this._remaining--,t===A?j(r,n):this._result[e]=n),0===this._remaining&&P(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;I(t,void 0,function(t){return n._settledAt(T,e,t)},function(t){return n._settledAt(A,e,t)})},t}(),U=function(){function e(t){this[_]=z++,this._result=this._state=void 0,this._subscribers=[],E!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e(function(e){C(t,e)},function(e){j(t,e)})}catch(e){j(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return U.prototype.then=y,U.all=function(t){return new M(this,t).promise},U.race=function(t){var n=this;return e(t)?new n(function(e,r){for(var i=t.length,o=0;o<i;o++)n.resolve(t[o]).then(e,r)}):new n(function(t,e){return e(new TypeError("You must pass an array to race."))})},U.resolve=b,U.reject=function(t){var e=new this(E);return j(e,t),e},U._setScheduler=function(t){i=t},U._setAsap=function(t){o=t},U._asap=o,U.polyfill=function(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=U},U.Promise=U,U},t.exports=r()},function(t,e,n){var r=n(47);t.exports=new r("twttr")},function(t,e,n){var r=n(1),i=n(0);function o(t){return i.isType("string",t)?t.split("."):i.isType("array",t)?t:[]}function s(t,e){(e=e||r)[t]=e[t]||{},Object.defineProperty(this,"base",{value:e[t]}),Object.defineProperty(this,"name",{value:t})}i.aug(s.prototype,{get:function(t){return o(t).reduce(function(t,e){if(i.isObject(t))return t[e]},this.base)},set:function(t,e,n){var r=o(t),s=function(t,e){var n=o(e).slice(0,-1);return n.reduce(function(t,e,r){if(t[e]=t[e]||{},!i.isObject(t[e]))throw new Error(n.slice(0,r+1).join(".")+" is already defined with a value.");return t[e]},t)}(this.base,t),a=r.slice(-1);return n&&a in s?s[a]:s[a]=e},init:function(t,e){return this.set(t,e,!0)},unset:function(t){var e=o(t),n=this.get(e.slice(0,-1));n&&delete n[e.slice(-1)]},aug:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(e=void 0!==e?e:{},n.unshift(e),!n.every(i.isObject))throw new Error("Cannot augment non-object.");return this.set(t,i.aug.apply(null,n))},call:function(t){var e=this.get(t),n=i.toRealArray(arguments).slice(1);if(!i.isType("function",e))throw new Error("Function "+t+"does not exist.");return e.apply(null,n)},fullPath:function(t){var e=o(t);return e.unshift(this.name),e.join(".")}}),t.exports=s},function(t,e,n){var r=n(1).HTMLElement,i=r.prototype.matches||r.prototype.matchesSelector||r.prototype.webkitMatchesSelector||r.prototype.mozMatchesSelector||r.prototype.msMatchesSelector||r.prototype.oMatchesSelector;t.exports=function(t,e){if(i)return i.call(t,e)}},function(t,e,n){var r=n(0),i=n(7),o={bind:function(t,e){return this._handlers=this._handlers||{},this._handlers[t]=this._handlers[t]||[],this._handlers[t].push(e)},unbind:function(t,e){var n;this._handlers&&this._handlers[t]&&(e?(n=this._handlers[t].indexOf(e))>=0&&this._handlers[t].splice(n,1):this._handlers[t]=[])},trigger:function(t,e){var n=this._handlers&&this._handlers[t];(e=e||{}).type=t,n&&n.forEach(function(t){r.async(i(t,this,e))})}};t.exports={Emitter:o,makeEmitter:function(){return r.aug(function(){},o)}}},function(t,e,n){var r=n(89),i=n(91),o=n(6),s=n(23),a=n(7),u=n(0),c=new i(function(t){var e=function(t){return t.reduce(function(t,e){return t[e._className]=t[e._className]||[],t[e._className].push(e),t},{})}(t.map(r.fromRawTask));u.forIn(e,function(t,e){s.allSettled(e.map(function(t){return t.initialize()})).then(function(){e.forEach(function(t){o.all([t.hydrate(),t.insertIntoDom()]).then(a(t.render,t)).then(a(t.success,t),a(t.fail,t))})})})});t.exports={addWidget:function(t){return c.add(t)}}},function(t,e,n){var r=n(17);t.exports=function(t){return r.write(function(){t&&t.parentNode&&t.parentNode.removeChild(t)})}},function(t,e,n){var r=n(93),i=n(71),o=new(n(103))(function(t){(!function(t){return 1===t.length&&i.canFlushOneItem(t[0])}(t)?function(t){r.init(),t.forEach(function(t){var e=t.input.namespace,n=t.input.data,i=t.input.offsite,o=t.input.version;r.clientEvent(e,n,i,o)}),r.flush().then(function(){t.forEach(function(t){t.taskDoneDeferred.resolve()})},function(){t.forEach(function(t){t.taskDoneDeferred.reject()})})}:function(t){t.forEach(function(t){var e=t.input.namespace,n=t.input.data,r=t.input.offsite,o=t.input.version;i.clientEvent(e,n,r,o),t.taskDoneDeferred.resolve()})})(t)});t.exports={scribe:function(t,e,n,r){return o.add({namespace:t,data:e,offsite:n,version:r})},pause:function(){o.pause()},resume:function(){o.resume()}}},function(t,e,n){n(18),t.exports={log:function(t,e){}}},function(t,e,n){var r=n(1);function i(t){return(t=t||r).getSelection&&t.getSelection()}t.exports={getSelection:i,getSelectedText:function(t){var e=i(t);return e?e.toString():""}}},function(t,e,n){var r=n(4),i=n(1),o=n(3),s=2e4;t.exports=function(t){var e=new o,n=r.createElement("img");return n.onload=n.onerror=function(){i.setTimeout(e.resolve,50)},n.src=t,i.setTimeout(e.reject,s),e.promise}},function(t,e,n){var r,i=n(10),o=n(4),s=n(1),a=n(33),u=n(51),c=n(5),d=n(21),f="csptest";t.exports={inlineStyle:function(){var t=f+d.generate(),e=o.createElement("div"),n=o.createElement("style"),l="."+t+" { visibility: hidden; }";return!!o.body&&(c.asBoolean(a.val("widgets:csp"))&&(r=!1),void 0!==r?r:(e.style.display="none",i.add(e,t),n.type="text/css",n.appendChild(o.createTextNode(l)),o.body.appendChild(n),o.body.appendChild(e),r="hidden"===s.getComputedStyle(e).visibility,u(e),u(n),r))}}},function(t,e){t.exports=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}},function(t,e,n){var r=n(101);t.exports=function(t){t.define("createElement",r),t.define("createFragment",r),t.define("htmlToElement",r),t.define("hasSelectedText",r),t.define("addRootClass",r),t.define("removeRootClass",r),t.define("hasRootClass",r),t.define("prependStyleSheet",r),t.define("appendStyleSheet",r),t.define("prependCss",r),t.define("appendCss",r),t.define("makeVisible",r),t.define("injectWidgetEl",r),t.define("matchHeightToContent",r),t.define("matchWidthToContent",r)}},function(t,e){t.exports=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments))}}},function(t,e,n){var r=n(13),i=n(110),o=n(111),s=n(14);t.exports=function(t,e,n){return new r(i,o,s.DM_BUTTON,t,e,n)}},function(t,e,n){var r=n(25),i=n(112);t.exports=r.build([i])},function(t,e,n){var r=n(13),i=n(115),o=n(30),s=n(14);t.exports=function(t,e,n){return new r(i,o,s.FOLLOW_BUTTON,t,e,n)}},function(t,e,n){var r=n(13),i=n(123),o=n(29),s=n(14);t.exports=function(t,e,n){return new r(i,o,s.MOMENT,t,e,n)}},function(t,e,n){var r=n(13),i=n(125),o=n(29),s=n(14);t.exports=function(t,e,n){return new r(i,o,s.PERISCOPE,t,e,n)}},function(t,e,n){var r=n(127),i=n(128),o=n(132),s=n(134),a=n(136),u={collection:i,likes:o,list:s,profile:a,url:d},c=[a,o,i,s];function d(t){return r(c,function(e){try{return new e(t)}catch(t){}})}t.exports=function(t){return t?function(t){var e,n;return e=(t.sourceType+"").toLowerCase(),(n=u[e])?new n(t):null}(t)||d(t):null}},function(t,e,n){var r=n(4),i=n(13),o=n(30),s=n(138),a=n(14);t.exports=function(t,e,n){var u=r.createElement("div");return new i(s,o,a.TIMELINE,t,e,n,{sandboxWrapperEl:u})}},function(t,e,n){var r=n(4),i=n(13),o=n(30),s=n(140),a=n(14);t.exports=function(t,e,n){return new i(s,o,a.TWEET,t,e,n,{sandboxWrapperEl:r.createElement("div")})}},function(t,e,n){var r=n(13),i=n(142),o=n(30),s=n(14);t.exports=function(t,e,n){var a=t&&t.type||"share",u="hashtag"==a?s.HASHTAG_BUTTON:"mention"==a?s.MENTION_BUTTON:s.SHARE_BUTTON;return new r(i,o,u,t,e,n)}},function(t,e,n){var r=n(52),i=n(38),o=n(0);t.exports=function(t){var e={widget_origin:i.rootDocumentLocation(),widget_frame:i.isFramed()?i.currentDocumentLocation():null,duration_ms:t.duration,item_ids:t.widgetIds||[]},n=o.aug(t.namespace,{page:"page",component:"performance"});r.scribe(n,e)}},function(t,e,n){var r=n(0),i=n(129),o=["ar","fa","he","ur"];t.exports={isRtlLang:function(t){return t=String(t).toLowerCase(),r.contains(o,t)},matchLanguage:function(t){return t=(t=(t||"").toLowerCase()).replace("_","-"),i(t)?t:(t=t.replace(/-.*/,""),i(t)?t:"en")}}},function(t,e,n){var r=n(53),i=n(16),o=n(37),s=n(27),a=n(0),u=n(9),c=n(6),d=u.get("scribeCallback"),f=2083,l=[],h=i.url(o.CLIENT_EVENT_ENDPOINT,{dnt:0,l:""}),p=encodeURIComponent(h).length;function m(t,e,n,r,i){var u=!a.isObject(t),f=!!e&&!a.isObject(e);if(!u&&!f)return d&&d(arguments),e=e||{},c.resolve(v(o.formatClientEventNamespace(t),o.formatClientEventData(e,n,r),s.settingsScribe(),i))}function v(t,e,n,s){var u;n&&a.isObject(t)&&a.isObject(e)&&(r.log(t,e),u=o.flattenClientEventPayload(t,e),s=a.aug({},s,{l:o.stringify(u)}),u.dnt&&(s.dnt=1),w(i.url(n,s)))}function g(t){return l.push(t),l}function w(t){return(new Image).src=t}t.exports={canFlushOneItem:function(t){var e=o.stringify(t),n=encodeURIComponent(e).length+3;return p+n<f},_enqueueRawObject:g,scribe:v,clientEvent:m,enqueueClientEvent:function(t,e,n,r){var i=!a.isObject(t),s=!!e&&!a.isObject(e);if(!i&&!s)return g(o.flattenClientEventPayload(o.formatClientEventNamespace(t),o.formatClientEventData(e,n,r)))},interaction:function(t,e,n,r){var i=o.extractTermsFromDOM(t.target||t.srcElement);return i.action=r||"click",m(i,e,n)},placePixel:w}},function(t){t.exports={tweetButtonHtmlPath:"/widgets/tweet_button.2f70fb173b9000da126c79afe2098f02.{{lang}}.html",followButtonHtmlPath:"/widgets/follow_button.2f70fb173b9000da126c79afe2098f02.{{lang}}.html",hubHtmlPath:"/widgets/hub.html",widgetIframeHtmlPath:"/widgets/widget_iframe.2f70fb173b9000da126c79afe2098f02.html",resourceBaseUrl:"https://platform.twitter.com"}},function(t,e,n){var r=n(4),i=n(8),o=n(2);function s(t,e){var n,r;return e=e||i,/^https?:\/\//.test(t)?t:/^\/\//.test(t)?e.protocol+t:(n=e.host+(e.port.length?":"+e.port:""),0!==t.indexOf("/")&&((r=e.pathname.split("/")).pop(),r.push(t),t="/"+r.join("/")),[e.protocol,"//",n,t].join(""))}t.exports={absolutize:s,getCanonicalURL:function(){for(var t,e=r.getElementsByTagName("link"),n=0;e[n];n++)if("canonical"==(t=e[n]).rel)return s(t.href)},getScreenNameFromPage:function(){for(var t,e,n,i=[r.getElementsByTagName("a"),r.getElementsByTagName("link")],s=0,a=0,u=/\bme\b/;t=i[s];s++)for(a=0;e=t[a];a++)if(u.test(e.rel)&&(n=o.screenName(e.href)))return n},getHostname:function(t){var e=r.createElement("a");return e.setAttribute("href",t),e.hostname}}},function(t){t.exports={TWEET:0,RETWEET:10,CUSTOM_TIMELINE:17,LIVE_VIDEO_EVENT:28,QUOTE_TWEET:23}},,,,,,,,function(t,e,n){var r,i=n(3),o=n(4),s=n(84),a=n(46),u=n(9),c=n(85),d=n(22),f=n(88),l=n(143),h=n(151),p=n(152),m=n(26),v=n(34);n(153),m.emitter.trigger(m.START),u.set("widgets.init",!0),a.set("init",!0),p(),r=new i,s.exposeReadyPromise(r.promise,a.base,"_e"),a.set("widgets",l),a.set("widgets.load",f.load),a.set("events",d),h(function(){v.load(),r.resolve(a.base),c.attachTo(o),f.loadPage()})},function(t,e){t.exports=navigator},function(t,e,n){var r=n(7);t.exports={exposeReadyPromise:function(t,e,n){e.ready=r(t.then,t),n&&Array.isArray(e[n])&&(e[n].forEach(r(t.then,t)),delete e[n])}}},function(t,e,n){var r=n(8),i=n(35),o=n(36),s=n(86),a=n(2);function u(t){var e,n,u;t.altKey||t.metaKey||t.shiftKey||(e=o.closest(function(t){return"A"===t.tagName||"AREA"===t.tagName},t.target))&&a.isIntentURL(e.href)&&(n=(n=(n=[u=e.href,"original_referer="+r.href].join(-1==u.indexOf("?")?"?":"&")).replace(/^http[:]/,"https:")).replace(/^\/\//,"https://"),s.open(n,e),i.preventDefault(t))}t.exports={attachTo:function(t){t.addEventListener("click",u,!1)}}},function(t,e,n){var r=n(2),i=n(87),o=n(22),s=n(16),a={favorite:["favorite","like"],follow:["follow"],like:["favorite","like"],retweet:["retweet"],tweet:["tweet"]};function u(t){this.srcEl=[],this.element=t}u.open=function(t,e,n){var u=(r.intentType(t)||"").toLowerCase();r.isTwitterURL(t)&&(function(t,e){i.open(t,e)}(t,n),e&&o.trigger("click",{target:e,region:"intent",type:"click",data:{}}),e&&a[u]&&a[u].forEach(function(n){o.trigger(n,{target:e,region:"intent",type:n,data:function(t,e){var n=s.decodeURL(e);switch(t){case"favorite":case"like":return{tweet_id:n.tweet_id};case"follow":return{screen_name:n.screen_name,user_id:n.user_id};case"retweet":return{source_tweet_id:n.tweet_id};default:return{}}}(u,t)})}))},t.exports=u},function(t,e,n){var r=n(1),i=n(35),o=n(36),s=n(20),a=n(2),u=n(21),c="intent_";function d(t){this.win=t}d.prototype.open=function(t,e){var n=e&&"click"==e.type&&o.closest("a",e.target),r=e&&(e.altKey||e.metaKey||e.shiftKey),d=n&&(s.ios()||s.android());if(a.isTwitterURL(t))return r||d?this:(this.name=c+u.generate(),this.popup=this.win.open(t,this.name),e&&i.preventDefault(e),this)},d.open=function(t,e){return new d(r).open(t,e)},t.exports=d},function(t,e,n){var r=n(4),i=n(6),o=n(23),s=n(50),a=n(33),u=n(9),c=n(52),d=n(22),f=n(5),l=n(0),h=n(34),p=n(106),m=n(26);function v(){var t=a.val("widgets:autoload")||!0;return!f.isFalseValue(t)&&(f.isTruthValue(t)?r.body:r.querySelectorAll(t))}function g(t,e){var n,i;return t=(t=t||r.body).length?l.toRealArray(t):[t],c.pause(),i=function(t,e){return t.reduce(function(t,n){return t.concat(p.reduce(function(t,r){return t.concat(r(n,e))},[]))},[])}(t,e),m.emitter.trigger(m.ALL_WIDGETS_RENDER_START,{widgets:i}),n=o.allResolved(i.map(function(t){return s.addWidget(t)})).then(function(t){d.trigger("loaded",{widgets:t}),t&&t.length&&m.emitter.trigger(m.ALL_WIDGETS_RENDER_END,{widgets:t})}),o.always(n,function(){c.resume()}),n}function w(t){return h.getExperiments().then(function(e){return g(t,e)})}t.exports={load:w,loadPage:function(){var t=v();return!1===t?i.resolve():(u.set("widgets.loaded",!0),w(t))},_getPageLoadTarget:v}},function(t,e,n){var r=n(10),i=n(17),o=n(22),s=n(51),a=n(6),u=n(23);function c(t,e){this._widget=null,this._sandbox=null,this._hydrated=!1,this._insertedIntoDom=!1,this._Sandbox=t.Sandbox,this._factory=t.factory,this._widgetParams=t.parameters,this._resolve=e,this._className=t.className,this._renderedClassName=t.className+"-rendered",this._errorClassName=t.className+"-error",this._srcEl=t.srcEl,this._targetGlobal=function(t){return(t.srcEl||t.targetEl).ownerDocument.defaultView}(t),this._sandboxWrapperEl=t.options?t.options.sandboxWrapperEl:null,this._insertionStrategy=function(e){var n,r=t.srcEl,i=t.targetEl,o=t.className,s=t.className+"-rendered",a=t.options?t.options.sandboxWrapperEl:null;a?(a.appendChild(e),a.classList.add(o,s),n=a):n=e,r?i.insertBefore(n,r):i.appendChild(n)}}c.fromRawTask=function(t){return new c(t.input,t.taskDoneDeferred.resolve)},c.prototype.initialize=function(){var t=this,e=new this._Sandbox(this._targetGlobal);return this._factory(this._widgetParams,e).then(function(n){return t._widget=n,t._sandbox=e,n._sandboxWrapperEl=t._sandboxWrapperEl,n})},c.prototype.insertIntoDom=function(){var t=this,e=this._sandboxWrapperEl?"":[this._className,this._renderedClassName].join(" ");return this._widget?this._sandbox.insert(this._widget.id,{class:e},null,this._insertionStrategy).then(function(){t._insertedIntoDom=!0}):a.reject(new Error("cannot insert widget into DOM before it is initialized"))},c.prototype.hydrate=function(){var t=this;return this._widget?this._widget.hydrate().then(function(){t._hydrated=!0}):a.reject(new Error("cannot hydrate widget before it is initialized"))},c.prototype.render=function(){var t=this;function e(e){var n=t._sandboxWrapperEl?t._sandboxWrapperEl:t._sandbox.sandboxEl;return s(n).then(function(){return a.reject(e)})}return this._hydrated?this._insertedIntoDom?t._widget.render(t._sandbox).then(function(){return t._sandbox.onResize(function(){return t._widget.resize().then(function(){var e=t._sandboxWrapperEl?t._sandboxWrapperEl:t._sandbox.sandboxEl;o.trigger("resize",{target:e})})}),t._widget.show()}).then(function(){return s(t._srcEl).then(function(){return t._sandbox.sandboxEl})},e):e(new Error("cannot render widget before DOM insertion")):e(new Error("cannot render widget before hydration"))},c.prototype.fail=function(){var t=this,e=t._errorClassName,n=t._sandboxWrapperEl?t._sandboxWrapperEl:t._srcEl;return this._srcEl?u.always(i.write(function(){r.add(n,e)}),function(){o.trigger("rendered",{target:n}),t._resolve(n)}):(t._resolve(),a.resolve())},c.prototype.success=function(){var t=this._sandboxWrapperEl?this._sandboxWrapperEl:this._sandbox.sandboxEl;o.trigger("rendered",{target:t}),this._resolve(t)},t.exports=c},function(t,e,n){var r;!function(){"use strict";var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};function o(){this.frames=[],this.lastId=0,this.raf=i,this.batch={hash:{},read:[],write:[],mode:null}}o.prototype.read=function(t,e){var n=this.add("read",t,e),r=n.id;return this.batch.read.push(n.id),"reading"===this.batch.mode||this.batch.scheduled?r:(this.scheduleBatch(),r)},o.prototype.write=function(t,e){var n=this.add("write",t,e),r=this.batch.mode,i=n.id;return this.batch.write.push(n.id),"writing"===r||"reading"===r||this.batch.scheduled?i:(this.scheduleBatch(),i)},o.prototype.defer=function(t,e,n){"function"==typeof t&&(n=e,e=t,t=1);var r=this,i=t-1;return this.schedule(i,function(){r.run({fn:e,ctx:n})})},o.prototype.clear=function(t){if("function"==typeof t)return this.clearFrame(t);t=Number(t);var e=this.batch.hash[t];if(e){var n=this.batch[e.type],r=n.indexOf(t);delete this.batch.hash[t],~r&&n.splice(r,1)}},o.prototype.clearFrame=function(t){var e=this.frames.indexOf(t);~e&&this.frames.splice(e,1)},o.prototype.scheduleBatch=function(){var t=this;this.schedule(0,function(){t.batch.scheduled=!1,t.runBatch()}),this.batch.scheduled=!0},o.prototype.uniqueId=function(){return++this.lastId},o.prototype.flush=function(t){for(var e;e=t.shift();)this.run(this.batch.hash[e])},o.prototype.runBatch=function(){try{this.batch.mode="reading",this.flush(this.batch.read),this.batch.mode="writing",this.flush(this.batch.write),this.batch.mode=null}catch(t){throw this.runBatch(),t}},o.prototype.add=function(t,e,n){var r=this.uniqueId();return this.batch.hash[r]={id:r,fn:e,ctx:n,type:t}},o.prototype.run=function(t){var e=t.ctx||this,n=t.fn;if(delete this.batch.hash[t.id],!this.onError)return n.call(e);try{n.call(e)}catch(t){this.onError(t)}},o.prototype.loop=function(){var t,e=this,n=this.raf,r=!1;function i(){var t=e.frames.shift();e.frames.length?n(i):e.looping=!1,t&&t()}this.looping||(t=setTimeout(function(){r=!0,i()},500),n(function(){r||(clearTimeout(t),i())}),this.looping=!0)},o.prototype.schedule=function(t,e){return this.frames[t]?this.schedule(t+1,e):(this.loop(),this.frames[t]=e)};var s=new o;void 0!==t&&t.exports?t.exports=s:void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},function(t,e,n){var r=n(3),i=n(92),o=n(7);function s(t){this._inputsQueue=[],this._task=t,this._hasFlushBeenScheduled=!1}s.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._hasFlushBeenScheduled||(this._hasFlushBeenScheduled=!0,i(o(this._flush,this))),e.promise},s.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue=[],this._hasFlushBeenScheduled=!1},t.exports=s},function(t,e,n){var r=n(45).Promise;t.exports=r._asap},function(t,e,n){var r,i,o,s=n(4),a=n(1),u=n(28),c=n(19),d=n(3),f=n(6),l=n(53),h=n(37),p=n(0),m=n(29),v=n(9).get("scribeCallback"),g=Math.floor(1e3*Math.random())+"_",w="rufous-frame-"+g+"-",y="rufous-form-"+g+"-",b=0,_=!1,E=new d;function x(){var t=o.createElement("form"),e=o.createElement("input"),n=o.createElement("input");return b++,t.action=h.CLIENT_EVENT_ENDPOINT,t.method="POST",t.target=w+b,t.id=y+b,e.type="hidden",e.name="dnt",e.value=c.enabled(),n.type="hidden",n.name="tfw_redirect",n.value=h.RUFOUS_REDIRECT,t.appendChild(e),t.appendChild(n),t}function T(){var t=w+b;return u({id:t,name:t,width:0,height:0,border:0},{display:"none"},o.doc)}t.exports={clientEvent:function(t,e,n,i){(function(t,e){var n=!p.isObject(t),r=!!e&&!p.isObject(e),i=n||r;return i})(t,e)||(v&&v(arguments),E.promise.then(function(){!function(t,e){var n,i,s;p.isObject(t)&&p.isObject(e)&&(l.log(t,e),s=h.flattenClientEventPayload(t,e),(n=r.firstChild).value=+(+n.value||s.dnt||0),(i=o.createElement("input")).type="hidden",i.name="l",i.value=h.stringify(s),r.appendChild(i))}(h.formatClientEventNamespace(t),h.formatClientEventData(e,n,i))}))},flush:function(){return E.promise.then(function(){var t;return r.children.length<=2?f.reject():(t=f.all([o.doc.body.appendChild(r),o.doc.body.appendChild(i)]).then(function(t){var e=t[0],n=t[1];return n.addEventListener("load",function(){!function(t,e){return function(){var n=t.parentNode;n&&(n.removeChild(t),n.removeChild(e))}}(e,n)()}),e.submit(),t}),r=x(),i=T(),t)})},init:function(){return _?E.promise:((o=new m(a)).insert("rufous-sandbox",null,{display:"none"},function(t){s.body.appendChild(t)}).then(function(){o.setTitle("Twitter analytics iframe"),r=x(),i=T(),E.resolve([r,i])}),_=!0,E.promise)}}},function(t,e,n){var r=n(8),i=/^[^#?]*\.(gov|mil)(:\d+)?([#?].*)?$/i,o={};function s(t){return t in o?o[t]:o[t]=i.test(t)}t.exports={isUrlSensitive:s,isHostPageSensitive:function(){return s(r.host)}}},function(t,e,n){var r=n(0);t.exports=function t(e){var n=[];return e.forEach(function(e){var i=r.isType("array",e)?t(e):[e];n=n.concat(i)}),n}},function(t,e){t.exports=function(t){return t.filter(function(e,n){return t.indexOf(e)===n})}},function(t,e,n){var r=n(40),i=n(0),o=n(99);function s(){r.apply(this,arguments)}s.prototype=Object.create(r.prototype),i.aug(s.prototype,{factory:o}),t.exports=s},function(t,e,n){var r=n(23),i=n(0),o=n(7);t.exports={before:function(t,e){return function(){var n,i=this,o=arguments;return n=e.apply(this,arguments),r.isPromise(n)?n.then(function(){return t.apply(i,o)}):t.apply(this,arguments)}},after:function(t,e){return function(){var n,i=this,o=arguments;function s(t,e){return r.isPromise(e)?e.then(function(){return t}):t}return n=t.apply(this,arguments),r.isPromise(n)?n.then(function(t){return s(t,e.apply(i,o))}):s(n,e.apply(this,arguments))}},around:function(t,e){return function(){var n=i.toRealArray(arguments);return n.unshift(o(t,this)),e.apply(this,n)}}}},function(t,e,n){var r=n(10),i=n(17),o=n(41),s=n(6),a=n(0);t.exports=function(){var t=o();function e(e){t.apply(this,arguments),Object.defineProperty(this,"targetGlobal",{value:e})}return e.prototype=Object.create(t.prototype),a.aug(e.prototype,{id:null,initialized:!1,width:0,height:0,sandboxEl:null,insert:function(){return s.reject()},onResize:function(){},addClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t:[t],i.write(function(){t.forEach(function(t){r.add(e,t)})})},removeClass:function(t){var e=this.sandboxEl;return t=Array.isArray(t)?t:[t],i.write(function(){t.forEach(function(t){r.remove(e,t)})})},styleSelf:function(t){var e=this;return i.write(function(){a.forIn(t,function(t,n){e.sandboxEl.style[t]=n})})}}),e}},function(t,e,n){var r=n(4),i=n(10),o=n(17),s=n(54),a=n(25),u=n(55),c=n(56),d=n(43),f=n(28),l=n(18),h=n(57),p=n(3),m=n(6),v=n(0),g=n(9),w=n(21),y=n(7),b={allowfullscreen:"true"},_={position:"absolute",visibility:"hidden",display:"block",width:"0px",height:"0px",padding:"0",border:"none"},E={position:"static",visibility:"visible"},x="SandboxRoot",T=".SandboxRoot { display: none; }",A=50;function S(t,e,n,r){return e=v.aug({id:t},b,e),n=v.aug({},_,n),f(e,n,r)}function R(t,e,n,i,s){var a=new p,u=w.generate(),c=S(t,e,n,s);return g.set(["sandbox",u],function(){var t=c.contentWindow.document;o.write(function(){t.write("<!DOCTYPE html><html><head></head><body></body></html>")}).then(function(){t.close(),a.resolve(c)})}),c.src=["javascript:",'document.write("");',"try { window.parent.document; }",'catch (e) { document.domain="'+r.domain+'"; }',"window.parent."+g.fullPath(["sandbox",u])+"();"].join(""),c.addEventListener("error",a.reject,!1),o.write(function(){i.parentNode.replaceChild(c,i)}),a.promise}t.exports=a.couple(n(58),function(t){t.overrideProperty("id",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty("initialized",{get:function(){return!!this.win}}),t.overrideProperty("width",{get:function(){return this._width}}),t.overrideProperty("height",{get:function(){return this._height}}),t.overrideProperty("sandboxEl",{get:function(){return this.iframeEl}}),t.defineProperty("iframeEl",{get:function(){return this._iframe}}),t.defineProperty("rootEl",{get:function(){return this.doc&&this.doc.documentElement}}),t.defineProperty("widgetEl",{get:function(){return this.doc&&this.doc.body.firstElementChild}}),t.defineProperty("win",{get:function(){return this.iframeEl&&this.iframeEl.contentWindow}}),t.defineProperty("doc",{get:function(){return this.win&&this.win.document}}),t.define("_updateCachedDimensions",function(){var t=this;return o.read(function(){var e,n=h(t.sandboxEl);"visible"==t.sandboxEl.style.visibility?t._width=n.width:(e=h(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define("_setTargetToBlank",function(){var t=this.createElement("base");t.target="_blank",this.doc.head.appendChild(t)}),t.define("_didResize",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.define("setTitle",function(t){this.iframeEl.title=t}),t.override("createElement",function(t){return this.doc.createElement(t)}),t.override("createFragment",function(){return this.doc.createDocumentFragment()}),t.override("htmlToElement",function(t){var e;return(e=this.createElement("div")).innerHTML=t,e.firstElementChild}),t.override("hasSelectedText",function(){return!!s.getSelectedText(this.win)}),t.override("addRootClass",function(t){var e=this.rootEl;return t=Array.isArray(t)?t:[t],this.initialized?o.write(function(){t.forEach(function(t){i.add(e,t)})}):m.reject(new Error("sandbox not initialized"))}),t.override("removeRootClass",function(t){var e=this.rootEl;return t=Array.isArray(t)?t:[t],this.initialized?o.write(function(){t.forEach(function(t){i.remove(e,t)})}):m.reject(new Error("sandbox not initialized"))}),t.override("hasRootClass",function(t){return i.present(this.rootEl,t)}),t.define("addStyleSheet",function(t,e){var n,r=new p;return this.initialized?((n=this.createElement("link")).type="text/css",n.rel="stylesheet",n.href=t,n.addEventListener("load",r.resolve,!1),n.addEventListener("error",r.reject,!1),o.write(y(e,null,n)).then(function(){return u(t).then(r.resolve,r.reject),r.promise})):m.reject(new Error("sandbox not initialized"))}),t.override("prependStyleSheet",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override("appendStyleSheet",function(t){var e=this.doc;return this.addStyleSheet(t,function(t){return e.head.appendChild(t)})}),t.define("addCss",function(t,e){var n;return c.inlineStyle()?((n=this.createElement("style")).type="text/css",n.appendChild(this.doc.createTextNode(t)),o.write(y(e,null,n))):(l.devError("CSP enabled; cannot embed inline styles"),m.resolve())}),t.override("prependCss",function(t){var e=this.doc;return this.addCss(t,function(t){var n=e.head.firstElementChild;return n?e.head.insertBefore(t,n):e.head.appendChild(t)})}),t.override("appendCss",function(t){var e=this.doc;return this.addCss(t,function(t){return e.head.appendChild(t)})}),t.override("makeVisible",function(){var t=this;return this.styleSelf(E).then(function(){t._updateCachedDimensions()})}),t.override("injectWidgetEl",function(t){var e=this;return this.initialized?this.widgetEl?m.reject(new Error("widget already injected")):o.write(function(){e.doc.body.appendChild(t)}):m.reject(new Error("sandbox not initialized"))}),t.override("matchHeightToContent",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).height:0}),o.write(function(){e.sandboxEl.style.height=t+"px"}).then(function(){return e._updateCachedDimensions()})}),t.override("matchWidthToContent",function(){var t,e=this;return o.read(function(){t=e.widgetEl?h(e.widgetEl).width:0}),o.write(function(){e.sandboxEl.style.width=t+"px"}).then(function(){return e._updateCachedDimensions()})}),t.after("initialize",function(){this._iframe=null,this._width=this._height=0,this._resizeHandlers=[]}),t.override("insert",function(t,e,n,r){var i=this,s=new p,a=this.targetGlobal.document,u=S(t,e,n,a);return o.write(y(r,null,u)),u.addEventListener("load",function(){(function(t){try{t.contentWindow.document}catch(t){return m.reject(t)}return m.resolve(t)})(u).then(null,y(R,null,t,e,n,u,a)).then(s.resolve,s.reject)},!1),u.addEventListener("error",s.reject,!1),s.promise.then(function(t){var e=d(i._didResize,A,i);return i._iframe=t,i.win.addEventListener("resize",e,!1),m.all([i._setTargetToBlank(),i.addRootClass(x),i.prependCss(T)])})}),t.override("onResize",function(t){this._resizeHandlers.push(t)}),t.after("styleSelf",function(){return this._updateCachedDimensions()})})},function(t,e){t.exports=function(){throw new Error("unimplemented method")}},function(t,e){t.exports={getBaseURLPath:function(t){switch(t&&t.tfw_team_holdback_11929&&t.tfw_team_holdback_11929.bucket){case"control":return"embed-holdback";case"holdback_prod":return"embed-holdback-prod";default:return"embed"}}}},function(t,e,n){var r=n(3),i=n(7),o=100,s=3e3;function a(t,e){this._inputsQueue=[],this._task=t,this._isPaused=!1,this._flushDelay=e&&e.flushDelay||o,this._pauseLength=e&&e.pauseLength||s,this._flushTimeout=void 0}a.prototype.add=function(t){var e=new r;return this._inputsQueue.push({input:t,taskDoneDeferred:e}),this._scheduleFlush(),e.promise},a.prototype._scheduleFlush=function(){this._isPaused||(clearTimeout(this._flushTimeout),this._flushTimeout=setTimeout(i(this._flush,this),this._flushDelay))},a.prototype._flush=function(){try{this._task.call(null,this._inputsQueue)}catch(t){this._inputsQueue.forEach(function(e){e.taskDoneDeferred.reject(t)})}this._inputsQueue=[],this._flushTimeout=void 0},a.prototype.pause=function(t){clearTimeout(this._flushTimeout),this._isPaused=!0,!t&&this._pauseLength&&setTimeout(i(this.resume,this),this._pauseLength)},a.prototype.resume=function(){this._isPaused=!1,this._scheduleFlush()},t.exports=a},function(t,e,n){var r=n(72),i=n(28),o=n(3),s=n(4),a=n(27),u=n(20),c=n(24),d=n(8),f=n(18),l=n(105),h=n(59),p=n(9),m=n(16),v=n(2),g=n(0),w=n(1),y=h(function(){return new o}),b={shouldObtainCookieConsent:!1,features:{}};t.exports={load:function(){var t,e,n,o;if(u.ie9()||u.ie10()||"http:"!==d.protocol&&"https:"!==d.protocol)return f.devError("Using default settings due to unsupported browser or protocol."),void y().resolve();t={origin:d.origin},a.settings().indexOf("localhost")>-1&&(t.localSettings=!0),e=m.url(r.resourceBaseUrl+r.widgetIframeHtmlPath,t),n=function(t){var n,r,i,o;if(r=v.isTwitterURL(t.origin),i=e.substr(0,t.origin.length)===t.origin,o=v.isTwimgURL(t.origin),i&&r||o)try{(n="string"==typeof t.data?c.parse(t.data):t.data).namespace===l.settings&&(b=g.aug(b,{features:n.settings.features,sessionId:n.sessionId}),y().resolve())}catch(t){f.devError(t)}},w.addEventListener("message",n),o=i({src:e,title:"Twitter settings iframe"},{display:"none"}),s.body.appendChild(o)},settingsLoaded:function(){var t,e;return t=p.get("experimentOverride"),y().promise.then(function(){return t&&t.name&&t.assignment&&((e={})[t.name]={bucket:t.assignment},b.features=g.aug(b.features,e)),b})}}},function(t,e){t.exports={settings:"twttr.settings"}},function(t,e,n){t.exports=[n(107),n(114),n(122),n(124),n(126),n(139),n(141)]},function(t,e,n){var r=n(16),i=n(5),o=n(0),s=n(11),a=n(12)(),u=n(60),c="a.twitter-dm-button";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e=t.getAttribute("data-show-screen-name"),n=s(t),a=t.getAttribute("href"),u=t.getAttribute("data-screen-name"),c=e?i.asBoolean(e):null,d=t.getAttribute("data-size"),f=r.decodeURL(a),l=f.recipient_id,h=t.getAttribute("data-text")||f.text,p=t.getAttribute("data-welcome-message-id")||f.welcomeMessageId;return o.aug(n,{screenName:u,showScreenName:c,size:d,text:h,userId:l,welcomeMessageId:p})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(0);t.exports=function t(e){var n;if(e)return n=e.lang||e.getAttribute("data-lang"),r.isType("string",n)?n:t(e.parentElement)}},function(t,e,n){var r=n(0),i=n(48);t.exports=function(t,e){return i(t,e)?[t]:r.toRealArray(t.querySelectorAll(e))}},function(t,e,n){var r=n(3);t.exports=function(t,e){var i=new r;return n.e(1).then(function(r){var o;try{o=n(75),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(61),i=n(29);t.exports=r.isSupported()?r:i},function(t,e,n){var r=n(113),i=n(1),o=n(10),s=n(35),a=n(17),u=n(54),c=n(25),d=n(55),f=n(56),l=n(57),h=n(7),p=n(43),m=n(6),v=n(0),g=50,w={position:"absolute",visibility:"hidden",display:"block",transform:"rotate(0deg)"},y={position:"static",visibility:"visible"},b="twitter-widget",_="open",E="SandboxRoot",x=".SandboxRoot { display: none; max-height: 10000px; }";t.exports=c.couple(n(58),function(t){t.defineStatic("isSupported",function(){return!!i.HTMLElement.prototype.attachShadow&&f.inlineStyle()}),t.overrideProperty("id",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty("initialized",{get:function(){return!!this._shadowHost}}),t.overrideProperty("width",{get:function(){return this._width}}),t.overrideProperty("height",{get:function(){return this._height}}),t.overrideProperty("sandboxEl",{get:function(){return this._shadowHost}}),t.define("_updateCachedDimensions",function(){var t=this;return a.read(function(){var e,n=l(t.sandboxEl);"visible"==t.sandboxEl.style.visibility?t._width=n.width:(e=l(t.sandboxEl.parentElement).width,t._width=Math.min(n.width,e)),t._height=n.height})}),t.define("_didResize",function(){var t=this,e=this._resizeHandlers.slice(0);return this._updateCachedDimensions().then(function(){e.forEach(function(e){e(t)})})}),t.override("createElement",function(t){return this.targetGlobal.document.createElement(t)}),t.override("createFragment",function(){return this.targetGlobal.document.createDocumentFragment()}),t.override("htmlToElement",function(t){var e;return(e=this.createElement("div")).innerHTML=t,e.firstElementChild}),t.override("hasSelectedText",function(){return!!u.getSelectedText(this.targetGlobal)}),t.override("addRootClass",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t:[t],this.initialized?a.write(function(){t.forEach(function(t){o.add(e,t)})}):m.reject(new Error("sandbox not initialized"))}),t.override("removeRootClass",function(t){var e=this._shadowRootBody;return t=Array.isArray(t)?t:[t],this.initialized?a.write(function(){t.forEach(function(t){o.remove(e,t)})}):m.reject(new Error("sandbox not initialized"))}),t.override("hasRootClass",function(t){return o.present(this._shadowRootBody,t)}),t.override("addStyleSheet",function(t,e){return this.addCss('@import url("'+t+'");',e).then(function(){return d(t)})}),t.override("prependStyleSheet",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override("appendStyleSheet",function(t){var e=this._shadowRoot;return this.addStyleSheet(t,function(t){return e.appendChild(t)})}),t.override("addCss",function(t,e){var n;return this.initialized?f.inlineStyle()?((n=this.createElement("style")).type="text/css",n.appendChild(this.targetGlobal.document.createTextNode(t)),a.write(h(e,null,n))):m.resolve():m.reject(new Error("sandbox not initialized"))}),t.override("prependCss",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){var n=e.firstElementChild;return n?e.insertBefore(t,n):e.appendChild(t)})}),t.override("appendCss",function(t){var e=this._shadowRoot;return this.addCss(t,function(t){return e.appendChild(t)})}),t.override("makeVisible",function(){return this.styleSelf(y)}),t.override("injectWidgetEl",function(t){var e=this;return this.initialized?this._shadowRootBody.firstElementChild?m.reject(new Error("widget already injected")):a.write(function(){e._shadowRootBody.appendChild(t)}).then(function(){return e._updateCachedDimensions()}).then(function(){var t=p(e._didResize,g,e);new r(e._shadowRootBody,t)}):m.reject(new Error("sandbox not initialized"))}),t.override("matchHeightToContent",function(){return m.resolve()}),t.override("matchWidthToContent",function(){return m.resolve()}),t.override("insert",function(t,e,n,r){var i=this.targetGlobal.document,o=this._shadowHost=i.createElement(b),u=this._shadowRoot=o.attachShadow({mode:_}),c=this._shadowRootBody=i.createElement("div");return v.forIn(e||{},function(t,e){o.setAttribute(t,e)}),o.id=t,u.appendChild(c),s.delegate(c,"click","A",function(t,e){e.hasAttribute("target")||e.setAttribute("target","_blank")}),m.all([this.styleSelf(w),this.addRootClass(E),this.prependCss(x),a.write(r.bind(null,o))])}),t.override("onResize",function(t){this._resizeHandlers.push(t)}),t.after("initialize",function(){this._shadowHost=this._shadowRoot=this._shadowRootBody=null,this._width=this._height=0,this._resizeHandlers=[]}),t.after("styleSelf",function(){return this._updateCachedDimensions()})})},function(t,e){var n;(n=function(t,e){function r(t,e){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(e)}else t.resizedAttached=new function(){var t,e;this.q=[],this.add=function(t){this.q.push(t)},this.call=function(){for(t=0,e=this.q.length;t<e;t++)this.q[t].call()}},t.resizedAttached.add(e);t.resizeSensor=document.createElement("div"),t.resizeSensor.className="resize-sensor";var n="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",r="position: absolute; left: 0; top: 0; transition: 0s;";t.resizeSensor.style.cssText=n,t.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+n+'"><div style="'+r+'"></div></div><div class="resize-sensor-shrink" style="'+n+'"><div style="'+r+' width: 200%; height: 200%"></div></div>',t.appendChild(t.resizeSensor),{fixed:1,absolute:1}[function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}(t,"position")]||(t.style.position="relative");var i,o,s=t.resizeSensor.childNodes[0],a=s.childNodes[0],u=t.resizeSensor.childNodes[1],c=(u.childNodes[0],function(){a.style.width=s.offsetWidth+10+"px",a.style.height=s.offsetHeight+10+"px",s.scrollLeft=s.scrollWidth,s.scrollTop=s.scrollHeight,u.scrollLeft=u.scrollWidth,u.scrollTop=u.scrollHeight,i=t.offsetWidth,o=t.offsetHeight});c();var d=function(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener(e,n)},f=function(){t.offsetWidth==i&&t.offsetHeight==o||t.resizedAttached&&t.resizedAttached.call(),c()};d(s,"scroll",f),d(u,"scroll",f)}var i=Object.prototype.toString.call(t),o="[object Array]"===i||"[object NodeList]"===i||"[object HTMLCollection]"===i||"undefined"!=typeof jQuery&&t instanceof jQuery||"undefined"!=typeof Elements&&t instanceof Elements;if(o)for(var s=0,a=t.length;s<a;s++)r(t[s],e);else r(t,e);this.detach=function(){if(o)for(var e=0,r=t.length;e<r;e++)n.detach(t[e]);else n.detach(t)}}).detach=function(t){t.resizeSensor&&(t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)},void 0!==t&&void 0!==t.exports?t.exports=n:window.ResizeSensor=n},function(t,e,n){var r=n(2),i=n(0),o=n(11),s=n(12)(),a=n(62),u=n(5),c="a.twitter-follow-button";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e=o(t),n={screenName:r.screenName(t.href),showScreenName:"false"!==t.getAttribute("data-show-screen-name"),showCount:"false"!==t.getAttribute("data-show-count"),size:t.getAttribute("data-size"),count:t.getAttribute("data-count"),preview:t.getAttribute("data-preview")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(3);t.exports=function(t,e){var i=new r;return n.e(2).then(function(r){var o;try{o=n(76),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(17),i=n(117),o=n(59),s=n(28),a=n(3),u=n(6),c=n(7),d=n(0),f={allowfullscreen:"true"},l={position:"absolute",visibility:"hidden",width:"0px",height:"0px"},h={position:"static",visibility:"visible"},p={};i(function(t,e,n){var r=p[t];if(r)return e=e||1,n=n||1,r.styleSelf({width:e+"px",height:n+"px"}).then(function(){r.didResize()})},function(t){var e=p[t];if(e)return e._results.resolve()},function(t){var e=p[t];if(e)return e._rendered.resolve()},function(t,e){var n=p[t];n&&e&&n.setIframeVersion(e)},function(t){var e=p[t];if(e)return e._results.reject()}),t.exports=function(t){t.overrideProperty("id",{get:function(){return this.sandboxEl&&this.sandboxEl.id}}),t.overrideProperty("initialized",{get:function(){return!!this.iframeEl}}),t.overrideProperty("width",{get:function(){return this._width}}),t.overrideProperty("height",{get:function(){return this._height}}),t.overrideProperty("sandboxEl",{get:function(){return this.iframeEl}}),t.defineProperty("iframeEl",{get:function(){return this._iframe}}),t.defineProperty("iframeVersion",{get:function(){return this._iframeVersion}}),t.define("updateCachedDimensions",function(){var t=this;return this.initialized?r.read(function(){t._width=t.sandboxEl.offsetWidth,t._height=t.sandboxEl.offsetHeight}):u.resolve()}),t.define("setTitle",function(t){this.iframeEl.title=t}),t.define("setWaitToSwapUntilRendered",function(t){this._waitToSwapUntilRendered=t}),t.define("setIframeVersion",function(t){this._iframeVersion=t}),t.define("getResultsPromise",function(){return this._results.promise}),t.define("getRenderedPromise",function(){return this._rendered.promise}),t.define("makeVisible",function(){return this.styleSelf(h)}),t.define("didResize",function(){var t=this,e=t._resizeHandlers.length>0;return this.updateCachedDimensions().then(function(){e&&t._resizeHandlers.forEach(function(e){e(t)})})}),t.define("loadDocument",function(t){var e=new a;return this.initialized?this.iframeEl.src?u.reject(new Error("widget already loaded")):(this.iframeEl.addEventListener("load",e.resolve,!1),this.iframeEl.addEventListener("error",e.reject,!1),this.iframeEl.src=t,e.promise):u.reject(new Error("sandbox not initialized"))}),t.after("initialize",function(){var t=new a,e=new a;this._iframe=null,this._iframeVersion=null,this._width=this._height=0,this._resizeHandlers=[],this._rendered=t,this._results=e,this._waitToSwapUntilRendered=!1}),t.override("insert",function(t,e,n,i){var a=this;return e=d.aug({id:t},f,e),n=d.aug({},l,n),this._iframe=s(e,n),p[t]=this,a._waitToSwapUntilRendered||this.onResize(o(function(){a.makeVisible()})),r.write(c(i,null,this._iframe))}),t.override("onResize",function(t){this._resizeHandlers.push(t)}),t.after("styleSelf",function(){return this.updateCachedDimensions()})}},function(t,e,n){var r=n(1),i=n(118),o=n(120),s=n(22),a=n(5),u=n(121);t.exports=function(t,e,n,c,d){function f(t){var e=u(this);s.trigger(t.type,{target:e,region:t.region,type:t.type,data:t.data||{}})}function l(e){var n=u(this),r=n&&n.id,i=a.asInt(e.width),o=a.asInt(e.height);r&&void 0!==i&&void 0!==o&&t(r,i,o)}(new i).attachReceiver(new o.Receiver(r,"twttr.button")).bind("twttr.private.trigger",f).bind("twttr.private.resizeButton",l),(new i).attachReceiver(new o.Receiver(r,"twttr.embed")).bind("twttr.private.initialized",function(t){var e=u(this),n=e&&e.id,r=t.iframe_version;n&&r&&c&&c(n,r)}).bind("twttr.private.trigger",f).bind("twttr.private.results",function(){var t=u(this),n=t&&t.id;n&&e&&e(n)}).bind("twttr.private.rendered",function(){var t=u(this),e=t&&t.id;e&&n&&n(e)}).bind("twttr.private.no_results",function(){var t=u(this),e=t&&t.id;e&&d&&d(e)}).bind("twttr.private.resize",l)}},function(t,e,n){var r=n(24),i=n(119),o=n(0),s=n(6),a=n(23),u="2.0";function c(t){this.registry=t||{}}function d(t){var e,n;return e=o.isType("string",t),n=o.isType("number",t),e||n||null===t}function f(t,e){return{jsonrpc:u,id:d(t)?t:null,error:e}}c.prototype._invoke=function(t,e){var n,r,i;n=this.registry[t.method],r=t.params||[],r=o.isType("array",r)?r:[r];try{i=n.apply(e.source||null,r)}catch(t){i=s.reject(t.message)}return a.isPromise(i)?i:s.resolve(i)},c.prototype._processRequest=function(t,e){var n,r;return function(t){var e,n,r;return!!o.isObject(t)&&(e=t.jsonrpc===u,n=o.isType("string",t.method),r=!("id"in t)||d(t.id),e&&n&&r)}(t)?(n="params"in t&&(r=t.params,!o.isObject(r)||o.isType("function",r))?s.resolve(f(t.id,i.INVALID_PARAMS)):this.registry[t.method]?this._invoke(t,{source:e}).then(function(e){return n=t.id,{jsonrpc:u,id:n,result:e};var n},function(){return f(t.id,i.INTERNAL_ERROR)}):s.resolve(f(t.id,i.METHOD_NOT_FOUND)),null!=t.id?n:s.resolve()):s.resolve(f(t.id,i.INVALID_REQUEST))},c.prototype.attachReceiver=function(t){return t.attachTo(this),this},c.prototype.bind=function(t,e){return this.registry[t]=e,this},c.prototype.receive=function(t,e){var n,a,u,c=this;try{u=t,t=o.isType("string",u)?r.parse(u):u}catch(t){return s.resolve(f(null,i.PARSE_ERROR))}return e=e||null,a=((n=o.isType("array",t))?t:[t]).map(function(t){return c._processRequest(t,e)}),n?function(t){return s.all(t).then(function(t){return(t=t.filter(function(t){return void 0!==t})).length?t:void 0})}(a):a[0]},t.exports=c},function(t){t.exports={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INTERNAL_ERROR:{code:-32603,message:"Internal error"}}},function(t,e,n){var r=n(8),i=n(1),o=n(24),s=n(3),a=n(20),u=n(0),c=n(2),d=n(7),f=a.ie9();function l(t,e,n){var r;t&&t.postMessage&&(f?r=(n||"")+o.stringify(e):n?(r={})[n]=e:r=e,t.postMessage(r,"*"))}function h(t){return u.isType("string",t)?t:"JSONRPC"}function p(t,e){return e?u.isType("string",t)&&0===t.indexOf(e)?t.substring(e.length):t&&t[e]?t[e]:void 0:t}function m(t,e){var n=t.document;this.filter=h(e),this.server=null,this.isTwitterFrame=c.isTwitterURL(n.location.href),t.addEventListener("message",d(this._onMessage,this),!1)}function v(t,e){this.pending={},this.target=t,this.isTwitterHost=c.isTwitterURL(r.href),this.filter=h(e),i.addEventListener("message",d(this._onMessage,this),!1)}u.aug(m.prototype,{_onMessage:function(t){var e,n=this;this.server&&(this.isTwitterFrame&&!c.isTwitterURL(t.origin)||(e=p(t.data,this.filter))&&this.server.receive(e,t.source).then(function(e){e&&l(t.source,e,n.filter)}))},attachTo:function(t){this.server=t},detach:function(){this.server=null}}),u.aug(v.prototype,{_processResponse:function(t){var e=this.pending[t.id];e&&(e.resolve(t),delete this.pending[t.id])},_onMessage:function(t){var e;if((!this.isTwitterHost||c.isTwitterURL(t.origin))&&(e=p(t.data,this.filter))){if(u.isType("string",e))try{e=o.parse(e)}catch(t){return}(e=u.isType("array",e)?e:[e]).forEach(d(this._processResponse,this))}},send:function(t){var e=new s;return t.id?this.pending[t.id]=e:e.resolve(),l(this.target,t,this.filter),e.promise}}),t.exports={Receiver:m,Dispatcher:v,_stringifyPayload:function(t){return arguments.length>0&&(f=!!t),f}}},function(t,e,n){var r=n(4);t.exports=function(t){for(var e,n=r.getElementsByTagName("iframe"),i=0;n[i];i++)if((e=n[i]).contentWindow===t)return e}},function(t,e,n){var r=n(5),i=n(0),o=n(2),s=n(11),a=n(12)(),u=n(63),c="a.twitter-moment";t.exports=function(t){return a(t,c).map(function(t){return u(function(t){var e=s(t),n={momentId:o.momentId(t.href),chrome:t.getAttribute("data-chrome"),limit:t.getAttribute("data-limit")};return i.forIn(n,function(t,n){var i=e[t];e[t]=r.hasValue(i)?i:n}),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(3);t.exports=function(t,e){var i=new r;return n.e(3).then(function(r){var o;try{o=n(77),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0),i=n(11),o=n(12)(),s=n(64),a="a.periscope-on-air",u=/^https?:\/\/(?:www\.)?(?:periscope|pscp)\.tv\/@?([a-zA-Z0-9_]+)\/?$/i;t.exports=function(t){return o(t,a).map(function(t){return s(function(t){var e=i(t),n=t.getAttribute("href"),o=t.getAttribute("data-size"),s=u.exec(n)[1];return r.aug(e,{username:s,size:o})}(t),t.parentNode,t)})}},function(t,e,n){var r=n(3);t.exports=function(t,e){var i=new r;return n.e(4).then(function(r){var o;try{o=n(78),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(5),i=n(0),o=n(65),s=n(11),a=n(12)(),u=n(66),c=n(2),d=n(18),f="a.twitter-timeline,div.twitter-timeline,a.twitter-grid",l="Embedded Search timelines have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295.",h="You may have been affected by an update to settings in embedded timelines. See https://twittercommunity.com/t/deprecating-widget-settings/102295.",p="Embedded grids have been deprecated and will now render as timelines. Please update your embed code to use the twitter-timeline class. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.";t.exports=function(t,e){return a(t,f).map(function(t){return u(function(t){var e=s(t),n=t.getAttribute("data-show-replies"),a={isPreconfigured:!!t.getAttribute("data-widget-id"),chrome:t.getAttribute("data-chrome"),tweetLimit:t.getAttribute("data-tweet-limit")||t.getAttribute("data-limit"),ariaLive:t.getAttribute("data-aria-polite"),theme:t.getAttribute("data-theme"),borderColor:t.getAttribute("data-border-color"),showReplies:n?r.asBoolean(n):null,profileScreenName:t.getAttribute("data-screen-name"),profileUserId:t.getAttribute("data-user-id"),favoritesScreenName:t.getAttribute("data-favorites-screen-name"),favoritesUserId:t.getAttribute("data-favorites-user-id"),likesScreenName:t.getAttribute("data-likes-screen-name"),likesUserId:t.getAttribute("data-likes-user-id"),listOwnerScreenName:t.getAttribute("data-list-owner-screen-name"),listOwnerUserId:t.getAttribute("data-list-owner-id"),listId:t.getAttribute("data-list-id"),listSlug:t.getAttribute("data-list-slug"),customTimelineId:t.getAttribute("data-custom-timeline-id"),staticContent:t.getAttribute("data-static-content"),url:t.href};return a.isPreconfigured&&(c.isSearchUrl(a.url)?d.publicError(l,t):d.publicLog(h,t)),"twitter-grid"===t.className&&d.publicLog(p,t),(a=i.aug(a,e)).dataSource=o(a),a.id=a.dataSource&&a.dataSource.id,a}(t),t.parentNode,t,e)})}},function(t,e){t.exports=function(t,e,n){for(var r,i=0;i<t.length;i++)if(r=e.call(n,t[i],i,t))return r}},function(t,e,n){var r=n(31);t.exports=r.build([n(32),n(131)])},function(t,e,n){var r=n(0),i=n(130);t.exports=function(t){return"en"===t||r.contains(i,t)}},function(t,e){t.exports=["hi","zh-cn","fr","zh-tw","msa","fil","fi","sv","pl","ja","ko","de","it","pt","es","ru","id","tr","da","no","nl","hu","fa","ar","ur","he","th","cs","uk","vi","ro","bn","el","en-gb","gu","kn","mr","ta","bg","ca","hr","sr","sk"]},function(t,e,n){var r=n(2),i=n(44),o="collection:";function s(t,e){return r.collectionId(t)||e}t.exports=function(t){t.params({id:{},url:{}}),t.overrideProperty("id",{get:function(){var t=s(this.params.url,this.params.id);return o+t}}),t.before("initialize",function(){if(!s(this.params.url,this.params.id))throw new Error("one of url or id is required");i()})}},function(t,e,n){var r=n(31);t.exports=r.build([n(32),n(133)])},function(t,e,n){var r=n(2),i=n(44),o="likes:";function s(t){return r.likesScreenName(t.url)||t.screenName}t.exports=function(t){t.params({screenName:{},userId:{},url:{}}),t.overrideProperty("id",{get:function(){var t=s(this.params)||this.params.userId;return o+t}}),t.before("initialize",function(){if(!s(this.params)&&!this.params.userId)throw new Error("screen name or user id is required");i()})}},function(t,e,n){var r=n(31);t.exports=r.build([n(32),n(135)])},function(t,e,n){var r=n(2),i=n(0),o=n(27),s="list:";function a(t){var e=r.listScreenNameAndSlug(t.url)||t;return i.compact({screen_name:e.ownerScreenName,user_id:e.ownerUserId,list_slug:e.slug})}t.exports=function(t){t.params({id:{},ownerScreenName:{},ownerUserId:{},slug:{},url:{}}),t.overrideProperty("id",{get:function(){var t,e,n;return this.params.id?s+this.params.id:(e=(t=a(this.params))&&t.list_slug.replace(/-/g,"_"),n=t&&(t.screen_name||t.user_id),s+(n+":")+e)}}),t.overrideProperty("endpoint",{get:function(){var t,e=["timeline-list"];return this.params.id?e.push("list-id",this.params.id):(t=a(this.params),e.push("screen-name",t.screen_name,"slug",t.list_slug)),o.embedService(e)}}),t.before("initialize",function(){var t=a(this.params);if(i.isEmptyObject(t)&&!this.params.id)throw new Error("qualified slug or list id required")})}},function(t,e,n){var r=n(31);t.exports=r.build([n(32),n(137)])},function(t,e,n){var r=n(2),i=n(5),o=n(0),s=n(27),a="profile:";function u(t,e){return r.screenName(t)||e}t.exports=function(t){t.params({showReplies:{fallback:!1,transform:i.asBoolean},screenName:{},userId:{},url:{}}),t.overrideProperty("id",{get:function(){var t=u(this.params.url,this.params.screenName);return a+(t||this.params.userId)}}),t.overrideProperty("endpoint",{get:function(){var t=["timeline-profile"],e=u(this.params.url,this.params.screenName);return e?t.push("screen-name",e):t.push("user-id",this.params.userId),s.embedService(t)}}),t.around("queryParams",function(t){return o.aug(t(),{showReplies:this.params.showReplies?"true":"false"})}),t.before("initialize",function(){if(!u(this.params.url,this.params.screenName)&&!this.params.userId)throw new Error("screen name or user id is required")})}},function(t,e,n){var r=n(3);t.exports=function(t,e){var i=new r;return n.e(5).then(function(r){var o;try{o=n(79),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(2),o=n(0),s=n(11),a=n(12)(),u=n(67),c="blockquote.twitter-tweet, blockquote.twitter-video",d=/\btw-align-(left|right|center)\b/;t.exports=function(t,e){return a(t,c).map(function(t){return u(function(t){var e=s(t),n=t.getElementsByTagName("A"),a=n&&n[n.length-1],u=a&&i.status(a.href),c=t.getAttribute("data-conversation"),f="none"==c||"hidden"==c||r.present(t,"tw-hide-thread"),l=t.getAttribute("data-cards"),h="none"==l||"hidden"==l||r.present(t,"tw-hide-media"),p=t.getAttribute("data-media-max-width"),m=t.getAttribute("data-align")||t.getAttribute("align"),v=t.getAttribute("data-theme");return!m&&d.test(t.className)&&(m=RegExp.$1),o.aug(e,{tweetId:u,hideThread:f,hideCard:h,mediaMaxWidth:p,align:m,theme:v,id:u})}(t),t.parentNode,t,e)})}},function(t,e,n){var r=n(3);t.exports=function(t,e){var i=new r;return n.e(6).then(function(r){var o;try{o=n(80),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(10),i=n(0),o=n(11),s=n(12)(),a=n(68),u=n(5),c="a.twitter-share-button, a.twitter-mention-button, a.twitter-hashtag-button",d="twitter-hashtag-button",f="twitter-mention-button";t.exports=function(t){return s(t,c).map(function(t){return a(function(t){var e=o(t),n={screenName:t.getAttribute("data-button-screen-name"),text:t.getAttribute("data-text"),type:t.getAttribute("data-type"),size:t.getAttribute("data-size"),url:t.getAttribute("data-url"),hashtags:t.getAttribute("data-hashtags"),via:t.getAttribute("data-via"),buttonHashtag:t.getAttribute("data-button-hashtag")};return i.forIn(n,function(t,n){var r=e[t];e[t]=u.hasValue(r)?r:n}),e.screenName=e.screenName||e.screen_name,e.buttonHashtag=e.buttonHashtag||e.button_hashtag||e.hashtag,r.present(t,d)&&(e.type="hashtag"),r.present(t,f)&&(e.type="mention"),e}(t),t.parentNode,t)})}},function(t,e,n){var r=n(3);t.exports=function(t,e){var i=new r;return n.e(2).then(function(r){var o;try{o=n(81),i.resolve(new o(t,e))}catch(t){i.reject(t)}}.bind(null,n)).catch(function(t){i.reject(t)}),i.promise}},function(t,e,n){var r=n(0);t.exports=r.aug({},n(144),n(145),n(146),n(147),n(148),n(149),n(150))},function(t,e,n){var r=n(60),i=n(15)(["userId"],{},r);t.exports={createDMButton:i}},function(t,e,n){var r=n(62),i=n(15)(["screenName"],{},r);t.exports={createFollowButton:i}},function(t,e,n){var r=n(63),i=n(15)(["momentId"],{},r);t.exports={createMoment:i}},function(t,e,n){var r=n(64),i=n(15)(["username"],{},r);t.exports={createPeriscopeOnAirButton:i}},function(t,e,n){var r=n(8),i=n(18),o=n(2),s=n(0),a=n(5),u=n(65),c=n(66),d=n(15)([],{},c),f=n(6),l="Embedded grids have been deprecated. Please use twttr.widgets.createTimeline instead. More info: https://twittercommunity.com/t/update-on-the-embedded-grid-display-type/119564.",h={createTimeline:p,createGridFromCollection:function(t){var e=s.toRealArray(arguments).slice(1),n={sourceType:"collection",id:t};return e.unshift(n),i.publicLog(l),p.apply(this,e)}};function p(t){var e,n=s.toRealArray(arguments).slice(1);return a.isString(t)||a.isNumber(t)?f.reject("Embedded timelines with widget settings have been deprecated. See https://twittercommunity.com/t/deprecating-widget-settings/102295."):s.isObject(t)?(t=t||{},n.forEach(function(t){s.isType("object",t)&&function(t){t.ariaLive=t.ariaPolite}(e=t)}),e||(e={},n.push(e)),t.lang=e.lang,t.tweetLimit=e.tweetLimit,t.showReplies=e.showReplies,e.dataSource=u(t),d.apply(this,n)):f.reject("data source must be an object.")}o.isTwitterURL(r.href)&&(h.createTimelinePreview=function(t,e,n){var r={previewParams:t,useLegacyDefaults:!0,isPreviewTimeline:!0};return r.dataSource=u(r),d(e,r,n)}),t.exports=h},function(t,e,n){var r,i=n(0),o=n(67),s=n(15),a=(r=s(["tweetId"],{},o),function(){return i.toRealArray(arguments).slice(1).forEach(function(t){i.isType("object",t)&&(t.hideCard="none"==t.cards||"hidden"==t.cards,t.hideThread="none"==t.conversation||"hidden"==t.conversation)}),r.apply(this,arguments)});t.exports={createTweet:a,createTweetEmbed:a,createVideo:a}},function(t,e,n){var r=n(0),i=n(68),o=n(15),s=o(["url"],{type:"share"},i),a=o(["buttonHashtag"],{type:"hashtag"},i),u=o(["screenName"],{type:"mention"},i);function c(t){return function(){return r.toRealArray(arguments).slice(1).forEach(function(t){r.isType("object",t)&&(t.screenName=t.screenName||t.screen_name,t.buttonHashtag=t.buttonHashtag||t.button_hashtag||t.hashtag)}),t.apply(this,arguments)}}t.exports={createShareButton:c(s),createHashtagButton:c(a),createMentionButton:c(u)}},function(t,e,n){var r,i,o,s=n(4),a=n(1),u=0,c=[],d=s.createElement("a");function f(){var t,e;for(u=1,t=0,e=c.length;t<e;t++)c[t]()}/^loade|c/.test(s.readyState)&&(u=1),s.addEventListener&&s.addEventListener("DOMContentLoaded",i=function(){s.removeEventListener("DOMContentLoaded",i,!1),f()},!1),d.doScroll&&s.attachEvent("onreadystatechange",r=function(){/^c/.test(s.readyState)&&(s.detachEvent("onreadystatechange",r),f())}),o=d.doScroll?function(t){a.self!=a.top?u?t():c.push(t):function(){try{d.doScroll("left")}catch(e){return setTimeout(function(){o(t)},50)}t()}()}:function(t){u?t():c.push(t)},t.exports=o},function(t,e,n){var r=n(42),i=n(9);t.exports=function(){i.set("buildVersion",r.version)}},function(t,e,n){n(154),n(157),n(158)},function(t,e,n){var r=n(155),i=n(26),o=n(69),s=new r,a=function(t){t.widgets&&1===t.widgets.length&&(s.start(),i.emitter.unbind(i.ALL_WIDGETS_RENDER_START,a))},u=function(t){var e;t.widgets&&1===t.widgets.length&&(e=t.widgets[0],s.end(),e.dataset&&e.dataset.tweetId&&o({duration:s.duration(),namespace:{element:"tweet",action:"render"},widgetIds:[e.dataset.tweetId]})),i.emitter.unbind(i.ALL_WIDGETS_RENDER_END,u)};i.emitter.bind(i.ALL_WIDGETS_RENDER_START,a),i.emitter.bind(i.ALL_WIDGETS_RENDER_END,u)},function(t,e,n){var r=n(156);function i(){}i.prototype.start=function(){this._startTime=r()},i.prototype.end=function(){this._duration=r()-this._startTime},i.prototype.duration=function(){return this._duration},t.exports=i},function(t,e,n){var r=n(1);t.exports=function(){return r.performance&&r.performance.now?r.performance.now():Date.now()}},function(t,e,n){var r,i=n(26),o=0;function s(){r&&r.length===o&&(i.emitter.trigger(i.ALL_WIDGETS_AND_IMAGES_LOADED,r),r=null)}i.emitter.bind(i.ALL_WIDGETS_RENDER_END,function(t){r=t.widgets,s()}),t.exports={reportImagesLoadForAWidget:function(){o++,s()}}},function(t,e,n){var r=n(26),i=n(69),o=n(159),s=n(2),a=n(1),u=n(0),c=n(20),d=n(61);function f(t){return t.performance.getEntriesByType("resource").filter(function(t){return s.isTwimgURL(t.name)||s.isTwitterURL(t.name)}).reduce(function(t,e){return t[e.name]=e.duration,t},{})}r.emitter.bind(r.ALL_WIDGETS_AND_IMAGES_LOADED,function(t){var e,n,r=[];c.hasPerformanceInformation()&&(e=f(a),d.isSupported()||(r=function(t){return t.reduce(function(t,e){return u.aug(t,f(e.contentDocument.defaultView))},{})}(t)),n=u.aug({},e,r),Object.keys(o).forEach(function(t){!function(t,e,n){var r=Object.keys(t).reduce(function(e,r){return n(r)?e+t[r]:e},0);i({duration:r,namespace:{element:e,action:"resource"}})}(n,t,o[t])}))})},function(t,e,n){var r=n(2),i={all:function(){return!0},image:function(t){return r.isTwimgURL(t)},settings:function(t){return r.isSettingsURL(t)},widget_iframe:function(t){return r.isWidgetIframeURL(t)}};t.exports=i}])));</script><script>
      if (
        typeof window !== undefined &&
        typeof window.location !== undefined &&
        window.location.hostname === "gabrielecirulli.github.io"
      ) {
        if (typeof window.location.replace === "function") {
          window.location.replace("https://play2048.co/");
        } else {
          window.location = "https://play2048.co/";
        }
      }
    </script>

    <script async="">
</script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-42620757-2");
    </script>

    <style>@import url("data:text/css; charset=utf-8;base64,QGZvbnQtZmFjZSB7CiAgICBmb250LWZhbWlseTogIkNsZWFyIFNhbnMiOwogICAgc3JjOiB1cmwoIkNsZWFyU2Fucy1MaWdodC13ZWJmb250LmVvdCIpOwogICAgc3JjOiB1cmwoIkNsZWFyU2Fucy1MaWdodC13ZWJmb250LmVvdD8jaWVmaXgiKSBmb3JtYXQoImVtYmVkZGVkLW9wZW50eXBlIiksCiAgICAgICAgIHVybCgiQ2xlYXJTYW5zLUxpZ2h0LXdlYmZvbnQuc3ZnI2NsZWFyX3NhbnNfbGlnaHRyZWd1bGFyIikgZm9ybWF0KCJzdmciKSwKICAgICAgICAgdXJsKCJDbGVhclNhbnMtTGlnaHQtd2ViZm9udC53b2ZmIikgZm9ybWF0KCJ3b2ZmIik7CiAgICBmb250LXdlaWdodDogMjAwOwogICAgZm9udC1zdHlsZTogbm9ybWFsOwp9CgpAZm9udC1mYWNlIHsKICAgIGZvbnQtZmFtaWx5OiAiQ2xlYXIgU2FucyI7CiAgICBzcmM6IHVybCgiQ2xlYXJTYW5zLVJlZ3VsYXItd2ViZm9udC5lb3QiKTsKICAgIHNyYzogdXJsKCJDbGVhclNhbnMtUmVndWxhci13ZWJmb250LmVvdD8jaWVmaXgiKSBmb3JtYXQoImVtYmVkZGVkLW9wZW50eXBlIiksCiAgICAgICAgIHVybCgiQ2xlYXJTYW5zLVJlZ3VsYXItd2ViZm9udC5zdmcjY2xlYXJfc2Fuc3JlZ3VsYXIiKSBmb3JtYXQoInN2ZyIpLAogICAgICAgICB1cmwoIkNsZWFyU2Fucy1SZWd1bGFyLXdlYmZvbnQud29mZiIpIGZvcm1hdCgid29mZiIpOwogICAgZm9udC13ZWlnaHQ6IG5vcm1hbDsKICAgIGZvbnQtc3R5bGU6IG5vcm1hbDsKfQoKQGZvbnQtZmFjZSB7CiAgICBmb250LWZhbWlseTogIkNsZWFyIFNhbnMiOwogICAgc3JjOiB1cmwoIkNsZWFyU2Fucy1Cb2xkLXdlYmZvbnQuZW90Iik7CiAgICBzcmM6IHVybCgiQ2xlYXJTYW5zLUJvbGQtd2ViZm9udC5lb3Q/I2llZml4IikgZm9ybWF0KCJlbWJlZGRlZC1vcGVudHlwZSIpLAogICAgICAgICB1cmwoIkNsZWFyU2Fucy1Cb2xkLXdlYmZvbnQuc3ZnI2NsZWFyX3NhbnNib2xkIikgZm9ybWF0KCJzdmciKSwKICAgICAgICAgdXJsKCJDbGVhclNhbnMtQm9sZC13ZWJmb250LndvZmYiKSBmb3JtYXQoIndvZmYiKTsKICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICBmb250LXN0eWxlOiBub3JtYWw7Cn0KCg==");
html, body {
  margin: 0;
  padding: 0;
  background: #faf8ef;
  color: #776e65;
  font-family: "Clear Sans", "Helvetica Neue", Arial, sans-serif;
  font-size: 18px; }

body {
  margin: 80px 0; }

input {
  display: inline-block;
  background: #8f7a66;
  border-radius: 3px;
  padding: 0 20px;
  text-decoration: none;
  color: #f9f6f2;
  height: 40px;
  line-height: 42px;
  cursor: pointer;
  font: inherit;
  border: none;
  outline: none;
  box-sizing: border-box;
  font-weight: bold;
  margin: 0;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none; }
  input[type="text"], input[type="email"] {
    cursor: auto;
    background: #fcfbf9;
    font-weight: normal;
    color: #776e65;
    padding: 0 15px; }
    input[type="text"]::-webkit-input-placeholder, input[type="email"]::-webkit-input-placeholder {
      color: #9d948c; }
    input[type="text"]::-moz-placeholder, input[type="email"]::-moz-placeholder {
      color: #9d948c; }
    input[type="text"]:-ms-input-placeholder, input[type="email"]:-ms-input-placeholder {
      color: #9d948c; }

.heading:after {
  content: "";
  display: block;
  clear: both; }

h1.title {
  font-size: 80px;
  font-weight: bold;
  margin: 0;
  display: block;
  float: left; }

@-webkit-keyframes move-up {
  0% {
    top: 25px;
    opacity: 1; }

  100% {
    top: -50px;
    opacity: 0; } }
@-moz-keyframes move-up {
  0% {
    top: 25px;
    opacity: 1; }

  100% {
    top: -50px;
    opacity: 0; } }
@keyframes move-up {
  0% {
    top: 25px;
    opacity: 1; }

  100% {
    top: -50px;
    opacity: 0; } }
.scores-container {
  float: right;
  text-align: right; }

.score-container, .best-container {
  position: relative;
  display: inline-block;
  background: #bbada0;
  padding: 15px 25px;
  font-size: 25px;
  height: 25px;
  line-height: 47px;
  font-weight: bold;
  border-radius: 3px;
  color: white;
  margin-top: 8px;
  text-align: center; }
  .score-container:after, .best-container:after {
    position: absolute;
    width: 100%;
    top: 10px;
    left: 0;
    text-transform: uppercase;
    font-size: 13px;
    line-height: 13px;
    text-align: center;
    color: #eee4da; }
  .score-container .score-addition, .best-container .score-addition {
    position: absolute;
    right: 30px;
    color: red;
    font-size: 25px;
    line-height: 25px;
    font-weight: bold;
    color: rgba(119, 110, 101, 0.9);
    z-index: 100;
    -webkit-animation: move-up 600ms ease-in;
    -moz-animation: move-up 600ms ease-in;
    animation: move-up 600ms ease-in;
    -webkit-animation-fill-mode: both;
    -moz-animation-fill-mode: both;
    animation-fill-mode: both; }

.score-container:after {
  content: "Score"; }

.best-container:after {
  content: "Best"; }

p {
  margin-top: 0;
  margin-bottom: 10px;
  line-height: 1.65; }

a {
  color: #776e65;
  font-weight: bold;
  text-decoration: underline;
  cursor: pointer; }

strong.important {
  text-transform: uppercase; }

hr {
  border: none;
  border-bottom: 1px solid #d8d4d0;
  margin-top: 20px;
  margin-bottom: 30px; }

.container {
  width: 500px;
  margin: 0 auto; }

@-webkit-keyframes fade-in {
  0% {
    opacity: 0; }

  100% {
    opacity: 1; } }
@-moz-keyframes fade-in {
  0% {
    opacity: 0; }

  100% {
    opacity: 1; } }
@keyframes fade-in {
  0% {
    opacity: 0; }

  100% {
    opacity: 1; } }
@-webkit-keyframes slide-up {
  0% {
    margin-top: 32%; }

  100% {
    margin-top: 20%; } }
@-moz-keyframes slide-up {
  0% {
    margin-top: 32%; }

  100% {
    margin-top: 20%; } }
@keyframes slide-up {
  0% {
    margin-top: 32%; }

  100% {
    margin-top: 20%; } }
.game-container {
  margin-top: 40px;
  position: relative;
  padding: 15px;
  cursor: default;
  -webkit-touch-callout: none;
  -ms-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -ms-touch-action: none;
  touch-action: none;
  background: #bbada0;
  border-radius: 6px;
  width: 500px;
  height: 500px;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box; }

.game-message {
  display: none;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background: rgba(238, 228, 218, 0.73);
  z-index: 100;
  padding-top: 40px;
  text-align: center;
  -webkit-animation: fade-in 800ms ease 1200ms;
  -moz-animation: fade-in 800ms ease 1200ms;
  animation: fade-in 800ms ease 1200ms;
  -webkit-animation-fill-mode: both;
  -moz-animation-fill-mode: both;
  animation-fill-mode: both; }
  .game-message p {
    font-size: 60px;
    font-weight: bold;
    height: 60px;
    line-height: 60px;
    margin-top: 222px; }
  .game-message .lower {
    display: block;
    margin-top: 29px; }
  .game-message .mailing-list {
    margin-top: 52px; }
    .game-message .mailing-list strong {
      display: block;
      margin-bottom: 10px; }
    .game-message .mailing-list .mailing-list-email-field {
      width: 230px;
      margin-right: 5px; }
  .game-message a {
    display: inline-block;
    background: #8f7a66;
    border-radius: 3px;
    padding: 0 20px;
    text-decoration: none;
    color: #f9f6f2;
    height: 40px;
    line-height: 42px;
    cursor: pointer;
    margin-left: 9px; }
    .game-message a.keep-playing-button {
      display: none; }
  .game-message .score-sharing {
    display: inline-block;
    vertical-align: middle;
    margin-left: 10px; }
  .game-message.game-won {
    background: rgba(237, 194, 46, 0.5);
    color: #f9f6f2; }
    .game-message.game-won a.keep-playing-button {
      display: inline-block; }
  .game-message.game-won, .game-message.game-over {
    display: block; }
    .game-message.game-won p, .game-message.game-over p {
      -webkit-animation: slide-up 1.5s ease-in-out 2500ms;
      -moz-animation: slide-up 1.5s ease-in-out 2500ms;
      animation: slide-up 1.5s ease-in-out 2500ms;
      -webkit-animation-fill-mode: both;
      -moz-animation-fill-mode: both;
      animation-fill-mode: both; }
    .game-message.game-won .mailing-list, .game-message.game-over .mailing-list {
      -webkit-animation: fade-in 1.5s ease-in-out 2500ms;
      -moz-animation: fade-in 1.5s ease-in-out 2500ms;
      animation: fade-in 1.5s ease-in-out 2500ms;
      -webkit-animation-fill-mode: both;
      -moz-animation-fill-mode: both;
      animation-fill-mode: both; }

.grid-container {
  position: absolute;
  z-index: 1; }

.grid-row {
  margin-bottom: 15px; }
  .grid-row:last-child {
    margin-bottom: 0; }
  .grid-row:after {
    content: "";
    display: block;
    clear: both; }

.grid-cell {
  width: 106.25px;
  height: 106.25px;
  margin-right: 15px;
  float: left;
  border-radius: 3px;
  background: rgba(238, 228, 218, 0.35); }
  .grid-cell:last-child {
    margin-right: 0; }

.tile-container {
  position: absolute;
  z-index: 2; }

.tile, .tile .tile-inner {
  width: 107px;
  height: 107px;
  line-height: 107px; }
.tile.tile-position-1-1 {
  -webkit-transform: translate(0px, 0px);
  -moz-transform: translate(0px, 0px);
  -ms-transform: translate(0px, 0px);
  transform: translate(0px, 0px); }
.tile.tile-position-1-2 {
  -webkit-transform: translate(0px, 121px);
  -moz-transform: translate(0px, 121px);
  -ms-transform: translate(0px, 121px);
  transform: translate(0px, 121px); }
.tile.tile-position-1-3 {
  -webkit-transform: translate(0px, 242px);
  -moz-transform: translate(0px, 242px);
  -ms-transform: translate(0px, 242px);
  transform: translate(0px, 242px); }
.tile.tile-position-1-4 {
  -webkit-transform: translate(0px, 363px);
  -moz-transform: translate(0px, 363px);
  -ms-transform: translate(0px, 363px);
  transform: translate(0px, 363px); }
.tile.tile-position-2-1 {
  -webkit-transform: translate(121px, 0px);
  -moz-transform: translate(121px, 0px);
  -ms-transform: translate(121px, 0px);
  transform: translate(121px, 0px); }
.tile.tile-position-2-2 {
  -webkit-transform: translate(121px, 121px);
  -moz-transform: translate(121px, 121px);
  -ms-transform: translate(121px, 121px);
  transform: translate(121px, 121px); }
.tile.tile-position-2-3 {
  -webkit-transform: translate(121px, 242px);
  -moz-transform: translate(121px, 242px);
  -ms-transform: translate(121px, 242px);
  transform: translate(121px, 242px); }
.tile.tile-position-2-4 {
  -webkit-transform: translate(121px, 363px);
  -moz-transform: translate(121px, 363px);
  -ms-transform: translate(121px, 363px);
  transform: translate(121px, 363px); }
.tile.tile-position-3-1 {
  -webkit-transform: translate(242px, 0px);
  -moz-transform: translate(242px, 0px);
  -ms-transform: translate(242px, 0px);
  transform: translate(242px, 0px); }
.tile.tile-position-3-2 {
  -webkit-transform: translate(242px, 121px);
  -moz-transform: translate(242px, 121px);
  -ms-transform: translate(242px, 121px);
  transform: translate(242px, 121px); }
.tile.tile-position-3-3 {
  -webkit-transform: translate(242px, 242px);
  -moz-transform: translate(242px, 242px);
  -ms-transform: translate(242px, 242px);
  transform: translate(242px, 242px); }
.tile.tile-position-3-4 {
  -webkit-transform: translate(242px, 363px);
  -moz-transform: translate(242px, 363px);
  -ms-transform: translate(242px, 363px);
  transform: translate(242px, 363px); }
.tile.tile-position-4-1 {
  -webkit-transform: translate(363px, 0px);
  -moz-transform: translate(363px, 0px);
  -ms-transform: translate(363px, 0px);
  transform: translate(363px, 0px); }
.tile.tile-position-4-2 {
  -webkit-transform: translate(363px, 121px);
  -moz-transform: translate(363px, 121px);
  -ms-transform: translate(363px, 121px);
  transform: translate(363px, 121px); }
.tile.tile-position-4-3 {
  -webkit-transform: translate(363px, 242px);
  -moz-transform: translate(363px, 242px);
  -ms-transform: translate(363px, 242px);
  transform: translate(363px, 242px); }
.tile.tile-position-4-4 {
  -webkit-transform: translate(363px, 363px);
  -moz-transform: translate(363px, 363px);
  -ms-transform: translate(363px, 363px);
  transform: translate(363px, 363px); }

.tile {
  position: absolute;
  -webkit-transition: 100ms ease-in-out;
  -moz-transition: 100ms ease-in-out;
  transition: 100ms ease-in-out;
  -webkit-transition-property: -webkit-transform;
  -moz-transition-property: -moz-transform;
  transition-property: transform; }
  .tile .tile-inner {
    border-radius: 3px;
    background: #eee4da;
    text-align: center;
    font-weight: bold;
    z-index: 10;
    font-size: 55px; }
  .tile.tile-2 .tile-inner {
    background: #eee4da;
    box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0), inset 0 0 0 1px rgba(255, 255, 255, 0); }
  .tile.tile-4 .tile-inner {
    background: #ede0c8;
    box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0), inset 0 0 0 1px rgba(255, 255, 255, 0); }
  .tile.tile-8 .tile-inner {
    color: #f9f6f2;
    background: #f2b179; }
  .tile.tile-16 .tile-inner {
    color: #f9f6f2;
    background: #f59563; }
  .tile.tile-32 .tile-inner {
    color: #f9f6f2;
    background: #f67c5f; }
  .tile.tile-64 .tile-inner {
    color: #f9f6f2;
    background: #f65e3b; }
  .tile.tile-128 .tile-inner {
    color: #f9f6f2;
    background: #edcf72;
    box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0.2381), inset 0 0 0 1px rgba(255, 255, 255, 0.14286);
    font-size: 45px; }
    @media screen and (max-width: 520px) {
      .tile.tile-128 .tile-inner {
        font-size: 25px; } }
  .tile.tile-256 .tile-inner {
    color: #f9f6f2;
    background: #edcc61;
    box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0.31746), inset 0 0 0 1px rgba(255, 255, 255, 0.19048);
    font-size: 45px; }
    @media screen and (max-width: 520px) {
      .tile.tile-256 .tile-inner {
        font-size: 25px; } }
  .tile.tile-512 .tile-inner {
    color: #f9f6f2;
    background: #edc850;
    box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0.39683), inset 0 0 0 1px rgba(255, 255, 255, 0.2381);
    font-size: 45px; }
    @media screen and (max-width: 520px) {
      .tile.tile-512 .tile-inner {
        font-size: 25px; } }
  .tile.tile-1024 .tile-inner {
    color: #f9f6f2;
    background: #edc53f;
    box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0.47619), inset 0 0 0 1px rgba(255, 255, 255, 0.28571);
    font-size: 35px; }
    @media screen and (max-width: 520px) {
      .tile.tile-1024 .tile-inner {
        font-size: 15px; } }
  .tile.tile-2048 .tile-inner {
    color: #f9f6f2;
    background: #edc22e;
    box-shadow: 0 0 30px 10px rgba(243, 215, 116, 0.55556), inset 0 0 0 1px rgba(255, 255, 255, 0.33333);
    font-size: 35px; }
    @media screen and (max-width: 520px) {
      .tile.tile-2048 .tile-inner {
        font-size: 15px; } }
  .tile.tile-super .tile-inner {
    color: #f9f6f2;
    background: #3c3a32;
    font-size: 30px; }
    @media screen and (max-width: 520px) {
      .tile.tile-super .tile-inner {
        font-size: 10px; } }

@-webkit-keyframes appear {
  0% {
    opacity: 0;
    -webkit-transform: scale(0);
    -moz-transform: scale(0);
    -ms-transform: scale(0);
    transform: scale(0); }

  100% {
    opacity: 1;
    -webkit-transform: scale(1);
    -moz-transform: scale(1);
    -ms-transform: scale(1);
    transform: scale(1); } }
@-moz-keyframes appear {
  0% {
    opacity: 0;
    -webkit-transform: scale(0);
    -moz-transform: scale(0);
    -ms-transform: scale(0);
    transform: scale(0); }

  100% {
    opacity: 1;
    -webkit-transform: scale(1);
    -moz-transform: scale(1);
    -ms-transform: scale(1);
    transform: scale(1); } }
@keyframes appear {
  0% {
    opacity: 0;
    -webkit-transform: scale(0);
    -moz-transform: scale(0);
    -ms-transform: scale(0);
    transform: scale(0); }

  100% {
    opacity: 1;
    -webkit-transform: scale(1);
    -moz-transform: scale(1);
    -ms-transform: scale(1);
    transform: scale(1); } }
.tile-new .tile-inner {
  -webkit-animation: appear 200ms ease 100ms;
  -moz-animation: appear 200ms ease 100ms;
  animation: appear 200ms ease 100ms;
  -webkit-animation-fill-mode: backwards;
  -moz-animation-fill-mode: backwards;
  animation-fill-mode: backwards; }

@-webkit-keyframes pop {
  0% {
    -webkit-transform: scale(0);
    -moz-transform: scale(0);
    -ms-transform: scale(0);
    transform: scale(0); }

  50% {
    -webkit-transform: scale(1.2);
    -moz-transform: scale(1.2);
    -ms-transform: scale(1.2);
    transform: scale(1.2); }

  100% {
    -webkit-transform: scale(1);
    -moz-transform: scale(1);
    -ms-transform: scale(1);
    transform: scale(1); } }
@-moz-keyframes pop {
  0% {
    -webkit-transform: scale(0);
    -moz-transform: scale(0);
    -ms-transform: scale(0);
    transform: scale(0); }

  50% {
    -webkit-transform: scale(1.2);
    -moz-transform: scale(1.2);
    -ms-transform: scale(1.2);
    transform: scale(1.2); }

  100% {
    -webkit-transform: scale(1);
    -moz-transform: scale(1);
    -ms-transform: scale(1);
    transform: scale(1); } }
@keyframes pop {
  0% {
    -webkit-transform: scale(0);
    -moz-transform: scale(0);
    -ms-transform: scale(0);
    transform: scale(0); }

  50% {
    -webkit-transform: scale(1.2);
    -moz-transform: scale(1.2);
    -ms-transform: scale(1.2);
    transform: scale(1.2); }

  100% {
    -webkit-transform: scale(1);
    -moz-transform: scale(1);
    -ms-transform: scale(1);
    transform: scale(1); } }
.tile-merged .tile-inner {
  z-index: 20;
  -webkit-animation: pop 200ms ease 100ms;
  -moz-animation: pop 200ms ease 100ms;
  animation: pop 200ms ease 100ms;
  -webkit-animation-fill-mode: backwards;
  -moz-animation-fill-mode: backwards;
  animation-fill-mode: backwards; }

.above-game:after {
  content: "";
  display: block;
  clear: both; }

.game-intro {
  float: left;
  line-height: 42px;
  margin-bottom: 0; }

.restart-button {
  display: inline-block;
  background: #8f7a66;
  border-radius: 3px;
  padding: 0 20px;
  text-decoration: none;
  color: #f9f6f2;
  height: 40px;
  line-height: 42px;
  cursor: pointer;
  display: block;
  text-align: center;
  float: right; }

.game-explanation {
  margin-top: 30px; }

.sharing {
  margin-top: 20px;
  text-align: center; }
  .sharing > iframe, .sharing > span, .sharing > form {
    display: inline-block;
    vertical-align: middle; }

@media screen and (max-width: 520px) {
  html, body {
    font-size: 15px; }

  body {
    margin-top: 0;
    padding: 20px; }

  h1.title {
    font-size: 27px;
    margin-top: 15px; }

  .container {
    width: 280px;
    margin: 0 auto; }

  .score-container, .best-container {
    margin-top: 0;
    padding: 15px 10px;
    min-width: 40px; }

  .heading {
    margin-bottom: 10px; }

  .game-intro {
    width: 55%;
    display: block;
    box-sizing: border-box;
    line-height: 1.65; }

  .restart-button {
    width: 42%;
    padding: 0;
    display: block;
    box-sizing: border-box;
    margin-top: 2px; }

  .game-container {
    margin-top: 17px;
    position: relative;
    padding: 10px;
    cursor: default;
    -webkit-touch-callout: none;
    -ms-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -ms-touch-action: none;
    touch-action: none;
    background: #bbada0;
    border-radius: 6px;
    width: 280px;
    height: 280px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box; }

  .game-message {
    display: none;
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: rgba(238, 228, 218, 0.73);
    z-index: 100;
    padding-top: 40px;
    text-align: center;
    -webkit-animation: fade-in 800ms ease 1200ms;
    -moz-animation: fade-in 800ms ease 1200ms;
    animation: fade-in 800ms ease 1200ms;
    -webkit-animation-fill-mode: both;
    -moz-animation-fill-mode: both;
    animation-fill-mode: both; }
    .game-message p {
      font-size: 60px;
      font-weight: bold;
      height: 60px;
      line-height: 60px;
      margin-top: 222px; }
    .game-message .lower {
      display: block;
      margin-top: 29px; }
    .game-message .mailing-list {
      margin-top: 52px; }
      .game-message .mailing-list strong {
        display: block;
        margin-bottom: 10px; }
      .game-message .mailing-list .mailing-list-email-field {
        width: 230px;
        margin-right: 5px; }
    .game-message a {
      display: inline-block;
      background: #8f7a66;
      border-radius: 3px;
      padding: 0 20px;
      text-decoration: none;
      color: #f9f6f2;
      height: 40px;
      line-height: 42px;
      cursor: pointer;
      margin-left: 9px; }
      .game-message a.keep-playing-button {
        display: none; }
    .game-message .score-sharing {
      display: inline-block;
      vertical-align: middle;
      margin-left: 10px; }
    .game-message.game-won {
      background: rgba(237, 194, 46, 0.5);
      color: #f9f6f2; }
      .game-message.game-won a.keep-playing-button {
        display: inline-block; }
    .game-message.game-won, .game-message.game-over {
      display: block; }
      .game-message.game-won p, .game-message.game-over p {
        -webkit-animation: slide-up 1.5s ease-in-out 2500ms;
        -moz-animation: slide-up 1.5s ease-in-out 2500ms;
        animation: slide-up 1.5s ease-in-out 2500ms;
        -webkit-animation-fill-mode: both;
        -moz-animation-fill-mode: both;
        animation-fill-mode: both; }
      .game-message.game-won .mailing-list, .game-message.game-over .mailing-list {
        -webkit-animation: fade-in 1.5s ease-in-out 2500ms;
        -moz-animation: fade-in 1.5s ease-in-out 2500ms;
        animation: fade-in 1.5s ease-in-out 2500ms;
        -webkit-animation-fill-mode: both;
        -moz-animation-fill-mode: both;
        animation-fill-mode: both; }

  .grid-container {
    position: absolute;
    z-index: 1; }

  .grid-row {
    margin-bottom: 10px; }
    .grid-row:last-child {
      margin-bottom: 0; }
    .grid-row:after {
      content: "";
      display: block;
      clear: both; }

  .grid-cell {
    width: 57.5px;
    height: 57.5px;
    margin-right: 10px;
    float: left;
    border-radius: 3px;
    background: rgba(238, 228, 218, 0.35); }
    .grid-cell:last-child {
      margin-right: 0; }

  .tile-container {
    position: absolute;
    z-index: 2; }

  .tile, .tile .tile-inner {
    width: 58px;
    height: 58px;
    line-height: 58px; }
  .tile.tile-position-1-1 {
    -webkit-transform: translate(0px, 0px);
    -moz-transform: translate(0px, 0px);
    -ms-transform: translate(0px, 0px);
    transform: translate(0px, 0px); }
  .tile.tile-position-1-2 {
    -webkit-transform: translate(0px, 67px);
    -moz-transform: translate(0px, 67px);
    -ms-transform: translate(0px, 67px);
    transform: translate(0px, 67px); }
  .tile.tile-position-1-3 {
    -webkit-transform: translate(0px, 135px);
    -moz-transform: translate(0px, 135px);
    -ms-transform: translate(0px, 135px);
    transform: translate(0px, 135px); }
  .tile.tile-position-1-4 {
    -webkit-transform: translate(0px, 202px);
    -moz-transform: translate(0px, 202px);
    -ms-transform: translate(0px, 202px);
    transform: translate(0px, 202px); }
  .tile.tile-position-2-1 {
    -webkit-transform: translate(67px, 0px);
    -moz-transform: translate(67px, 0px);
    -ms-transform: translate(67px, 0px);
    transform: translate(67px, 0px); }
  .tile.tile-position-2-2 {
    -webkit-transform: translate(67px, 67px);
    -moz-transform: translate(67px, 67px);
    -ms-transform: translate(67px, 67px);
    transform: translate(67px, 67px); }
  .tile.tile-position-2-3 {
    -webkit-transform: translate(67px, 135px);
    -moz-transform: translate(67px, 135px);
    -ms-transform: translate(67px, 135px);
    transform: translate(67px, 135px); }
  .tile.tile-position-2-4 {
    -webkit-transform: translate(67px, 202px);
    -moz-transform: translate(67px, 202px);
    -ms-transform: translate(67px, 202px);
    transform: translate(67px, 202px); }
  .tile.tile-position-3-1 {
    -webkit-transform: translate(135px, 0px);
    -moz-transform: translate(135px, 0px);
    -ms-transform: translate(135px, 0px);
    transform: translate(135px, 0px); }
  .tile.tile-position-3-2 {
    -webkit-transform: translate(135px, 67px);
    -moz-transform: translate(135px, 67px);
    -ms-transform: translate(135px, 67px);
    transform: translate(135px, 67px); }
  .tile.tile-position-3-3 {
    -webkit-transform: translate(135px, 135px);
    -moz-transform: translate(135px, 135px);
    -ms-transform: translate(135px, 135px);
    transform: translate(135px, 135px); }
  .tile.tile-position-3-4 {
    -webkit-transform: translate(135px, 202px);
    -moz-transform: translate(135px, 202px);
    -ms-transform: translate(135px, 202px);
    transform: translate(135px, 202px); }
  .tile.tile-position-4-1 {
    -webkit-transform: translate(202px, 0px);
    -moz-transform: translate(202px, 0px);
    -ms-transform: translate(202px, 0px);
    transform: translate(202px, 0px); }
  .tile.tile-position-4-2 {
    -webkit-transform: translate(202px, 67px);
    -moz-transform: translate(202px, 67px);
    -ms-transform: translate(202px, 67px);
    transform: translate(202px, 67px); }
  .tile.tile-position-4-3 {
    -webkit-transform: translate(202px, 135px);
    -moz-transform: translate(202px, 135px);
    -ms-transform: translate(202px, 135px);
    transform: translate(202px, 135px); }
  .tile.tile-position-4-4 {
    -webkit-transform: translate(202px, 202px);
    -moz-transform: translate(202px, 202px);
    -ms-transform: translate(202px, 202px);
    transform: translate(202px, 202px); }

  .tile .tile-inner {
    font-size: 35px; }

  .game-message {
    padding-top: 0; }
    .game-message p {
      font-size: 30px !important;
      height: 30px !important;
      line-height: 30px !important;
      margin-top: 32% !important;
      margin-bottom: 0 !important; }
    .game-message .lower {
      margin-top: 10px !important; }
    .game-message.game-won .score-sharing {
      margin-top: 10px; }
    .game-message.game-over .mailing-list {
      margin-top: 25px; }
    .game-message .mailing-list {
      margin-top: 10px; }
      .game-message .mailing-list .mailing-list-email-field {
        width: 180px; }

  .sharing > iframe, .sharing > span, .sharing > form {
    display: block;
    margin: 0 auto;
    margin-bottom: 20px; } }
.pp-donate button {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  border: none;
  font: inherit;
  color: inherit;
  display: inline-block;
  background: #8f7a66;
  border-radius: 3px;
  padding: 0 20px;
  text-decoration: none;
  color: #f9f6f2;
  height: 40px;
  line-height: 42px;
  cursor: pointer; }
  .pp-donate button img {
    vertical-align: -4px;
    margin-right: 8px; }

.btc-donate {
  position: relative;
  margin-left: 10px;
  display: inline-block;
  background: #8f7a66;
  border-radius: 3px;
  padding: 0 20px;
  text-decoration: none;
  color: #f9f6f2;
  height: 40px;
  line-height: 42px;
  cursor: pointer; }
  .btc-donate img {
    vertical-align: -4px;
    margin-right: 8px; }
  .btc-donate a {
    color: #f9f6f2;
    text-decoration: none;
    font-weight: normal; }
  .btc-donate .address {
    cursor: auto;
    position: absolute;
    width: 340px;
    right: 50%;
    margin-right: -170px;
    padding-bottom: 7px;
    top: -30px;
    opacity: 0;
    pointer-events: none;
    -webkit-transition: 400ms ease;
    -moz-transition: 400ms ease;
    transition: 400ms ease;
    -webkit-transition-property: top, opacity;
    -moz-transition-property: top, opacity;
    transition-property: top, opacity; }
    .btc-donate .address:after {
      position: absolute;
      border-top: 10px solid #bbada0;
      border-right: 7px solid transparent;
      border-left: 7px solid transparent;
      content: "";
      bottom: 0px;
      left: 50%;
      margin-left: -7px; }
    .btc-donate .address code {
      background-color: #bbada0;
      padding: 10px 15px;
      width: 100%;
      border-radius: 3px;
      line-height: 1;
      font-weight: normal;
      font-size: 15px;
      font-family: Consolas, "Liberation Mono", Courier, monospace;
      text-align: center; }
  .btc-donate:hover .address, .btc-donate .address:hover .address {
    opacity: 1;
    top: -45px;
    pointer-events: auto; }
  @media screen and (max-width: 520px) {
    .btc-donate {
      width: 120px; }
      .btc-donate .address {
        margin-right: -150px;
        width: 300px; }
        .btc-donate .address code {
          font-size: 13px; }
        .btc-donate .address:after {
          left: 50%;
          bottom: 2px; } }

@-webkit-keyframes pop-in-big {
  0% {
    -webkit-transform: scale(0) translateZ(0);
    -moz-transform: scale(0) translateZ(0);
    transform: scale(0) translateZ(0);
    opacity: 0;
    margin-top: -40px; }

  100% {
    -webkit-transform: scale(1) translateZ(0);
    -moz-transform: scale(1) translateZ(0);
    transform: scale(1) translateZ(0);
    opacity: 1;
    margin-top: 30px; } }
@-moz-keyframes pop-in-big {
  0% {
    -webkit-transform: scale(0) translateZ(0);
    -moz-transform: scale(0) translateZ(0);
    transform: scale(0) translateZ(0);
    opacity: 0;
    margin-top: -40px; }

  100% {
    -webkit-transform: scale(1) translateZ(0);
    -moz-transform: scale(1) translateZ(0);
    transform: scale(1) translateZ(0);
    opacity: 1;
    margin-top: 30px; } }
@keyframes pop-in-big {
  0% {
    -webkit-transform: scale(0) translateZ(0);
    -moz-transform: scale(0) translateZ(0);
    transform: scale(0) translateZ(0);
    opacity: 0;
    margin-top: -40px; }

  100% {
    -webkit-transform: scale(1) translateZ(0);
    -moz-transform: scale(1) translateZ(0);
    transform: scale(1) translateZ(0);
    opacity: 1;
    margin-top: 30px; } }
@-webkit-keyframes pop-in-small {
  0% {
    -webkit-transform: scale(0) translateZ(0);
    -moz-transform: scale(0) translateZ(0);
    transform: scale(0) translateZ(0);
    opacity: 0;
    margin-top: -40px; }

  100% {
    -webkit-transform: scale(1) translateZ(0);
    -moz-transform: scale(1) translateZ(0);
    transform: scale(1) translateZ(0);
    opacity: 1;
    margin-top: 10px; } }
@-moz-keyframes pop-in-small {
  0% {
    -webkit-transform: scale(0) translateZ(0);
    -moz-transform: scale(0) translateZ(0);
    transform: scale(0) translateZ(0);
    opacity: 0;
    margin-top: -40px; }

  100% {
    -webkit-transform: scale(1) translateZ(0);
    -moz-transform: scale(1) translateZ(0);
    transform: scale(1) translateZ(0);
    opacity: 1;
    margin-top: 10px; } }
@keyframes pop-in-small {
  0% {
    -webkit-transform: scale(0) translateZ(0);
    -moz-transform: scale(0) translateZ(0);
    transform: scale(0) translateZ(0);
    opacity: 0;
    margin-top: -40px; }

  100% {
    -webkit-transform: scale(1) translateZ(0);
    -moz-transform: scale(1) translateZ(0);
    transform: scale(1) translateZ(0);
    opacity: 1;
    margin-top: 10px; } }
.app-notice {
  position: relative;
  -webkit-animation: pop-in-big 700ms ease 2s both;
  -moz-animation: pop-in-big 700ms ease 2s both;
  animation: pop-in-big 700ms ease 2s both;
  background: #edc53f;
  color: white;
  padding: 10px;
  margin-top: 30px;
  height: 40px;
  box-sizing: border-box;
  border-radius: 3px; }
  .app-notice:after {
    content: "";
    display: block;
    clear: both; }
  .app-notice .notice-close-button {
    float: right;
    font-weight: bold;
    cursor: pointer;
    margin-left: 10px;
    opacity: 0.7; }
  .app-notice p {
    margin-bottom: 0; }
  .app-notice, .app-notice p {
    line-height: 20px; }
  .app-notice a {
    color: white; }
  @media screen and (max-width: 520px) {
    .app-notice {
      -webkit-animation: pop-in-small 700ms ease 2s both;
      -moz-animation: pop-in-small 700ms ease 2s both;
      animation: pop-in-small 700ms ease 2s both;
      margin-top: 10px;
      height: 40px; } }

.links {
  text-align: center;
  margin-top: 20px; }

.privacy {
  word-wrap: break-word; }

/* extras */
.sidebar {
  width: 180px;
  top: 0;
  bottom: 0;
  right: 0;
  position: fixed;
  display: flex;
  align-items: center;
  justify-content: center; }

@media (max-width: 880px) {
  .sidebar,
  .sidebar .adsbygoogle {
    display: none; } }


.under-board-container {
  margin-top: 38px; }

.under-board-container,
.under-board-container .adsbygoogle {
  width: 100%;
  height: 80px;
  display: none; }

@media (max-width: 880px) {
  .under-board-container,
  .under-board-container .adsbygoogle {
    display: block; } }

.cookie-notice {
  position: fixed;
  font-size: 15px;
  z-index: 999;
  right: 20px;
  bottom: 20px;
  width: 20%;
  min-width: 460px;
  background: #e8e5db;
  padding: 10px;
  margin-top: 30px;
  box-sizing: border-box;
  border-radius: 3px;
  display: flex;
  align-items: center;
  justify-content: center; }
  @media screen and (max-width: 520px) {
    .cookie-notice {
      width: auto;
      left: 20px;
      min-width: auto; } }
  .cookie-notice, .cookie-notice p a {
    color: #a09488; }
  .cookie-notice p {
    margin-bottom: 0;
    flex: 1; }
  .cookie-notice, .cookie-notice p {
    line-height: 20px; }

.cookie-notice-dismiss-button {
  display: inline-block;
  background: #8f7a66;
  border-radius: 3px;
  padding: 0 20px;
  text-decoration: none;
  color: #f9f6f2;
  height: 40px;
  line-height: 42px;
  cursor: pointer;
  flex: 0 0 auto;
  margin-left: 20px; }
</style>
    <style>html,
body {
  box-sizing: border-box;
  min-width: 100%;
  min-height: 100%;
  height: 100%; }

body {
  margin: 0;
  padding: 15px;
  display: flex;
  cursor: default;
  -webkit-touch-callout: none;
  -ms-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -ms-touch-action: none;
  touch-action: none; }

.cookie-notice {
  display: none; }

.app-notice {
  display: none; }

.sharing {
  display: none; }

.container {
  display: flex;
  width: 100%;
  margin: none; }

.meta {
  flex: 1;
  max-width: 35%;
  display: flex;
  flex-direction: column; }

.inner {
  flex: 1;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center; }

.score-container,
.best-container {
  margin-top: 0;
  flex: 1;
  flex-shrink: 0;
  padding-left: 0;
  padding-right: 0; }

.score-container {
  margin-right: 10px; }

.heading {
  display: flex;
  flex-direction: column; }
  .heading:after {
    display: none; }

.scores-container {
  float: none;
  display: flex; }

.above-game {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  margin-top: 15px; }
  .above-game .restart-button {
    flex-shrink: 0; }
  .above-game:after {
    display: none; }

.extras {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: flex-end; }
  .extras.below-game {
    display: none;
    flex-basis: auto; }

.game-explanation {
  margin-top: 0; }

.game-intro {
  margin-top: 15px;
  flex-shrink: 0; }

.game-intro,
.game-explanation {
  line-height: 1.3; }

h1.title {
  line-height: 1;
  margin-bottom: 10px; }

.game-container {
  flex-shrink: 0;
  margin-top: 0; }

.footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 14px; }
  .footer,
  .footer p {
    line-height: 1; }
  .footer p {
    margin: 0; }

.score-sharing {
  display: none !important; }

.mailing-list {
  display: none; }

.game-message {
  padding-top: 0;
  flex-direction: column;
  align-items: center;
  justify-content: center; }
  .game-message.game-won, .game-message.game-over {
    display: flex; }
    .game-message.game-won p, .game-message.game-over p {
      margin-top: 0 !important;
      animation: none !important; }
      @media screen and (min-width: 521px) and (max-width: 852px) {
        .game-message.game-won p, .game-message.game-over p {
          font-size: 30px; } }

@media screen and (min-width: 521px) and (max-width: 1280px) {
  .tile.tile-128 .tile-inner, .tile.tile-256 .tile-inner, .tile.tile-512 .tile-inner {
    font-size: 48px; }
  .tile.tile-1024 .tile-inner, .tile.tile-2048 .tile-inner {
    font-size: 37px; }
  .tile.tile-super .tile-inner {
    font-size: 27px; }
  .game-container {
    padding: 16px;
    border-radius: 6px;
    width: 540px;
    height: 540px; }
  .grid-row {
    margin-bottom: 16px; }
  .grid-cell {
    width: 115px;
    height: 115px;
    margin-right: 16px;
    border-radius: 3px; }
  .tile,
  .tile .tile-inner {
    width: 115px;
    height: 115px;
    line-height: 115px;
    font-size: 60px; }
  .tile.tile-position-1-1 {
    -webkit-transform: translate(0px, 0px);
    -moz-transform: translate(0px, 0px);
    -ms-transform: translate(0px, 0px);
    transform: translate(0px, 0px); }
  .tile.tile-position-1-2 {
    -webkit-transform: translate(0px, 131px);
    -moz-transform: translate(0px, 131px);
    -ms-transform: translate(0px, 131px);
    transform: translate(0px, 131px); }
  .tile.tile-position-1-3 {
    -webkit-transform: translate(0px, 262px);
    -moz-transform: translate(0px, 262px);
    -ms-transform: translate(0px, 262px);
    transform: translate(0px, 262px); }
  .tile.tile-position-1-4 {
    -webkit-transform: translate(0px, 393px);
    -moz-transform: translate(0px, 393px);
    -ms-transform: translate(0px, 393px);
    transform: translate(0px, 393px); }
  .tile.tile-position-2-1 {
    -webkit-transform: translate(131px, 0px);
    -moz-transform: translate(131px, 0px);
    -ms-transform: translate(131px, 0px);
    transform: translate(131px, 0px); }
  .tile.tile-position-2-2 {
    -webkit-transform: translate(131px, 131px);
    -moz-transform: translate(131px, 131px);
    -ms-transform: translate(131px, 131px);
    transform: translate(131px, 131px); }
  .tile.tile-position-2-3 {
    -webkit-transform: translate(131px, 262px);
    -moz-transform: translate(131px, 262px);
    -ms-transform: translate(131px, 262px);
    transform: translate(131px, 262px); }
  .tile.tile-position-2-4 {
    -webkit-transform: translate(131px, 393px);
    -moz-transform: translate(131px, 393px);
    -ms-transform: translate(131px, 393px);
    transform: translate(131px, 393px); }
  .tile.tile-position-3-1 {
    -webkit-transform: translate(262px, 0px);
    -moz-transform: translate(262px, 0px);
    -ms-transform: translate(262px, 0px);
    transform: translate(262px, 0px); }
  .tile.tile-position-3-2 {
    -webkit-transform: translate(262px, 131px);
    -moz-transform: translate(262px, 131px);
    -ms-transform: translate(262px, 131px);
    transform: translate(262px, 131px); }
  .tile.tile-position-3-3 {
    -webkit-transform: translate(262px, 262px);
    -moz-transform: translate(262px, 262px);
    -ms-transform: translate(262px, 262px);
    transform: translate(262px, 262px); }
  .tile.tile-position-3-4 {
    -webkit-transform: translate(262px, 393px);
    -moz-transform: translate(262px, 393px);
    -ms-transform: translate(262px, 393px);
    transform: translate(262px, 393px); }
  .tile.tile-position-4-1 {
    -webkit-transform: translate(393px, 0px);
    -moz-transform: translate(393px, 0px);
    -ms-transform: translate(393px, 0px);
    transform: translate(393px, 0px); }
  .tile.tile-position-4-2 {
    -webkit-transform: translate(393px, 131px);
    -moz-transform: translate(393px, 131px);
    -ms-transform: translate(393px, 131px);
    transform: translate(393px, 131px); }
  .tile.tile-position-4-3 {
    -webkit-transform: translate(393px, 262px);
    -moz-transform: translate(393px, 262px);
    -ms-transform: translate(393px, 262px);
    transform: translate(393px, 262px); }
  .tile.tile-position-4-4 {
    -webkit-transform: translate(393px, 393px);
    -moz-transform: translate(393px, 393px);
    -ms-transform: translate(393px, 393px);
    transform: translate(393px, 393px); } }

@media screen and (min-width: 521px) and (max-width: 1023px) {
  .score-container,
  .best-container {
    font-size: 20px;
    line-height: 45px; }
  .tile.tile-128 .tile-inner, .tile.tile-256 .tile-inner, .tile.tile-512 .tile-inner {
    font-size: 39px; }
  .tile.tile-1024 .tile-inner, .tile.tile-2048 .tile-inner {
    font-size: 30px; }
  .tile.tile-super .tile-inner {
    font-size: 26px; }
  .game-container {
    padding: 13px;
    border-radius: 6px;
    width: 440px;
    height: 440px; }
  .grid-row {
    margin-bottom: 13px; }
  .grid-cell {
    width: 93.75px;
    height: 93.75px;
    margin-right: 13px;
    border-radius: 3px; }
  .tile,
  .tile .tile-inner {
    width: 94px;
    height: 94px;
    line-height: 94px;
    font-size: 48px; }
  .tile.tile-position-1-1 {
    -webkit-transform: translate(0px, 0px);
    -moz-transform: translate(0px, 0px);
    -ms-transform: translate(0px, 0px);
    transform: translate(0px, 0px); }
  .tile.tile-position-1-2 {
    -webkit-transform: translate(0px, 106px);
    -moz-transform: translate(0px, 106px);
    -ms-transform: translate(0px, 106px);
    transform: translate(0px, 106px); }
  .tile.tile-position-1-3 {
    -webkit-transform: translate(0px, 213px);
    -moz-transform: translate(0px, 213px);
    -ms-transform: translate(0px, 213px);
    transform: translate(0px, 213px); }
  .tile.tile-position-1-4 {
    -webkit-transform: translate(0px, 320px);
    -moz-transform: translate(0px, 320px);
    -ms-transform: translate(0px, 320px);
    transform: translate(0px, 320px); }
  .tile.tile-position-2-1 {
    -webkit-transform: translate(106px, 0px);
    -moz-transform: translate(106px, 0px);
    -ms-transform: translate(106px, 0px);
    transform: translate(106px, 0px); }
  .tile.tile-position-2-2 {
    -webkit-transform: translate(106px, 106px);
    -moz-transform: translate(106px, 106px);
    -ms-transform: translate(106px, 106px);
    transform: translate(106px, 106px); }
  .tile.tile-position-2-3 {
    -webkit-transform: translate(106px, 213px);
    -moz-transform: translate(106px, 213px);
    -ms-transform: translate(106px, 213px);
    transform: translate(106px, 213px); }
  .tile.tile-position-2-4 {
    -webkit-transform: translate(106px, 320px);
    -moz-transform: translate(106px, 320px);
    -ms-transform: translate(106px, 320px);
    transform: translate(106px, 320px); }
  .tile.tile-position-3-1 {
    -webkit-transform: translate(213px, 0px);
    -moz-transform: translate(213px, 0px);
    -ms-transform: translate(213px, 0px);
    transform: translate(213px, 0px); }
  .tile.tile-position-3-2 {
    -webkit-transform: translate(213px, 106px);
    -moz-transform: translate(213px, 106px);
    -ms-transform: translate(213px, 106px);
    transform: translate(213px, 106px); }
  .tile.tile-position-3-3 {
    -webkit-transform: translate(213px, 213px);
    -moz-transform: translate(213px, 213px);
    -ms-transform: translate(213px, 213px);
    transform: translate(213px, 213px); }
  .tile.tile-position-3-4 {
    -webkit-transform: translate(213px, 320px);
    -moz-transform: translate(213px, 320px);
    -ms-transform: translate(213px, 320px);
    transform: translate(213px, 320px); }
  .tile.tile-position-4-1 {
    -webkit-transform: translate(320px, 0px);
    -moz-transform: translate(320px, 0px);
    -ms-transform: translate(320px, 0px);
    transform: translate(320px, 0px); }
  .tile.tile-position-4-2 {
    -webkit-transform: translate(320px, 106px);
    -moz-transform: translate(320px, 106px);
    -ms-transform: translate(320px, 106px);
    transform: translate(320px, 106px); }
  .tile.tile-position-4-3 {
    -webkit-transform: translate(320px, 213px);
    -moz-transform: translate(320px, 213px);
    -ms-transform: translate(320px, 213px);
    transform: translate(320px, 213px); }
  .tile.tile-position-4-4 {
    -webkit-transform: translate(320px, 320px);
    -moz-transform: translate(320px, 320px);
    -ms-transform: translate(320px, 320px);
    transform: translate(320px, 320px); } }

@media screen and (min-width: 521px) and (max-width: 852px) {
  h1.title {
    font-size: 50px; }
  .score-container,
  .best-container {
    padding: 8px 0px;
    font-size: 15px;
    line-height: 36px; }
    .score-container:after,
    .best-container:after {
      font-size: 13px;
      top: 5px; }
  .game-intro {
    display: none; }
  .extras {
    justify-content: space-between;
    padding-top: 15px; }
  .game-explanation {
    font-size: 15px; }
  .footer p.attribution span {
    display: none; }
  .tile.tile-128 .tile-inner, .tile.tile-256 .tile-inner, .tile.tile-512 .tile-inner {
    font-size: 30px; }
  .tile.tile-1024 .tile-inner, .tile.tile-2048 .tile-inner {
    font-size: 20px; }
  .tile.tile-super .tile-inner {
    font-size: 15px; }
  .game-container {
    padding: 10px;
    border-radius: 6px;
    width: 330px;
    height: 330px; }
  .grid-row {
    margin-bottom: 10px; }
  .grid-cell {
    width: 70px;
    height: 70px;
    margin-right: 10px;
    border-radius: 3px; }
  .tile,
  .tile .tile-inner {
    width: 70px;
    height: 70px;
    line-height: 70px;
    font-size: 36px; }
  .tile.tile-position-1-1 {
    -webkit-transform: translate(0px, 0px);
    -moz-transform: translate(0px, 0px);
    -ms-transform: translate(0px, 0px);
    transform: translate(0px, 0px); }
  .tile.tile-position-1-2 {
    -webkit-transform: translate(0px, 80px);
    -moz-transform: translate(0px, 80px);
    -ms-transform: translate(0px, 80px);
    transform: translate(0px, 80px); }
  .tile.tile-position-1-3 {
    -webkit-transform: translate(0px, 160px);
    -moz-transform: translate(0px, 160px);
    -ms-transform: translate(0px, 160px);
    transform: translate(0px, 160px); }
  .tile.tile-position-1-4 {
    -webkit-transform: translate(0px, 240px);
    -moz-transform: translate(0px, 240px);
    -ms-transform: translate(0px, 240px);
    transform: translate(0px, 240px); }
  .tile.tile-position-2-1 {
    -webkit-transform: translate(80px, 0px);
    -moz-transform: translate(80px, 0px);
    -ms-transform: translate(80px, 0px);
    transform: translate(80px, 0px); }
  .tile.tile-position-2-2 {
    -webkit-transform: translate(80px, 80px);
    -moz-transform: translate(80px, 80px);
    -ms-transform: translate(80px, 80px);
    transform: translate(80px, 80px); }
  .tile.tile-position-2-3 {
    -webkit-transform: translate(80px, 160px);
    -moz-transform: translate(80px, 160px);
    -ms-transform: translate(80px, 160px);
    transform: translate(80px, 160px); }
  .tile.tile-position-2-4 {
    -webkit-transform: translate(80px, 240px);
    -moz-transform: translate(80px, 240px);
    -ms-transform: translate(80px, 240px);
    transform: translate(80px, 240px); }
  .tile.tile-position-3-1 {
    -webkit-transform: translate(160px, 0px);
    -moz-transform: translate(160px, 0px);
    -ms-transform: translate(160px, 0px);
    transform: translate(160px, 0px); }
  .tile.tile-position-3-2 {
    -webkit-transform: translate(160px, 80px);
    -moz-transform: translate(160px, 80px);
    -ms-transform: translate(160px, 80px);
    transform: translate(160px, 80px); }
  .tile.tile-position-3-3 {
    -webkit-transform: translate(160px, 160px);
    -moz-transform: translate(160px, 160px);
    -ms-transform: translate(160px, 160px);
    transform: translate(160px, 160px); }
  .tile.tile-position-3-4 {
    -webkit-transform: translate(160px, 240px);
    -moz-transform: translate(160px, 240px);
    -ms-transform: translate(160px, 240px);
    transform: translate(160px, 240px); }
  .tile.tile-position-4-1 {
    -webkit-transform: translate(240px, 0px);
    -moz-transform: translate(240px, 0px);
    -ms-transform: translate(240px, 0px);
    transform: translate(240px, 0px); }
  .tile.tile-position-4-2 {
    -webkit-transform: translate(240px, 80px);
    -moz-transform: translate(240px, 80px);
    -ms-transform: translate(240px, 80px);
    transform: translate(240px, 80px); }
  .tile.tile-position-4-3 {
    -webkit-transform: translate(240px, 160px);
    -moz-transform: translate(240px, 160px);
    -ms-transform: translate(240px, 160px);
    transform: translate(240px, 160px); }
  .tile.tile-position-4-4 {
    -webkit-transform: translate(240px, 240px);
    -moz-transform: translate(240px, 240px);
    -ms-transform: translate(240px, 240px);
    transform: translate(240px, 240px); } }

@media screen and (max-width: 520px) {
  .container {
    flex-direction: column; }
  .extras.below-game {
    display: flex;
    flex-grow: 0;
    flex-shrink: 0; }
  h1.title {
    font-size: 40px; }
  .meta {
    max-width: none;
    flex-grow: 0;
    flex-shrink: 0;
    flex-basis: auto; }
  .above-game {
    flex-grow: 0;
    flex-shrink: 0;
    flex-direction: row;
    align-items: center; }
    .above-game .game-intro {
      margin-top: 0; }
    .above-game .restart-button {
      order: 1; }
  .extras {
    display: none; } }
</style>
    <link rel="shortcut icon" href="data:image/x-icon;base64,AAABAAEAICAAAAEAIACoEAAAFgAAACgAAAAgAAAAQAAAAAEAIAAAAAAAgBAAABMLAAATCwAAAAAAAAAAAAAAAAAAAAAAAADE7E4AxOy+AMTs9ADE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz0AMTsvgDE7E0AAAAAAAAAAAAAAAAAxOyEAMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7IQAAAAAAMTsTQDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7E0AxOy+AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTsvgDE7PIAxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOzzAMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/Iszv/yLM7/8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/Iszv/yLM7/8RyO3/AMTs/wDE7P8AxOz/AMTs/5nn9////////////////////////////6rr+f8AxOz/Iszv/+77/v////////////////9E1PH/AMTs/wDE7P8AxOz/AMTs/wDE7P+Z5/f//////xHI7f8AxOz/RNTx//////////////////////+Z5/f/AMTs/wDE7P8AxOz/mef3/////////////////+77/v//////mef3/wDE7P/d9/z//////933/P/M8/v///////////8AxOz/iOP2/7vv+v+q6/n/quv5/+77/v//////u+/6/xHI7f/u+/7//////7vv+v+Z5/f///////////9E1PH/AMTs/wDE7P8AxOz/u+/6///////u+/7/Ecjt/wDE7P8AxOz/Ecjt////////////AMTs/wDE7P/u+/7//////0TU8f//////////////////////////////////////Ecjt/+77/v//////AMTs/wDE7P+77/r//////1XY8v8AxOz/AMTs/wDE7P8AxOz/quv5////////////Ecjt/wDE7P8RyO3//////+77/v8AxOz/AMTs/6rr+f//////Vdjy/6rr+f//////zPP7/xHI7f+77/r//////0TU8f8AxOz/3ff8//////+q6/n/Ztz0////////////Iszv/wDE7P8AxOz/AMTs/wDE7P8AxOz/zPP7///////d9/z/AMTs/xHI7f//////7vv+/wDE7P8AxOz/quv5//////9V2PL/AMTs/933/P//////M9Dw/5nn9///////Ecjt/wDE7P8RyO3//////////////////////2bc9P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz///////////8z0PD/Ecjt///////u+/7/AMTs/wDE7P+q6/n//////1XY8v8AxOz/Ecjt////////////u+/6//////8RyO3/AMTs/4jj9v//////7vv+/8zz+///////3ff8/wDE7P8AxOz/AMTs/xHI7f+q6/n/Vdjy/wDE7P/M8/v//////1XY8v8RyO3///////////8z0PD/Ecjt////////////M9Dw/wDE7P8AxOz/RNTx/////////////////xHI7f8AxOz/zPP7//////8z0PD/AMTs////////////Iszv/wDE7P8AxOz/Vdjy////////////////////////////Ecjt/wDE7P934PX//////////////////////7vv+v8AxOz/AMTs/wDE7P8AxOz/iOP2////////////Ecjt/wDE7P+I4/b///////////////////////////8AxOz/AMTs/wDE7P8AxOz/M9Dw/5nn9/+q6/n/mef3/xHI7f8AxOz/AMTs/wDE7P9E1PH/quv5/7vv+v9m3PT/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/Ztz0/3fg9f8RyO3/AMTs/wDE7P9V2PL/quv5/6rr+f934PX/Ecjt/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOzyAMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs8gDE7L4AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOy+AMTsTADE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7E0AAAAAAMTshADE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOyEAAAAAAAAAAAAAAAAAMTsTQDE7L4AxOzzAMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7P8AxOz/AMTs/wDE7PMAxOy+AMTsTAAAAAAAAAAAwAAAA4AAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAcAAAAM=">
    <link rel="apple-touch-icon" href="./meta/apple-touch-icon.png">
    <link rel="apple-touch-startup-image" href="./meta/apple-touch-startup-image-640x1096.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)">
    <!-- iPhone 5+ -->
    <link rel="apple-touch-startup-image" href="./meta/apple-touch-startup-image-640x920.png" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)">
    <!-- iPhone, retina -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0, maximum-scale=1, user-scalable=no, minimal-ui">
  <script type="text/javascript" crossorigin="anonymous">(()=>{"use strict";const e={ready:"pokiAppReady",failed:"pokiAppFailed",startLoading:"pokiAppStartLoading",ads:{startTimer:"pokiStartTimer",completed:"pokiAdsCompleted",error:"pokiAdsError",impression:"pokiAdsImpression",durationChange:"pokiAdsDurationChange",limit:"pokiAdsLimit",ready:"pokiAdsReady",requested:"pokiAdsRequested",prebidRequested:"pokiAdsPrebidRequested",skipped:"pokiAdsSkipped",started:"pokiAdsStarted",stopped:"pokiAdsStopped",busy:"pokiAdsBusy",loaded:"pokiAdsLoaded",position:{preroll:"PP",midroll:"PM",rewarded:"PR",display:"DP"},video:{clicked:"pokiVideoAdsClicked",firstQuartile:"pokiVideoAdsFirstQuartile",midPoint:"pokiVideoAdsMidPoint",thirdQuartile:"pokiVideoAdsThirdQuartile",error:"pokiVideoAdsError",loaderError:"pokiVideoAdsLoaderError",paused:"pokiVideoAdsPauseTriggered",resumed:"pokiVideoAdsResumedTriggered",progress:"pokiVideoAdsProgress",buffering:"pokiVideoAdsBuffering",startHouseAdFlow:"pokiVideoAdsStartHouseAdFlow"},display:{error:"pokiDisplayAdsError"},extendedVideoError:"pokiAdsExtendedVideoError",debugging:"pokiAdsDebugging"},info:{messages:{timeLimit:"The ad-request was not processed, because of a time constraint",prerollLimit:"The ad-request was cancelled, because we're not allowed to show a preroll (PokiSDK.commercialBreak before PokiSDK.gameplayStart)",disabled:"The ad-request was cancelled, because we've disabled this format for this specific configuration"}},playtest:{startVideo:"pokiPlaytestStartVideo",stopVideo:"pokiPlaytestStopVideo"},message:{event:"pokiMessageEvent",sdkDetails:"pokiMessageSdkDetails",setPokiURLParams:"pokiMessageSetPokiURLParams",sendGameScreenshot:"pokiMessageSendScreenshot",sendGameRawScreenshot:"pokiMessageSendRawScreenshot",sendUploadScreenshot:"pokiMessageSendUploadScreenshot",sendCommand:"pokiMessageSendCommand",sendInspectorEvent:"pokiMessageInspectorEvent",sendInspectorCookies:"pokiMessageSendInspectorCookies",sendInspectorConsole:"pokiMessageSendInspectorConsole",sendInspectorBadBehavior:"pokiMessageSendInspectorBadBehavior"},tracking:{custom:"pokiTrackingCustom",debugTrueInProduction:"pokiMessageDebugTrueProduction",screen:{gameplayStart:"pokiTrackingScreenGameplayStart",gameplayStop:"pokiTrackingScreenGameplayStop",gameLoadingFinished:"pokiTrackingScreenGameLoadingFinished",commercialBreak:"pokiTrackingScreenCommercialBreak",rewardedBreak:"pokiTrackingScreenRewardedBreak",firstRound:"pokiTrackingScreenFirstRound",displayAd:"pokiTrackingScreenDisplayAdRequest",destroyAd:"pokiTrackingScreenDisplayAdDestroy",playerActive:"pokiTrackingScreenPlayerActive"},playtest:{showModal:"pokiTrackingPlaytestShowModal",accepted:"pokiTrackingPlaytestAccepted",rejected:"pokiTrackingPlaytestRejected",noCanvas:"pokiTrackingPlaytestNoCanvas",notLoaded:"pokiTrackingPlaytestNotLoaded",starting:"pokiTrackingPlaytestStarting",closed:"pokiTrackingPlaytestClosed",error:"pokiTrackingPlaytestError"},sdk:{status:{initialized:"pokiTrackingSdkStatusInitialized",failed:"pokiTrackingSdkStatusFailed"}},ads:{ay:{failed:"pokiTrackingAdsAYFailed"},status:{busy:"pokiTrackingAdsStatusBusy",completed:"pokiTrackingAdsStatusCompleted",error:"pokiTrackingAdsStatusError",impression:"pokiTrackingAdsStatusImpression",limit:"pokiTrackingAdsStatusLimit",ready:"pokiTrackingAdsStatusReady",requested:"pokiTrackingAdsStatusRequested",prebidRequested:"pokiTrackingAdsStatusPrebidRequested",skipped:"pokiTrackingAdsStatusSkipped",started:"pokiTrackingAdsStatusStarted",buffering:"pokiTrackingAdsStatusBuffering"},video:{clicked:"pokiTrackingAdsVideoClicked",error:"pokiTrackingAdsVideoError",loaderError:"pokiTrackingAdsVideoLoaderError",progress:"pokiTrackingAdsVideoProgress",paused:"pokiTrackingAdsVideoPaused",resumed:"pokiTrackingAdsVideoResumed",extendedVideoError:"pokiTrackingAdsVideoExtendedVideoError"},display:{requested:"pokiTrackingScreenDisplayAdRequested",impression:"pokiTrackingScreenDisplayAdImpression",notFilled:"pokiTrackingAdsDisplayNotFilled"},rewardedWeb:{request:"pokiTrackingRewardedWebRequest",ready:"pokiTrackingRewardedWebReady",impression:"pokiTrackingRewardedWebImpression",closedGranted:"pokiTrackingRewardedWebClosedGranted",closedDeclined:"pokiTrackingRewardedWebclosedDeclined",empty:"pokiTrackingRewardedWebEmpty"},debugging:"pokiTrackingAdsDebugging",h5GamingEnabled:"pokiTrackingH5GamingEnabled"}},accounts:{openAuthPanel:"pokiAccountsOpenAuthPanel",authPanelClosed:"pokiAccountsAuthPanelClosed",getUserInfo:"pokiAccountsGetUserInfo",getUserToken:"pokiAccountsGetUserToken",userToken:"pokiAccountsUserToken",userInfo:"pokiAccountsUserInfo"}};var t=15552e3;function n(e){var t=new RegExp("".concat(e,"=([^;]+)(?:;|$)")).exec(document.cookie);return t?t[1]:""}function o(e,n,o){document.cookie="".concat(e,"=").concat(n,"; path=/; samesite=lax; max-age=").concat(Math.min(o||t,t))}function r(){for(var e=Math.floor(Date.now()/1e3),t="",n=0;n<4;n++)t=String.fromCharCode(255&e)+t,e>>=8;if(window.crypto&&crypto.getRandomValues&&Uint32Array){var o=new Uint32Array(12);crypto.getRandomValues(o);for(var r=0;r<12;r++)t+=String.fromCharCode(255&o[r])}else for(var i=0;i<12;i++)t+=String.fromCharCode(Math.floor(256*Math.random()));return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function i(e,t,n){console.error(e);var o=[{k:"where",v:t},{k:"error",v:e.name&&e.message?"".concat(e.name,": ").concat(e.message):JSON.stringify(e)}];if(void 0!==n){var r=n;"string"!=typeof e&&(r=JSON.stringify(e)),o.push({k:"extra",v:r})}!function(e,t){fetch(e,{method:"POST",headers:{"Content-Type":"text/plain"},body:t,mode:"no-cors",keepalive:!0,credentials:"omit"}).catch((function(n){console.error(n);try{var o="XMLHttpRequest"in window?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");o.open("POST",e,!0),o.setRequestHeader("Content-Type","text/plain"),o.send(t)}catch(e){}}))}("https://t.poki.io/l",JSON.stringify({c:"observer-error",ve:7,d:o}))}var a="poki_uid",s="poki_uid_new",c="poki_uid_version",d="poki_uid_ttl",l=15552e3;function u(e){if(!e)return"";try{var t=/^[a-zA-Z][a-zA-Z0-9+\-.]*:\/\//.test(e);return new URL(t?e:"https://".concat(e)).hostname||""}catch(e){return""}}function p(e){if(/^\d{1,3}(\.\d{1,3}){3}$/.test(e)||e.includes(":"))return e;if("gemini.google.com"===e)return"gemini-google";if("bard.google.com"===e)return"bard-google";if("com.google.android.googlequicksearchbox"===e)return e;var t=function(e){if(!e)return"";if(/^\d{1,3}(\.\d{1,3}){3}$/.test(e)||e.includes(":"))return e;var t=e.split(".").filter(Boolean);if(t.length<=2)return e;var n=new Set(["co.uk","gov.uk","ac.uk","sch.uk","com.au","net.au","org.au","com.br","com.mx","com.tr","com.ar","com.cn","com.hk","com.tw","com.sg","com.my","com.id","co.nz","co.in","co.kr","co.za"]),o=t.slice(-2).join("."),r=t.slice(-3).join(".");return n.has(o)?t.slice(-3).join("."):n.has(r)?t.slice(-4).join("."):o}(e);return t?t.split(".")[0]||t:e||""}function m(e,t){var n=e.getAll(t);return n&&0!==n.length?n[n.length-1]:""}window._pokiUserGlobalName=window._pokiUserGlobalName||"user";var g=new Set(["authorize.roblox.com","accounts.google.com","appleid.apple.com","idmsa.apple.com","login.microsoftonline.com","login.live.com"]),f=new Set(["doubleclick","googlesyndication","googleapis","googleadservices"]),h=new Set(["doubleclick","googlesyndication","googleapis","googleadservices","adsenseformobileapps"]),y=new Set(["google","bing","brave","yahoo","baidu","yandex","duckduckgo","aol","ask","avg","babylon","googleweblight","info","izito","msn","myway","naver","qo-search","searchencrypt","search-results","searchlock","seznam","so","sogou","startpage","startpagina","startsiden","virgilio","wp","zapmeta","100searchengines","dailysearches","easyfindanswers","ecosia","findretro","geniol","gsearch","gosearcresults","gosrch","juniorsafesearch","karmasearch","keyboardsearch","kvasir","metager","mojeek","mysearcheasy","onlineradiok","panda-search","petalsearch","presearch","qwant","rammerhead","relatedsearches","search","search-browser","searchbip","searcheira","search-io","search-load","searchmusic-online","search-redirect","searchsafe","searchsail","search-sprint","search-tab","searchspear","sosearcher","srchoffer","syndicatedsearch","trojanwall","voicecommandsearcher","web-explore","webcrawler","yellow-search","ziyuan","ziyuanm","zuiben","coccoc","zhanlian"]),w=18e5,v="poki_session";window._pokiSessionGlobalName=window._pokiSessionGlobalName||"session";var b=["poki.at","poki.be","poki.by","poki.ch","poki.cn","poki.co.id","poki.co.il","poki.com.br","poki.com","poki.cz","poki.de","poki.dk","poki.fi","poki.it","poki.jp","poki.nl","poki.pl","poki.pt","poki.se","www.trochoi.net"];function k(){try{var e=new URL(document.referrer).hostname;return b.indexOf(e)>-1?"poki":e}catch(e){}return""}function A(e,t){if(!e)return!1;if(!(e&&e.page&&e.landing_page&&e.previous_page))return!1;if(!e.tab_id)return!1;if(!e.expire||Date.now()>e.expire)return!1;if(e.expire>Date.now()+w)return!1;if(t){if(void 0!==e.referrer_domain){var n=k(),o=g.has(n);if("poki"!==n&&!o&&n!==e.referrer_domain)return!1}var r=new URLSearchParams(window.location.search);if(["gclid","msclkid","yclid","ttclid","fbclid","utm_campaign","campaign","adgroup","creative","utm_term"].some((function(e){return r.has(e)}))||"web_app_manifest"===r.get("utm_source")||"bing"===r.get("utm_source")||"cpc"===r.get("utm_medium")||"rtb-cpm"===r.get("utm_medium"))return!1}return!0}function S(){var e=null;A(window[window._pokiSessionGlobalName],!1)&&(e=window[window._pokiSessionGlobalName]);try{var t=sessionStorage.getItem(v);if(t){var n=JSON.parse(t);A(n,!0)&&(!e||n.depth>e.depth)&&(e=n)}}catch(e){try{i(e,"getSession",sessionStorage.getItem(v))}catch(t){i(e,"getSession",t)}}return e}function _(){var e=0;window[window._pokiSessionGlobalName]&&window[window._pokiSessionGlobalName].count&&(e=window[window._pokiSessionGlobalName].count);try{var t=sessionStorage.getItem(v);if(t){var o=JSON.parse(t);o&&o.count&&o.count>e&&(e=o.count)}}catch(e){try{i(e,"getPreviousSessionCount",sessionStorage.getItem(v))}catch(t){i(e,"getPreviousSessionCount",t)}}try{var r=n(v);if(r){var a=JSON.parse(r);a&&a.count&&a.count>e&&(e=a.count)}}catch(e){try{i(e,"getPreviousSessionCount",n(v))}catch(t){i(e,"getPreviousSessionCount",t)}}return e}function E(){if(window[window._pokiSessionGlobalName]&&window[window._pokiSessionGlobalName].tab_id)return window[window._pokiSessionGlobalName].tab_id;try{var e=sessionStorage.getItem(v);if(e){var t=JSON.parse(e);if(t&&t.tab_id)return t.tab_id}}catch(e){}return r()}function I(){var e=0,t=S();t&&(e=t.depth);try{var o=n(v);if(o){var r=JSON.parse(o);!A(r,!0)||t&&r.id!==t.id||(e=Math.max(e,r.depth))}}catch(e){var a=null;try{a=n(v)||null}catch(e){}i(e,"getSessionDepth",a)}return e}function T(e,t,a){var c,b=null;try{(b=S())?(b.previous_page.path=b.page.path,b.previous_page.type=b.page.type,b.previous_page.id=b.page.id,b.previous_page.start=b.page.start,b.previous_page.pageview_id=b.page.pageview_id,b.page.path=e,b.page.type=t,b.page.id=a,b.page.start=Date.now(),b.page.pageview_id=r(),b.depth=I()+1,b.expire=Date.now()+w):b=function(e,t,a){try{var s=n(v);if(s){var c=JSON.parse(s);if(A(c,!0))return c.previous_page.path=c.page.path,c.previous_page.type=c.page.type,c.previous_page.id=c.page.id,c.previous_page.start=c.page.start,c.previous_page.pageview_id=c.page.pageview_id,c.page.path=e,c.page.type=t,c.page.id=a,c.page.start=Date.now(),c.page.pageview_id=r(),c.depth=I()+1,c.expire=Date.now()+w,c.tab_id=E(),o(v,JSON.stringify(c)),c}}catch(e){var d=null;try{d=n(v)||null}catch(e){}i(e,"getSessionDepth",d)}var l=r(),b=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.search,o=void 0===n?"":n,r=t.referrer,i=void 0===r?"":r,a=new URLSearchParams(o),s=u(i),c=p(s),d=""!==i,l=a.has("tt"),w=a.has("sc"),v=m(a,"utm_source"),b=m(a,"utm_medium"),k=m(a,"utm_term"),A=m(a,"poki_source"),S=m(a,"placement"),_=m(a,"gclid"),E=m(a,"msclkid"),I=m(a,"yclid"),T=m(a,"ttclid"),P=m(a,"fbclid"),x=m(a,"adgroup"),C=m(a,"creative"),O=m(a,"network");e=c||(""===s&&""!==i?"":i);var D,L,M=!d||"poki"===e||h.has(e),B=(D=(i||"").match(/^android-app:\/\/([^/]+)/i))?D[1].toLowerCase():null,N=function(e){var t=(e||"").match(/^ios-app:\/\/([^/]+)/i);return t?t[1].toLowerCase():null}(i),R=function(e){var t=(e||"").match(/^mobileapp::\d+-([^/]+)/i);return t?t[1].toLowerCase():null}(i),j=M&&S.includes("mobileapp::")&&S.includes("mobileapp::2-")?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^mobileapp::2-([^/]+)/,n=(e||"").match(t);return n?n[1]:null}(S):null;L="chrome_extension"===v?"poki_chrome_extension":"edge_extension"===v?"poki_edge_extension":l?"tiktok":w?"snapchat":"android_app"===A?"poki_android_app":"web_app_manifest"===v?"pwa":B||N||R||(!d&&v?v:j||(M&&S?p(u(S))||S:"g"===O?"google":"ytv"===O?"youtube":d||_||E||I||T||P||x||C?!d&&_&&/^\d+$/.test(_)?"direct":""===e&&d?"unknown":e||"unknown":"direct"));var V,G=f.has(L)||!!(_||E||I||T||P||x||C)||"cpc"===b||"rtb-cpm"===b||"ppc"===b||"paid"===b,F=(s||"").toLowerCase(),U=!g.has(F)&&(y.has(L)||/^com\.google\.android\.googlequicksearchbox$/.test(F)||/^webcache\.googleusercontent\.com$/.test(F)||!!k&&"share"!==b);return V=G?"cpc":U?"organic":g.has(F)?"oauth":"pwa"===L||"poki_android_app"===L||d||"social"===b||"email"===b?"referral":L?"unknown":"direct","direct"===L&&"direct"!==V&&"unknown"!==V&&"referral"!==V&&(L="unknown"),f.has(L)&&(L="unknown"),"poki"===L&&"cpc"===V&&(L="unknown"),{source:L,medium:V}}({referrer:document.referrer,search:window.location.search}),S=b.source,T=b.medium;return{id:r(),expire:Date.now()+w,tab_id:E(),depth:1,count:_()+1,page:{path:e,type:t,id:a,start:Date.now(),pageview_id:l},previous_page:{},landing_page:{path:e,type:t,id:a,start:Date.now(),pageview_id:l},referrer_domain:k(),source:S,medium:T}}(e,t,a),b.count>1&&(c=parseInt(n(d),10)||l,o(s,"0",c),window[window._pokiUserGlobalName]&&(window[window._pokiUserGlobalName].is_new=!1));var T=JSON.stringify(b);try{sessionStorage.setItem(v,T)}catch(e){i(e,"updateSession-1")}window[window._pokiSessionGlobalName]=b;try{o(v,T)}catch(e){i(e,"updateSession-4")}}catch(e){i(e,"updateSession-2")}return b}const P=(e,t)=>{let n=!1;return Object.keys(t).forEach((o=>{t[o]===e&&(n=!0)})),n},x=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","GB","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","IS","LI","NO"];const C=(e,t)=>{if("undefined"==typeof window&&!t)return"";e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const n=new RegExp(`(?:[\\?&]|^)${e}=([^&#]*)`).exec(t||window?.location?.search||"");return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},O=()=>"undefined"!=typeof navigator&&/(?:phone|windows\s+phone|ipod|blackberry|(?:android|bb\d+|meego|silk|googlebot) .+? mobile|palm|windows\s+ce|opera mini|avantgo|mobilesafari|docomo|kaios)/i.test(navigator.userAgent),D=()=>"undefined"!=typeof navigator&&/(?:ipad|playbook|(?:android|bb\d+|meego|silk)(?! .+? mobile))/i.test(navigator.userAgent);var L;!function(e){e.ON="on",e.NOT_APPLICABLE="not_applicable",e.DISABLED="disabled",e.PBS_ONLY="pbs_only",e.DPF_ONLY="dpf_only",e.CSTS_ONLY="csts_only",e.PBS_DPF_CSTS="pbs_dpf_csts"}(L||(L={}));const M=C("referrer")||"",B=C("ccpaApplies")||"",N={bot:"1"===C("bot"),categories:C("categories")||"",device:O()?"mobile":D()?"tablet":"desktop",experiment:C("experiment")||"",forceAd:C("force_ad")||!1,isPokiIframe:(parseInt(C("site_id"),10)||0)>0,isPokiExternal:!!window.isPokiExternal,siteID:parseInt(C("site_id"),10)||3,tag:C("tag")||"",versionID:C("game_version_id"),debugMode:"true"===C("pokiDebug"),logMode:""!==C("pokiLogging"),testVideos:"true"===C("testVideos"),referrerParam:M,isPlayground:!!window.isPokiPlayground,isInspector:"inspector-uploads.poki-user-content.com"===window?.location?.host||document?.referrer?.includes("inspector.poki.dev")||"1"===C("inspector"),houseAdsOnly:!1,adOverrideMode:!1,googlePreview:!!C("google_preview"),ccpaApplies:"1"===B||"0"!==B&&void 0,country:(C("country")||"").toUpperCase(),gameID:C("game_id"),gdprApplies:(R=(C("country")||"").toUpperCase(),x.includes(R)),contentGameID:void 0,specialCondition:C("special_condition"),nonPersonalized:"y"===C("nonPersonalized"),familyFriendly:"y"===C("familyFriendly"),kioskMode:"y"===C("kioskMode")||!!window?.kioskMode,forceBidder:C("force_bidder")||"",cloudSaveGames:"y"===C("cloudsavegames"),AYMode:L.ON,forceStartAY:"y"===C("forceStartAY")};var R;const j=(e,t)=>{N[e]=t},V=N;class G{static sendMessage(t,n,o=window.parent){if(!P(t,e.message)){const t=Object.keys(e.message).map((e=>`poki.message.${e}`));throw new TypeError(`Argument 'type' must be one of ${t.join(", ")}`)}const r=n||{};V.gameID&&V.versionID&&(r.pokifordevs={game_id:V.gameID,game_version_id:V.versionID}),o?.postMessage({type:t,content:r},"*")}}class F{static debug=!1;static log=!1;static init=(e,t)=>{const{hostname:n}=window.location;void 0===e&&("test"===window?.process?.env?.NODE_ENV?(e=!1,void 0===t&&(t=!1)):"localhost"===n||"127.0.0.1"===n||"[::1]"===n||"launch.playcanvas.com"===n?(e=!0,void 0===t&&(t=!1)):(e=!1,void 0===t&&(t=!1))),V.isInspector?(e=!0,t=!0):n.endsWith(".poki-gdn.com")&&(e=!1,t=!1),V.debugMode&&(e=!0),V.logMode&&(t=!0),void 0===t&&(t=e),F.debug=e,F.log=t}}const U=e=>{let t=[];return Object.keys(e).forEach((n=>{"object"==typeof e[n]?t=t.concat(U(e[n])):t.push(e[n])})),t},K=U;class z{static listeners={};static videoDataAnnotations={};static clearEventListeners(){this.listeners={}}static removeEventListener(e,t){if(!Object.prototype.hasOwnProperty.call(this.listeners,e))return;const n=this.listeners[e].indexOf(t);-1!==n&&this.listeners[e].splice(n,1)}static addEventListener(e,t,n=!1){if(n=!!n,Object.prototype.hasOwnProperty.call(this.listeners,e)||(this.listeners[e]=[]),n){const n=o=>{this.removeEventListener.bind(this)(e,n),t(o)};this.listeners[e].push(n)}else this.listeners[e].push(t)}static dispatchEvent(e,t={}){const n=Object.keys(this.listeners);for(let o=0;o<n.length;o++){const r=n[o];if(e===r){const e=this.listeners[r];for(let n=0;n<e.length;n++)e[n]({...this.videoDataAnnotations,...t})}}}static addVideoDataAnnotations(e){this.videoDataAnnotations={...this.videoDataAnnotations,...e}}static getVideoDataAnnotations(){return this.videoDataAnnotations}static clearVideoDataAnnotations(){this.videoDataAnnotations={}}}const H=e=>{if("undefined"==typeof window||"undefined"==typeof fetch)return;const t=z.getVideoDataAnnotations();let{size:n}=e;e.event?.startsWith("video-")&&(n="640x360v");const o={...e,size:n,adBreakId:e.adBreakId||t.adBreakId,currentAdNumber:e.currentAdNumber||t.currentAdNumber,totalAdAmount:e.totalAdAmount||t.totalAdAmount,opportunity_id:e.opportunityId||t.opportunityId,ad_unit_path:e.adUnitPath||t.adUnitPath,p4d_game_id:V.gameID,p4d_version_id:V.versionID,bidder:e.bidder||t.bidder,bid:e.bid||t.bid||0,error_code:e.errorCode,creative_id:e.creativeId||t.creativeId,experiment:V.experiment};fetch("https://t.poki.io/adserver",{method:"POST",mode:"no-cors",body:JSON.stringify(o)}).catch((e=>{console.warn("%cPOKI:%c adserver error","font-weight: bold","",e)}))};const q=(()=>{let e=0;return()=>(e+=1,`u${`0000${((36*Math.random())**4|0).toString(36)}`.slice(-4)}${e}`)})();function Y(e){const t=[];for(let n=0,o=e.length;n<o;n++)t.push(e[n]);return t}function W(e){return"style"in e}const $=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===t.name||$(n,t))},J=new Set(["cx","cy","x","y","r","rx","ry","d","fill","alignment-baseline","baseline-shift","clip-rule","color-interpolation","color-interpolation-filters","color-rendering","dominant-baseline","fill-opacity","fill-rule","flood-color","flood-opacity","glyph-orientation-horizontal","glyph-orientation-vertical","lighting-color","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","vector-effect"]),Q={html:void 0,svg:void 0};function Z(e,t={}){const n=$(e,SVGElement)?"svg":"html",o=Q[n];if(o)return o;const r=t.includeStyleProperties??Y(window.getComputedStyle(document.documentElement)),i="html"===n?r.filter((e=>!J.has(e))):[...r];return Q[n]=i,i}function X(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function ee(e,t={}){return{width:t.width||function(e){const t=X(e,"border-left-width"),n=X(e,"border-right-width");return e.clientWidth+t+n}(e),height:t.height||function(e){const t=X(e,"border-top-width"),n=X(e,"border-bottom-width");return e.clientHeight+t+n}(e)}}const te=16384;function ne(e){return new Promise(((t,n)=>{const o=new Image;o.decode=()=>t(o),o.onload=()=>t(o),o.onerror=n,o.crossOrigin="anonymous",o.decoding="async",o.src=e}))}async function oe(e,t,n){const o="http://www.w3.org/2000/svg",r=document.createElementNS(o,"svg"),i=document.createElementNS(o,"foreignObject");return r.setAttribute("width",`${t}`),r.setAttribute("height",`${n}`),r.setAttribute("viewBox",`0 0 ${t} ${n}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),r.appendChild(i),i.appendChild(e),async function(e){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(e))).then(encodeURIComponent).then((e=>`data:image/svg+xml;charset=utf-8,${e}`))}(r)}function re(e,t,n,o){const r=`.${e}:${t}`,i=n.cssText?function(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}(n):function(e,t){return Z(document.documentElement,t).map((t=>`${t}: ${e.getPropertyValue(t)}${e.getPropertyPriority(t)?" !important":""};`)).join(" ")}(n,o);return document.createTextNode(`${r}{${i}}`)}function ie(e,t,n,o){const r=window.getComputedStyle(e,n),i=r.getPropertyValue("content");if(""===i||"none"===i)return;const a=q();try{t.className=`${t.className} ${a}`}catch{return}const s=document.createElement("style");s.appendChild(re(a,n,r,o)),t.appendChild(s)}const ae="application/font-woff",se="image/jpeg",ce={woff:ae,woff2:ae,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:se,jpeg:se,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function de(e){const t=function(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return ce[t]||""}function le(e){return-1!==e.search(/^(data:)/)}function ue(e,t){return`data:${t};base64,${e}`}async function pe(e,t,n){const o=await fetch(e,t);if(404===o.status)throw new Error(`Resource "${o.url}" not found`);const r=await o.blob();return new Promise(((e,t)=>{const i=new FileReader;i.onerror=t,i.onloadend=()=>{try{e(n({res:o,result:i.result}))}catch(e){t(e)}},i.readAsDataURL(r)}))}const me={};async function ge(e,t,n){const o=function(e,t,n){let o=e.replace(/\?.*/,"");return n&&(o=e),/ttf|otf|eot|woff2?/i.test(o)&&(o=o.replace(/.*\//,"")),t?`[${t}]${o}`:o}(e,t,n.includeQueryParams);if(null!=me[o])return me[o];let r;n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());try{const o=await pe(e,n.fetchRequestInit,(({res:e,result:n})=>(t||(t=e.headers.get("Content-Type")||""),function(e){return e.split(/,/)[1]}(n))));r=ue(o,t)}catch(t){r=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;t&&(o="string"==typeof t?t:t.message),o&&console.warn("%cPOKI:%c failed to fetch resource","font-weight: bold","",o)}return me[o]=r,r}async function fe(e,t){return $(e,HTMLCanvasElement)?async function(e){try{if(e.getContext("2d"))return ne(e.toDataURL())}catch{}if(0===e.width||0===e.height)return ne("data:,");const t=document.createElement("canvas").getContext("2d",{alpha:!0});t.canvas.width=e.width,t.canvas.height=e.height;const n=t.getImageData(0,0,t.canvas.width,t.canvas.height);return ne(await new Promise((o=>{try{requestAnimationFrame((()=>{const r=document.createElement("canvas").getContext("webgl2"),i=r.createTexture(),a=r.createFramebuffer();r.bindTexture(r.TEXTURE_2D,i),r.bindFramebuffer(r.FRAMEBUFFER,a),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,i,0),r.readPixels(0,0,e.width,e.height,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array(n.data.buffer)),t.putImageData(n,0,0),r.deleteTexture(i),r.deleteFramebuffer(a);const s=r.getExtension("WEBGL_lose_context");s&&s.loseContext(),o(t.canvas.toDataURL())}))}catch{o("data:,")}})))}(e):$(e,HTMLVideoElement)?async function(e,t){if(e.currentSrc){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,n?.drawImage(e,0,0,t.width,t.height),ne(t.toDataURL())}const{poster:n}=e,o=de(n);return ne(await ge(n,o,t))}(e,t):$(e,HTMLIFrameElement)?async function(e,t){try{if(e?.contentDocument?.body)return await be(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}(e,t):e.cloneNode(ye(e))}const he=e=>"SLOT"===e.tagName?.toUpperCase(),ye=e=>null!=e.tagName&&"SVG"===e.tagName.toUpperCase();function we(e,t,n){return function(e,t,n){const o=t.style;if(!o)return;const r=window.getComputedStyle(e);r.cssText?(o.cssText=r.cssText,o.transformOrigin=r.transformOrigin):Z(e,n).forEach((n=>{let i=r.getPropertyValue(n);if("font-size"===n&&i.endsWith("px")){const e=Math.floor(parseFloat(i.substring(0,i.length-2)))-.1;i=`${e}px`}$(e,HTMLIFrameElement)&&"display"===n&&"inline"===i&&(i="block"),"d"===n&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),o.setProperty(n,i,r.getPropertyPriority(n))}))}(e,t,n),$(e,HTMLElement)&&$(t,HTMLElement)&&(function(e,t){$(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),$(e,HTMLInputElement)&&t.setAttribute("value",e.value)}(e,t),function(e,t){if($(e,HTMLSelectElement)){const n=t,o=Array.from(n.children).find((t=>e.value===t.getAttribute("value")));o&&o.setAttribute("selected","")}}(e,t),function(e,t,n){ie(e,t,":before",n),ie(e,t,":after",n)}(e,t,n),n.patchScroll)?function(e,t){if(0===e.scrollTop&&0===e.scrollLeft||!t.children)return t;for(let n=0;n<t.children.length;n+=1){const o=t.children[n];if(!o.children)continue;const{transform:r}=o.style,i=new DOMMatrix(r),{a:a,b:s,c:c,d:d}=i;i.a=1,i.b=0,i.c=0,i.d=1,i.translateSelf(-e.scrollLeft,-e.scrollTop),i.a=a,i.b=s,i.c=c,i.d=d,o.style.transform=i.toString()}return t}(e,t):t}let ve=0;async function be(e,t,n){return n||!t.filter||t.filter(e)?W(e)?(ve++,ve%5==0&&await(o=0,e=>new Promise((t=>{setTimeout((()=>t(e)),o)}))),Promise.resolve(e).then((e=>fe(e,t))).then((n=>async function(e,t,n){if(ye(t))return t;let o=[];return o=he(e)&&e.assignedNodes?Y(e.assignedNodes()):$(e,HTMLIFrameElement)&&e.contentDocument?.body?Y(e.contentDocument.body.childNodes):Y(("shadowRoot"in e?e.shadowRoot??e:e).childNodes),0===o.length||$(e,HTMLVideoElement)||await o.reduce(((e,o)=>e.then((()=>be(o,n))).then((e=>{e&&t.appendChild(e)}))),Promise.resolve()),t}(e,n,t))).then((n=>we(e,n,t))).then((e=>async function(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===n.length)return e;const o={};for(let r=0;r<n.length;r++){const i=n[r].getAttribute("xlink:href");if(i){const n=e.querySelector(i),r=document.querySelector(i);n||!r||o[i]||(o[i]=await be(r,t,!0))}}const r=Object.values(o);if(r.length){const t="http://www.w3.org/1999/xhtml",n=document.createElementNS(t,"svg");n.setAttribute("xmlns",t),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const o=document.createElementNS(t,"defs");n.appendChild(o);for(let e=0;e<r.length;e++)o.appendChild(r[e]);e.appendChild(n)}return e}(e,t)))):e.cloneNode(!1):null;var o}const ke=/url\((['"]?)([^'"]+?)\1\)/g,Ae=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Se=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function _e(e,t,n,o,r){try{const i=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),o=n.createElement("base"),r=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(r),t&&(o.href=t),r.href=e,r.href}(t,n):t,a=de(t);let s;if(r){s=ue(await r(i),a)}else s=await ge(i,a,o);return e.replace(function(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}(t),`$1${s}$3`)}catch{}return e}function Ee(e){return-1!==e.search(ke)}async function Ie(e,t,n){if(!Ee(e))return e;const o=function(e,{preferredFontFormat:t}){return t?e.replace(Se,(e=>{for(;;){const[n,,o]=Ae.exec(e)||[];if(!o)return"";if(o===t)return`src: ${n};`}})):e}(e,n),r=function(e){const t=[];return e.replace(ke,((e,n,o)=>(t.push(o),e))),t.filter((e=>!le(e)))}(o);return r.reduce(((e,o)=>e.then((e=>_e(e,o,t,n)))),Promise.resolve(o))}async function Te(e,t,n){const o=t.style?.getPropertyValue(e);if(o){const r=await Ie(o,null,n);return t.style.setProperty(e,r,t.style.getPropertyPriority(e)),!0}return!1}async function Pe(e,t){W(e)&&(await async function(e,t){await Te("background",e,t)||await Te("background-image",e,t),await Te("mask",e,t)||await Te("mask-image",e,t)}(e,t),await async function(e,t){const n=$(e,HTMLImageElement),o=$(e,SVGImageElement);if((!n||le(e.src))&&(!o||le(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,i=await ge(r,de(r),t);await new Promise(((t,o)=>{e.onload=t,e.onerror=o;const r=e;r.decode&&(r.decode=t),"lazy"===r.loading&&(r.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i}))}(e,t),await async function(e,t){const n=Y(e.childNodes).map((e=>Pe(e,t)));await Promise.all(n).then((()=>e))}(e,t))}const xe={};async function Ce(e){let t=xe[e];if(null!=t)return t;const n=await fetch(e);return t={url:e,cssText:await n.text()},xe[e]=t,t}async function Oe(e,t){let{cssText:n}=e;const o=/url\(["']?([^"')]+)["']?\)/g,r=(n.match(/url\([^)]+\)/g)||[]).map((async r=>{let i=r.replace(o,"$1");return i.startsWith("https://")||(i=new URL(i,e.url).href),pe(i,t.fetchRequestInit,(({result:e})=>(n=n.replace(r,`url(${e})`),[r,e])))}));return Promise.all(r).then((()=>n))}function De(e){if(null==e)return[];const t=[];let n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const e=o.exec(n);if(null===e)break;t.push(e[0])}n=n.replace(o,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=r.exec(n);if(null===e){if(e=i.exec(n),null===e)break;r.lastIndex=i.lastIndex}else i.lastIndex=r.lastIndex;t.push(e[0])}return t}async function Le(e,t){if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");const n=Y(e.ownerDocument.styleSheets),o=await async function(e,t){const n=[],o=[];return e.forEach((n=>{if("cssRules"in n)try{Y(n.cssRules||[]).forEach(((e,r)=>{if(e instanceof CSSImportRule){let i=r+1;const a=Ce(e.href).then((e=>Oe(e,t))).then((e=>De(e).forEach((e=>{try{n.insertRule(e,e.startsWith("@import")?i+=1:n.cssRules.length)}catch(t){console.error("Error inserting rule from remote css",{rule2:e,err:t})}})))).catch((e=>{console.error("Error loading remote css",e.toString())}));o.push(a)}}))}catch(r){const i=e.find((e=>null==e.href))||document.styleSheets[0];null!=n.href&&o.push(Ce(n.href).then((e=>Oe(e,t))).then((e=>De(e).forEach((e=>{i.insertRule(e,i.cssRules.length)})))).catch((e=>{console.error("Error loading remote stylesheet",e)}))),console.error("Error inlining remote css file",r)}})),Promise.all(o).then((()=>(e.forEach((e=>{if("cssRules"in e)try{Y(e.cssRules||[]).forEach((e=>{n.push(e)}))}catch(t){console.error(`Error while reading CSS rules from ${e.href}`,t)}})),n)))}(n,t);return function(e){return e.filter((e=>e instanceof CSSFontFaceRule)).filter((e=>Ee(e.style.getPropertyValue("src"))))}(o)}async function Me(e,t){const n=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await async function(e,t){const n=await Le(e,t);return(await Promise.all(n.map((e=>{const n=e.parentStyleSheet?e.parentStyleSheet.href:null;return Ie(e.cssText,n,t)})))).join("\n")}(e,t);if(n){const t=document.createElement("style"),o=document.createTextNode(n);t.appendChild(o),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}async function Be(e,t={}){const{width:n,height:o}=ee(e,t),r=await be(e,t,!0);await Me(r,t),await Pe(r,t),function(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const o=t.style;null!=o&&Object.keys(o).forEach((e=>{n[e]=o[e]}))}(r,t);return await oe(r,n,o)}async function Ne(e,t={}){const{width:n,height:o}=ee(e,t),r=await Be(e,t),i=await ne(r),a=document.createElement("canvas"),s=a.getContext("2d"),c=window.devicePixelRatio||1,d=t.canvasWidth||n,l=t.canvasHeight||o;return a.width=d*c,a.height=l*c,t.skipAutoScale||function(e){(e.width>te||e.height>te)&&(e.width>te&&e.height>te?e.width>e.height?(e.height*=te/e.width,e.width=te):(e.width*=te/e.height,e.height=te):e.width>te?(e.height*=te/e.width,e.width=te):(e.width*=te/e.height,e.height=te))}(a),a.style.width=`${d}`,a.style.height=`${l}`,t.backgroundColor&&(s.fillStyle=t.backgroundColor,s.fillRect(0,0,a.width,a.height)),s.drawImage(i,0,0,a.width,a.height),a}async function Re(e,t={}){return(await Ne(e,t)).toDataURL()}function je(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}function Ve(e){try{const t=new WeakSet;return JSON.stringify(e,((e,n)=>{if("object"==typeof n&&null!==n){if(t.has(n))return"[Circular]";t.add(n)}return n}))}catch{try{return e.toString()}catch{return"[Object]"}}}const Ge=[],Fe=function(e){let t=!1,n=0;return o=>{if(t)return void n++;t=!0,setTimeout((()=>{t=!1}),e);const r=n;n=0,o(r)}}(100),Ue=console.error,Ke=["Audio callback had starved sending audio by"];let ze=!1;const He=Math.random().toString(36).substring(2);let qe;function Ye(){const e=window;return e.config?.unityVersion?e.config.unityVersion:e.Phaser?.VERSION?e.Phaser.VERSION:e.pc?.version?e.pc.version:e.Module?.engineVersion?e.Module.engineVersion:Wn.__godotVersion?Wn.__godotVersion:void 0}function We(e,t=!0){V.gameID&&!V.isPlayground?Fe((t=>{try{const n=e.message||Ve(e);Ge.push({n:e.name,m:n,s:JSON.stringify(e.stack)}),qe&&qe({name:e.name,message:n,stack:e.stack});const o=JSON.stringify({gid:V.gameID,vid:V.versionID,ve:7,n:e.name,m:n+(t?` (skipped ${t} errors)`:""),s:JSON.stringify(e.stack),ui:He,ev:`${Ye()}`}),r="https://t.poki.io/ge";if(navigator.sendBeacon)navigator.sendBeacon(r,o);else{const e=new XMLHttpRequest;e.open("POST",r,!0),e.send(o)}}catch(e){Ue("%cPOKI:%c failed to log error","font-weight: bold","",e)}})):t&&console.error("%cPOKI:%c game error","font-weight: bold","",e)}function $e(e){je(e.reason)?We(e.reason):We({name:"unhandledrejection",message:JSON.stringify(e.reason)||Ve(e)})}function Je(e){je(e.error)?We(e.error):We(e)}function Qe(){if(V.gameID&&!V.isPlayground&&!V.isPokiExternal&&V.isPokiIframe&&!ze){ze=!0,window.addEventListener("unhandledrejection",$e),window.addEventListener("error",Je);try{console.error=(...e)=>{const t=Ve(e);Ke.some((e=>t.includes(e)))||We({name:"console.error",message:t},!1),Ue.apply(console,e)}}catch{}}}"undefined"!=typeof window&&Qe();const Ze="pokiSdkContainer";async function Xe(e,t={},n=5e3){const o=new AbortController,{signal:r}=o,i={...t,signal:r};let a=null;const s=new Promise(((e,t)=>{a=setTimeout((()=>{o.abort(),t(new DOMException(`Signal timed out after ${n}ms`,"AbortError"))}),n)}));try{const t=await Promise.race([fetch(e,i),s]);return a&&clearTimeout(a),t}catch(t){throw a&&clearTimeout(a),t instanceof Error&&"AbortError"===t.name?(console.error(`%cPOKI:%c fetchWithTimeout: Fetch aborted for ${e}. Error: ${t.message}`),t):t instanceof Error?(console.error(`%cPOKI:%c fetchWithTimeout: Fetch error for ${e}:`,t.message),t):(console.error(`%cPOKI:%c fetchWithTimeout: An unexpected error occurred for ${e}:`,t),new Error("An unexpected fetch error occurred."))}}const et=async e=>{const{screenshot:t}=e,n=await Xe("https://api.poki.io/screenshot",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:t,p4d_game_id:V.gameID,p4d_version_id:V.versionID})},3e4);try{if(200===n.status){return"https://poki-user-content.com/"+(await n.json()).source}}catch{}return null},tt=async()=>{const e=e=>!["VIDEO","TEXTAREA","SCRIPT","NOSCRIPT","INPUT","IFRAME"].includes(e.nodeName)&&(!("IMG"===e.nodeName&&!e.getAttribute("src"))&&!e.classList?.contains(Ze)),t=document.body.style.minWidth,n=document.body.style.minHeight;document.body.style.minWidth="100%",document.body.style.minHeight="100%";let o=await Re(document.body,{filter:e,width:window.innerWidth,height:window.innerHeight,backgroundColor:"#fff"});if(o&&o.length<10){const t=document.body.style.position;document.body.style.position="fixed",o=await Re(document.body,{filter:e,width:window.innerWidth,height:window.innerHeight,backgroundColor:"#fff"}),document.body.style.position=t}return document.body.style.minWidth=t,document.body.style.minHeight=n,o},nt=async(e=null)=>{let t=await tt();if(t&&t.length>10){e&&(t=await(async(e,t)=>{const{title:n,thumbnail:o}=t,r=new Image;r.crossOrigin="Anonymous";const i=new Promise((e=>{r.onload=()=>e(r)}));r.src=e;const a=new Image;a.crossOrigin="Anonymous";const s=new Promise((e=>{a.onload=()=>e(a)}));a.src="https://a.poki-cdn.com/images/screenshot-frame.png";const c=new Image;c.crossOrigin="Anonymous";const d=new Promise((e=>{c.onload=()=>e(c)}));c.src=`https://img.poki-cdn.com/cdn-cgi/image/quality=78,width=128,height=128,fit=cover,f=auto/${o}`;const l=new FontFace("TorusBold","url(https://a.poki-cdn.com/fonts/torus-bold-latin.woff2)").load(),[u,p,m,g]=await Promise.all([i,s,d,l]),f=document.createElement("canvas");f.width=u.width,f.height=u.height;const h=f.getContext("2d");h.drawImage(u,0,0);const y=f.width/p.width,w=p.height*y,v=f.height-w;h.drawImage(p,0,v,f.width,w);const b=m.height*y;((e,t,n,o,r,i,a)=>{e.save(),e.beginPath();const s=n+r,c=o+i;e.moveTo(n+a,o),e.lineTo(s-a,o),e.quadraticCurveTo(s,o,s,o+a),e.lineTo(s,c-a),e.quadraticCurveTo(s,c,s-a,c),e.lineTo(n+a,c),e.quadraticCurveTo(n,c,n,c-a),e.lineTo(n,o+a),e.quadraticCurveTo(n,o,n+a,o),e.closePath(),e.clip(),e.drawImage(t,n,o,r,i),e.restore()})(h,m,64*y,v+20*y,b,b,24*y);const{fonts:k}=document;k.add(g);const A=226*y,S=v+68*y;return h.textAlign="left",h.textBaseline="top",h.fillStyle="#002b50",h.font=`700 ${56*y}px TorusBold,sans-serif`,h.fillText(n,A,S),f.toDataURL()})(t,e));return await et({screenshot:t})}return null};const ot="MacIntel"===window.navigator.platform&&void 0!==window.navigator.standalone&&navigator.maxTouchPoints>1,rt=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);const it=O()||D()||ot;let at=!1;const st=new Image;st.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAADE2lDQ1BJQ0MgcHJvZmlsZQAAeNp9kk9s21Qcxz+2X92qCh4qYRqoqnIAKqoNma6gbkAhadI/tOuyJB1t4IDrOHUSx7ZsZyw9IuAIk+AAJ1BXCQ4cOMDWgZDQDttlEoi/EkIc0DQuO1ExTYIqHOKsOfEu7/s++r7v7/d+eiB2DN93BNB0o6Awn0mtrZdTg38i8TAjPMghwwz9dD6/DNDb+5YEd35GAvjhmOH7zpWvPt3rnJoYe2f/8/GxV3N3+f81XLFCE/gX5C9NP4hA2QXyr0V+BGIISAZr62UQo0Bys6t1ILnR1VkgGZQKsyDWgJRpGxUQ54GjG318s083nZYZ9zAGJIJWYRXQQDofNopLsX7LNHJF4H6Q3rOtxWVAgLTjR5lC7PmkGsytxp5Ldmuhl3OtFi2WYv1jw1sqAMMg/WGGs+XeXXdj5TSQAOl2q7GajvndipXN9TyBV4g9srpll14CVJBHwnPFHDAC8pEte3Yl5hN148V87NctZz6uKz/rR/nT9+o6K8vAYZDnrPDgjZFdWuhq+ZUoKPXuOtXa3GKcec4OFgqxft138su9TCPIzQNJkN+23NVil8vbFSO7FOd8JkbFjHhOTIuMmBEvkKVGiI+DRZ08Bi4RBg4OxsCtge85hYdLjQiPoO9k0SJgiRp1LBy2pDMUMbGxCGjifZG8uvNTYnfoekSRBvUuF0kxLdLiefGMeEqcIE2VmvwQBvX3vfbJszYZajhUCGlwk4BmdaZ98qytX9cv6lf0X/Tb+o7yobKr3FC+Vi6TwcKK/fdqa0PaMS2tTWhJbVAb1R4lR4MAA5cVbtImIuIOZQxCHDxcdUodV6fUx0mp42pWPaE+qT7dNxuDNkUa3CKgCX1/VwIS8ayngFFm8fBpE1BjE5uIFGn8eMYpFnExeYKjpJhEZ5Lja+vlVDdu7wwSIB2+ccC8bZj+G5QLB2zjA7j8Jhz59YA98hEcegMufesbgQGAAsjVKvz1Mdy3Dg98B8Mvh9Xjk93uExkY+L3T2XsMBt+F/Qudzj/bnc7+RVB+g2/c/wD2jOYIAU+O+QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAQpSURBVHjapFZLLFx9FD9z74x2COod72eQUCLSSGhrPOoRFhY23xcaYtdWx6O0lSbNJxQpY6ZtpG2w6aIWFgRhiIVHLBoiLLxJBB2PIMSMx2B6zr+9k2lSH6Mnubn/3HPv75zzO68rSklJKQoPD1fs7u6CwWCAs7MzEIlExvv5+Tl7TufT09PfdPSc9CR6vR54ngd+YWFhxMrK6lZgYKBaq9UaPza9kwjgpjoSQU86juOAx/PLxcXFu9bW1qd+fn5DBwcHfw0ox8tyfn4+3tLSUu/v7z+k0+n+CvA5AdJD9DQBPT1B0GFTT80B5PAsIWVcXBxT9PT0vJmYmHjh5OQE1xEC5MlKU1MTtLa2sofd3d1Vk5OT1wJlScHLIicnB+Lj45nrg4ODFH6ira2tztvbe4Q4NYfDMgJMS0uDoKAgFvrx8TEMDw8DJuqBjY2NlkAPDw+vxqHol0YsFhvdrqqqguLiYnZWq9Vvp6ennzk4OFwpZPFFitraWmakpqaGEvWWnMDiV+zs7FyalAuluroaioqKhOzXzczMFF/mKXdZCHV1dcbwe3t7a+fm5uT/B8pdhRcKv6CgQCgp5ezsbAGBCgkxG5Ckvr4eCgsL2bmvr68eh0r+nzzlzClahUIBcrlc8PQdltVTe3v73zzlzO0EpVIJZWVlAqeqpaWlJ6aectfp18rKSmhoaBDq9D2CPrazs2Oeii/7mKY01SMNX+qWlZUV2NzcBBx1gF0E+/v7BPohNjZWjFNKJaZO+VO2BNne3obk5GRYX1/Xb2xsSC56b2BgQImGpRd6mJeXB1lZWay3iSMcaQxMKpVuHx0d6XASLXt6eq7iLllFL1fRO42Hh8eeEVBYNjQYSktLobm5Gdra2piH7e3tgIOXNT/2eTb2dndXVxckJSXByckJ0Nnd3R0QEHiM+BWGLFGpVGBhYQGRkZFnHR0dLFnEGYWL1mFtbQ3GxsaIT9uKioqvBI4UgEajgeXlZXB1dWW8klUt0djS0mJITEzU0UTCLaiJiIhQ0xmtGkhwJRDR7GpsbJRRcvAbyM/PBy8vL2a4pKSEVin/HN+/QdMa0y9BS98x5HsxMTHv+vv7X+N0EaWmpoKvry84OjpSQdPwvY27/DNFEBAQwAAp20QbhVyKBymFiB98y8jIuB8VFbVKSxvJd8a+vYOh6mUyGd/Z2Qmjo6OwtbXlhpwthYWFTe7t7TFKcAX/nIf4F8DA0tPTW3De/Yt8GMgaJSchIeE/9OjR+Pi4JDg42FgBPj4+A7gevru4uBj/LJydnRmPRP5NtP6xvLz8H+KSwCg5tEcwlE38VWkQgHBFDGVnZydlZmbK3Nzc+smoRCJh7wuVIs7NzX2IJfEFC5d1A2WPSoE2A/3vREdHv5+amgoPCQn5FBoa+oWooMzSu6blJsgPAQYACgtfMJolu7EAAAAASUVORK5CYII=",st.onload=()=>{at=!0};class ct{image=null;ready=!1;drawSize=0;previousMouseDown=!1;#e=20;#t=60;#n=100;#o=40;#r=2;constructor(e){this.image=new Image,this.image.src=e,this.image.onload=()=>{this.ready=!0}}update(e){e&&!this.previousMouseDown&&(this.drawSize+=this.#e,this.drawSize=Math.min(Math.max(this.drawSize,this.#t),this.#n)),this.drawSize-=this.#r,this.drawSize=e?Math.max(this.drawSize,this.#o):Math.max(this.drawSize,0),this.previousMouseDown=e}draw(e,t,n){const o=this.drawSize/2,r=t-o,i=n-o;e.drawImage(this.image,0,0,this.image.width,this.image.height,r,i,this.drawSize,this.drawSize)}destroy(){this.image=null,this.ready=!1}}const dt=new ct("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAtCAYAAADV2ImkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAArGSURBVHgBvVlbbFxHGZ451z273rXXsWt7k5RESpwoJqQpqdI2hTiNeQDaB0COoAIkHgolECQuEpc+eA0SD6ihBKrmIU+FloK3SJFIoWpDurmASy5qIbEJJaI0TryRb3vzXs5lZpg5O7N79vTs2gkVRxrP8dkzM9988/3/P/MfCN6HixACxwGA6fFxaXB2AGYTGRgfGCCJTIak6e/DY2N4jL4GISTgf7wguMPLBTk+rloj39srK+TDsqrvkSD4kARAlyTBGHsHYVKg1bsIo+sEgb+Zjnk69NpT6bGxMftOwd8uYDg6OiGte2Rdf2zLzq+rmv7VkAI7dRkAnSJVaJFpjxDWOsYUEqLFocVEAFRpMR0yYznOmepy/kfvHD14LZVKodsCsNoXk8mkZO38Yq/Wn0jquv5EhwpAWAHAoGBDtGgcsMTBuoABB0xvLFpMWioOAGValmkxbfRCaak0/pOPxa6tlvFVAR4dHZW3fOdX3zI07cmYBjujFGwHBRumdYiC1ChglQGGNcCssNEJqRXGsM0BM5ZLTq0ULQAKJpkplys/3jH78rEDBw6wObYFLq+AFY4mk9rWL/z0F7Gw/v3eEAytCQHQrQMQp6VTqxXGdkSpMS5Yd5mn9zpfAVYb/H+2GkxC7qrIsBMo6iMzxqa7doTzr50/fx7dMcMHJ6b6ezZseSluyHsYyC4OMMLlwICotAdVrmlXsCs6xi7NVBagJgvBNJMFY5rJokBZztGyWAUga5LL5euXR5769I550ILplgx//NAhffPw5891h+VdvQYAPXqNWQY6ptZYDQewyKShcj2L2r3nE2OyYc9lLiGhe9mdKOxD4Z4HNtrSr996K+2sGvBwMqk8+JkfHuky1E/2UgkIGXTREuXLz5aXgW3Sr0fHopa55xC1EgBWGCq7MJDu1u55oGertP7VS5dO4BUBM2/QP/Ltx2ORcJKB7WaAuV5jQgqcVTG4cGWilribgJ7/pdqjOpveNl4ZMR04UNklDW0v7V+vTKbT6SZpSH7A5d1f2xwNh5+Mc8NiEohyw3KXXeHG4mERegYVF/QVwbbCQbJVMbiBshWLcfvo4mNGdPUHc9tG72rLMIteZ7Pqkbih7OkJNQAzZusS4Iyy5YewMePV+EfxjggsQRMl9WADdWB0Rfete/iVdPo5HMjwd19ZGDQ09TGmU1Ei3BsIrfo1J4Bwh9A8OAgA7fEmjC3GuM7dYJgbc5TXRkj9SnnnQBPLdYZZcOjf/9jPug15O9Nt3OMNDG5cXgmIpfaChh6g0PM88PL2ARvtGLuI8mkTHh2VCHp4vXpKaLnOcGRoSA2p8kfrzt/HrOwDKwZYiVHiK8A3QcmjaTegcFfJXCbDoemhJ2ZnQUi0cwEz7fbu/+awpkjrhCGISCTACqtuB84Lxg/MvyLiR2EHwuUJ0AKHocJY52e/MSyau4BpDJc0Rd/nuivJEwA8EQy2AbaaXUugnnkteXy3CDgMeIgTF1LVe9kusQ44Hh+hgOXtutTQapMMQINdYWBwFYDagfdKRLDslYcqN4DLurYHgJRcB2xZGVmSpbvr4RQ2bxWF028FFraZAPG1IZ42TX1AT1AB3INwPJKifDA+NKQIwLAUpr9BuF4WeuKmKGbNem9lUN77dtolvucAtJ64N6TzQ0Gnc92oMUwNDkQ7DLp/hjExQxjQcdAgQfekRd3Kvb1nHNh8X6ulKI4xsQLocqlAIonO60voj0ABdStDCvLDrdqRoPehry17IefucyBVAqRGF2cPC6wl9rzkB+kH1I61Vs/aaZk9E3voZsPERTleI9WVxI3LGYIIKSB+pMEcuDjigIBBVvIK7TTvBS2eYX5D+NiYRzy28ScI3SyULPck4jKsrzUItsyr7EebnwzYy8g361ZAVgIV9E5QMHHDMmicThx+gLVtdCPqQHfxXYaL9i3HqZYnTX66tXkRcd0rj1aurRW4VvJo0jRp7CNEaoDxyQrDhBxryrYlTPMZhDFMPrJxIzaXly9XnVr+wEaN8xebsVgiQIINxg+ulYG289WINFICgjA3j0FLeSn35677hhymBlfIV65cwfN/+O3ZKiIFdkCs8KQHA25zHQWdv4MMDwYw6H/WBJo0ki0if8HGrojioNm5l58/t2bpPDUzUrO8kZER3KWp1Uoh/8syT3SwRlVcWxaHNJaLkGbWWmnar9GgwFI3cB9YttIlm+Oomn9VwnZlamobqTNM98L4JlxrLr155liRJzlYA3EcdyWCm0G3c2sk4N4vF+zVqwDryQq5iRaKIf/23w+jxWV7aGjUbeoCZsiHOqfR8tU3b5XzhefzVu1l0bDMDUB4EOxjO4jdoPv6JDyuU2zUKx6i2NgFNn5x+bhz5dy/jIc2WzRmNACzPijlCKugeuPsH58uWKSYt2tJDgG6ghryEKD9xuVn2c+0mCTyMGsKCXBm2biMsEIFZUrvTB2WOsLl7MmTdROqnzhSqQO4e3O36czM3MgvLjyTM2kmxuKN+azLvHObH2H8bo+A1qHXm2dzSLMEirx/NibLArE6v3DrmcKFU/+UF5FNM5z1Q2jTqfkTu3eTTNkG5uULU/qmnX1QD233bobYwFLAqYPwP36JEM/yuwHBA9bkXsCbrlriKaulbO6F2d8ffTrioOLc3EVreno6GHA6/ToY2nAawA6dZKcuToa37dpDZCUBAxgTGhQ+2vvMGwAcn8uyUEOvQqtsJZcoqwsMbMW+OvObZ7/s2FK+uICqqdSzTclBX+ZnHExNvY5PXPwTcYhBUG7+jDQwuJemj3oIbA0Ke4Ah3ABqc6AmB1oVYBH3ABYHW60xu1iqXpw7ffxLShXMgUKuPDgIbH/mJ9AzTUxMyJOTQFuQ342qNo4PfOrxsc7u+Ofco7/G8wbisKo0En1iww89Pgx5tO5Pahc8oPNUBjd/d2y8RJxc3FxTymbjJrWr96Re5RaAwRtvvESyloZVrOH8Py5Mgrs+sOBoka0OkKLu8nIGhbsTcd/yhlSnsfxMq0WnIYGsWZPBYoUUc/PzR/59/OhhyVYLSlguL9/qDwTbkmFxDQ8nlegg0DpoigCqSiR+z0ODXVvvPRSJRh+N8sRgmKda6+cv2JyBr8sDNyYh/G0pl31x8dyrP89nrmWIHSo5EakEbqyzJiZGcatPCG0Bs50cTQHILMlCd/whyTHCCFpGdNv9m2Lb7z8YNoz7dFUeMDzfOLzZSKZ1sVW0kPAMpFjJzr84/5dTz+HZ/8zZGFUcKJcH+8wKfZ0GiCRuh6ktYHGxFOzs7ICsKI5ekfOGBSxdMWXdArLat//RB8Nr+ncrhrFFUZS1sqr2Q0nqcAFjvEwwKdpm9W2rlL9YzeamF0+fmEQEm1CRLGsZmdFeuarkuqqJRAatBHbVgNlVYzsl9/ffUkpGRSPzuZDd2aE4FlEMIqsEO7Ij0f21ItOUgUwwYlxbQCUAOxg6qgYwItDBFWRLKrSUSJ+F52bsDRv2OsnkPnFWWPFaNWAPcjiaSknxk1kqgIyapXkZQ8UKMVSZFCzXiE2JSPQrA7AUh4QwBYojGMo2QpJlR0zgZBPAAXQrkEqNUkZv7wPj7QOu46ZeezwppdNAGhychYnECLw0O+0mO7oqkVq/ffTbCJKx4yjYNK/gRCLhWj5den8E//9fLKHI2Gd6Z4U+ce8BK+y39+n6L5YV4ArrvzyVAAAAAElFTkSuQmCC"),lt=new ct("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADBSURBVHgBvdZdEcIwDAfwZAqQgAQs4AAHIAEHzAlSWgfMARZAQUjZ9rDbR5M22f+uzdaX30OvaREUIaIDlxuPVCMiRrAOIw+a5zngrsiYlwmWQWwwIVKHKZEyrBDRYZWIDDNCtjFjZBlzQsaEZCB/HLm+wTfnhqcT+OfawD75Jijy+IBvuv/M+3Qnv4QJyQst2Wf1LFli2e5ggYn7XQ2m7uAlWPGdpMGqb1kJZvZuaN2RDBakCIIi1Hf6y/DbaR6QP+1P5pe98AyNAAAAAElFTkSuQmCC");function ut(e,t,n,o,r,i){if(!at||!i||!st)return;const a=Math.max(o,r);if(function(e,t,n,o,r,i){[dt,lt].forEach((a=>{if(!a.ready||!i)return;const s=a===dt?t:n;a.update(s);const c=e.x*o,d=e.y*r;a.draw(i,c,d)}))}(e,t,n,o,r,i),!it){const t=.5*a;i.drawImage(st,0,0,st.width,st.height,e.x*o,e.y*r,st.width*t,st.height*t)}}const pt="Game tab in background";let mt=!0,gt=[],ft=null,ht=document.createElement("canvas"),yt=null,wt=null,vt=null,bt=0,kt=[],At=[],St=[],_t=[],Et=24;(O()||D()||ot)&&(Et=12),ht.setAttribute("data-poki-no-playtest","true"),ht.addEventListener("webglcontextlost",(()=>{console.info("%cPOKI_PLAYTEST:%c streamCanvas context lost","font-weight: bold",""),ht=document.createElement("canvas"),yt=null}));const It={x:0,y:0};let Tt=!1,Pt=!1,xt=!1,Ct=!1,Ot="",Dt=1,Lt=1,Mt=-1,Bt=-1;function Nt(e){if(null===ft||!gt.length)return;const t=gt[0],n=t.width/ft.width,o=t.height/ft.height,r=(e.clientX-ft.left)*n,i=(e.clientY-ft.top)*o;It.x=Math.max(0,Math.min(r,t.width)),It.y=Math.max(0,Math.min(i,t.height))}const Rt=e=>{gt.length&&ht&&Nt(e)},jt=e=>{gt.length&&ht&&(0===e.button?(Tt=!0,Pt=!1):2===e.button?(xt=!0,Ct=!1):1===e.button&&(Tt=!0,Pt=!1,xt=!0,Ct=!1),Nt(e))},Vt=e=>{0===e.button?Pt=!0:2===e.button?Ct=!0:1===e.button&&(Pt=!0,Ct=!0)};function Gt(){const e=Ot;e&&ht&&yt&&(yt.fillStyle="rgba(255, 255, 255, 0.5)",yt.fillRect(0,0,ht.width,ht.height),yt.font="48px Arial",yt.fillStyle="#009cff",yt.textAlign="center",yt.fillText(e,ht.width/2,ht.height/2))}function Ft(e){if(!ht||!gt.length)return;const t=gt[0],n=t.width,o=t.height;if(n===Mt&&o===Bt&&!e)return;Mt=n,Bt=o,ft=t.getBoundingClientRect();let{width:r,height:i}=ft;0!==r&&0!==i||(r=n,i=o);const a=O()||D(),s=ot?1024:a?640:1280,c=Math.min(s/r,s/i,1);r=Math.round(r*c),i=Math.round(i*c),Dt=r/n,Lt=i/o;e||ht.width!==r||ht.height!==i?(ht.width=r,ht.height=i,console.info(`%cPOKI_PLAYTEST:%c capturing at ${r}x${i} (${n}x${o})`,"font-weight: bold","")):console.info(`%cPOKI_PLAYTEST:%c resize but video unchanged ${r}x${i} (${n}x${o})`,"font-weight: bold","")}function Ut(e){let t=null;for(let n=0;n<e.length;n++)if(!document.body.contains(e[n])){if(e[n].pokiHtmlDummyCanvas)continue;if(t||(t=document.getElementsByTagName("flt-glass-pane")),t){let o=!1;for(let r=0;r<t.length;r++)t[r].shadowRoot?.contains(e[n])&&(o=!0);if(o)continue}return!1}return!0}async function Kt(e){if(ht&&(wt||(wt=document.createElement("canvas"),0===gt.length?(wt.width=ht.width,wt.height=ht.height):(wt.width=gt[0].width,wt.height=gt[0].height),wt.addEventListener("contextlost",(()=>{wt=null,vt=null}))),vt||(vt=wt.getContext("2d"),vt)))try{performance.now();const t=await(async e=>{const t=["VIDEO","TEXTAREA","SCRIPT","NOSCRIPT","INPUT","IFRAME"];e||t.push("CANVAS");const n=e=>!(t.includes(e.nodeName)||"IMG"===e.nodeName&&!e.getAttribute("src")||e.classList?.contains(Ze)||"true"===e.getAttribute?.("data-poki-playtest-skip")),o=document.body.style.minWidth,r=document.body.style.minHeight,i=document.body.style.backgroundColor;let a;document.body.style.minWidth="100%",document.body.style.minHeight="100%",e||(document.body.style.backgroundColor="transparent");try{a=await Be(document.body,{filter:n,width:window.innerWidth,height:window.innerHeight})}catch(e){console.warn("%cPOKI:%c failed to generate svg","font-weight: bold","",e)}return document.body.style.minWidth=o,document.body.style.minHeight=r,document.body.style.backgroundColor=i,a})(e);if(t&&t.length>10){const e=await new Promise(((e,n)=>{const o=new Image;o.decode=()=>e(o),o.onload=()=>e(o),o.onerror=n,o.crossOrigin="anonymous",o.decoding="async",o.src=t}));requestAnimationFrame((()=>{wt&&vt&&(vt.clearRect(0,0,wt.width,wt.height),vt.drawImage(e,0,0,e.width,e.height,0,0,wt.width,wt.height),bt=0)}))}}catch(e){console.warn("%cPOKI_PLAYTEST:%c ui canvas error","font-weight: bold","",e.name,e.message,e.stack),bt++,(Wn.__playtestCaptureHTML===zn||Wn.__playtestCaptureHTML===Kn)&&bt>10&&(mt=!0)}}function zt(e){Ot=e}async function Ht(e){if(!mt){gt=e;for(let e=0;e<kt.length;e++)kt[e].stop();for(let e=0;e<At.length;e++)At[e].readable.cancel();for(let e=0;e<St.length;e++)St[e].cancel();for(let e=0;e<_t.length;e++)_t[e].close();kt=[],At=[],St=[],_t=[];try{if(rt)for(let e=0;e<gt.length;e++){if(gt[e].pokiHtmlDummyCanvas)continue;const t=gt[e].captureStream(Et).getVideoTracks()[0];kt.push(t),_t.push(null);const n=new Blob(["self.onmessage=(async({data:{track:e}})=>{if(!e)return;const a=new MediaStreamTrackProcessor({track:e}).readable.getReader(),s=()=>{a.read().then(({done:e,value:a})=>{e?a.close():(postMessage(a),a.close(),s())})};s()});"],{type:"application/javascript"}),o=new Worker(URL.createObjectURL(n));o.onmessage=({data:t})=>{_t.length<=e||(null!==_t[e]&&_t[e].close(),_t[e]=t)};try{o.postMessage({track:t})}catch(e){console.warn("%cPOKI_PLAYTEST:%c worker error","font-weight: bold","",e),mt=!0}}else for(let e=0;e<gt.length;e++){if(gt[e].pokiHtmlDummyCanvas)continue;const t=gt[e].captureStream(Et).getVideoTracks()[0],n=new window.MediaStreamTrackProcessor(t),o=n.readable.getReader();kt.push(t),At.push(n),St.push(o),_t.push(null);const r=()=>{o.read().then((({done:t,value:n})=>{t?mt=!0:_t.length<=e?n.close():(null!==_t[e]&&_t[e].close(),_t[e]=n,r())}))};r()}Ft(!0)}catch(e){console.warn("%cPOKI_PLAYTEST:%c setPlaytestSoureCanvasses error","font-weight: bold","",e),mt=!0}}}function qt(){const{__playtestCanvas:e}=Wn;if(e?.length&&Ut(e))return e;if(Wn.__playtestCaptureHTML===Kn){const e=document.createElement("canvas");return e.width=window.innerWidth,e.height=window.innerHeight,e.setAttribute("data-poki-html-canvas","true"),e.pokiHtmlDummyCanvas=!0,[e]}let t=0,n=Array.from(document.getElementsByTagName("canvas"));if(0===n.length){const e=document.getElementsByTagName("flt-glass-pane");for(let t=0;t<e.length;t++){const{shadowRoot:o}=e[t];o&&(n=n.concat(Array.from(o.querySelectorAll("canvas"))))}}let o=[];if(n.forEach((e=>{if("true"===e.getAttribute("data-poki-no-playtest"))return;const n=getComputedStyle(e),{width:r,height:i}=n,a=parseInt(r,10)*parseInt(i,10);a>=t&&function(e){if(!e)return!1;let t=e,n=!0;for(;t&&t!==document.body;){const e=window.getComputedStyle(t);if("none"===e.display)return!1;if("hidden"===e.visibility)return!1;if(n&&(0===t.offsetWidth||0===t.offsetHeight))return!1;"absolute"===e.position&&(n=!1),t=t.parentElement}const o=e.getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth;return!(o.right<0||o.bottom<0||o.left>i||o.top>r)}(e)&&(a>t&&(o=[]),o.push({canvas:e,style:n,index:o.length}),t=a)})),0===o.length){if(Wn.__playtestCaptureHTML===zn){const e=document.createElement("canvas");return e.width=window.innerWidth,e.height=window.innerHeight,e.setAttribute("data-poki-html-canvas","true"),e.pokiHtmlDummyCanvas=!0,[e]}return[]}return o.sort(((e,t)=>{const n=parseInt(e.style.zIndex,10)||0,o=parseInt(t.style.zIndex,10)||0;return n<o?-1:n>o?1:e.index-t.index})),o.map((e=>e.canvas))}function Yt(e,t){if(!ht)return null;mt=!1,Ht(e),Ft(!0);const n=ht.captureStream(Et);let o;window.addEventListener("pointermove",Rt,{capture:!0,passive:!0}),window.addEventListener("pointerdown",jt,{capture:!0,passive:!0}),window.addEventListener("pointerup",Vt,{capture:!0,passive:!0}),window.addEventListener("contextmenu",Vt,{capture:!0,passive:!0});let r,i=0,a=null;if(Wn.__playtestCaptureHTML===zn||Wn.__playtestCaptureHTML===Kn){let e=0;o=setInterval((()=>{if(!ht)return;const t=!!gt[0].pokiHtmlDummyCanvas;!t||gt[0].width===window.innerWidth&&gt[0].height===window.innerHeight||(gt[0].width=window.innerWidth,gt[0].height=window.innerHeight);let n=!1;if(t&&document.getElementsByTagName("canvas").length>0&&(n=!0),!n){const t=function(e){const t=3&e.length,n=e.length-t,o=3432918353,r=461845907;let i=0,a=0,s=0;for(;s<n;)a=255&e.charCodeAt(s)|(255&e.charCodeAt(++s))<<8|(255&e.charCodeAt(++s))<<16|(255&e.charCodeAt(++s))<<24,++s,a=(65535&a)*o+(((a>>>16)*o&65535)<<16)&4294967295,a=a<<15|a>>>17,a=(65535&a)*r+(((a>>>16)*r&65535)<<16)&4294967295,i^=a,i=i<<13|i>>>19,i=5*i+3864292196&4294967295;switch(a=0,t){case 3:a^=(255&e.charCodeAt(s+2))<<16;case 2:a^=(255&e.charCodeAt(s+1))<<8;case 1:a^=255&e.charCodeAt(s),a=(65535&a)*o+(((a>>>16)*o&65535)<<16)&4294967295,a=a<<15|a>>>17,a=(65535&a)*r+(((a>>>16)*r&65535)<<16)&4294967295,i^=a}return i^=e.length,i^=i>>>16,i=2246822507*(65535&i)+((2246822507*(i>>>16)&65535)<<16)&4294967295,i^=i>>>13,i=3266489909*(65535&i)+((3266489909*(i>>>16)&65535)<<16)&4294967295,i^=i>>>16,i>>>0}(document.body.innerHTML);e!==t&&(e=t,n=!0)}n&&Kt(t)}),1e3)}return r=setInterval((()=>{if(mt||!ht||!gt.length||i>10)return console.info("%cPOKI_PLAYTEST:%c","font-weight: bold","",mt?"stopped":"crashed",mt,!ht,!gt.length,i),window.removeEventListener("pointermove",Rt),window.removeEventListener("pointerdown",jt),window.removeEventListener("pointerup",Vt),window.removeEventListener("contextmenu",Vt),clearInterval(o),Wn.__playtestCaptureHTML="",ht=null,yt=null,wt=null,vt=null,Ht([]),dt.destroy(),lt.destroy(),clearInterval(r),a&&clearTimeout(a),void t();if(Ut(gt)){if(!yt&&(yt=ht.getContext("2d"),!yt))return console.info("%cPOKI_PLAYTEST:%c streamCanvas context creation failed","font-weight: bold",""),void i++;i=0,Ft(!1),Wn.__playtestCaptureHTML===Un?(Wn.__playtestCaptureHTML="",Kt(!1)):Wn.__playtestCaptureHTML===Hn&&(Wn.__playtestCaptureHTML="",wt=null,vt=null),yt.clearRect(0,0,ht.width,ht.height);for(let e=0;e<_t.length;e++){const t=_t[e];null!==t&&yt.drawImage(t,0,0,t.displayWidth,t.displayHeight,0,0,ht.width,ht.height)}wt&&yt.drawImage(wt,0,0,wt.width,wt.height,0,0,ht.width,ht.height),ut(It,Tt,xt,Dt,Lt,yt),Tt&&Pt&&(Tt=!1,Pt=!1),xt&&Ct&&(xt=!1,Ct=!1),Gt()}else{console.info("%cPOKI_PLAYTEST:%c source canvasses not in DOM","font-weight: bold","");const e=qt();e.length?Ht(e):(console.info("%cPOKI_PLAYTEST:%c no source canvasses found","font-weight: bold",""),i++)}}),1e3/Et),window.addEventListener("visibilitychange",(()=>{console.info("%cPOKI_PLAYTEST:%c visibility change","font-weight: bold","",document.visibilityState),a&&clearTimeout(a),"visible"===document.visibilityState?Ot===pt&&(Ot=""):(Ot=pt,Gt(),a=setTimeout((()=>{mt=!0}),6e4))})),window.addEventListener("resize",(()=>{console.info("%cPOKI_PLAYTEST:%c resize","font-weight: bold","",window.innerWidth,window.innerHeight)})),window.addEventListener("orientationchange",(e=>{console.info("%cPOKI_PLAYTEST:%c orientationchange","font-weight: bold","",e?.target?.screen?.orientation?.type)})),window.screen.orientation.addEventListener("change",(e=>{console.info("%cPOKI_PLAYTEST:%c orientation change","font-weight: bold","",e.target?.type)})),n}function Wt(){const e=document.getElementById("poki-playtest-popup-reject"),t=document.getElementById("poki-playtest-popup-resolve");e?.removeEventListener("pointerdown",Wt),t?.removeEventListener("pointerdown",Wt),document.getElementById("poki-playtest-popup-wrapper")?.remove(),document.getElementById("poki-playtest-template-markup")?.remove(),document.getElementById("poki-playtest-template-style")?.remove()}function $t(e){e.stopImmediatePropagation()}function Jt({gameTitle:e,rejectCallback:t,resolveCallback:n}){const o=document.body;!function(e){const t=document.createElement("template");t.innerHTML='\n\t<template id="poki-playtest-template-markup">\n\t\t<div class="poki-playtest-popup-scope-reset poki-playtest-popup-wrapper" id="poki-playtest-popup-wrapper">\n\t\t\t<div class="poki-playtest-popup-scope-reset poki-playtest-popup">\n\t\t\t\t<header class="poki-playtest-popup-scope-reset poki-playtest-popup__header">\n\t\t\t\t\t<img class="poki-playtest-popup-scope-reset poki-playtest-popup__header__img" width="36" height="36" src="https://a.poki-cdn.com/playtest/playtest-icon.svg" alt="Lab icon">\n\t\t\t\t\t<h2 class="poki-playtest-popup-scope-reset poki-playtest-popup__header__title">Hey there, adventurer</h2>\n\t\t\t\t</header>\n\n\t\t\t\t<div class="poki-playtest-popup-scope-reset poki-playtest-popup__content">\n\t\t\t\t\t<p>You found a mystery game and have been selected to test it out! When you join the playtest, we&apos;ll record your gameplay to see all the fun (and maybe some goofy) moments you encounter. This helps the developer figure out what rocks and what needs a little extra magic in their game. Don&apos;t worry, your gameplay recording will be deleted after 365 days.</p>\n\t\t\t\t\t<p>And hey, if you&apos;re not feeling it, no biggie - you can refuse the playtest and still play the game just like normal. For more information, please read our <a href="https://a.poki-cdn.com/playtest/2025.07.31_Poki_Playtest_Privacy_Statement.pdf" download="2025-07-31 Poki Playtest Privacy Statement.pdf" target="_blank">Privacy Statement Playtest</a>.</p>\n\t\t\t\t\t<h3>Do you consent to join the playtest of <span id="poki-playtest-popup-game-title">%GAME_TITLE%</span>?</h3>\n\t\t\t\t\t<p><small>Please note that this game has been uploaded independently by this game&apos;s developer and has not yet been verified by the Poki team. If you run into any trouble, contact us at <strong><a href="mailto:hello@poki.com">hello@poki.com</a></strong></small></p>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="poki-playtest-popup-scope-reset poki-playtest-popup__actions">\n\t\t\t\t\t<button type="button" id="poki-playtest-popup-reject" class="poki-playtest-popup-scope-reset poki-playtest-popup__button">No, thanks</button>\n\t\t\t\t\t<button type="button" id="poki-playtest-popup-resolve" class="poki-playtest-popup-scope-reset poki-playtest-popup__button">Yes, let\'s go</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</template>\n',e.appendChild(t.content);const n=document.createElement("style");n.innerHTML='\n\t.poki-playtest-popup {\n\t\tall: unset;\n\n\t\t& *,\n\t\t& *::before,\n\t\t& *::after {\n\t\t\tbox-sizing: border-box;\n\t\t}\n\t}\n\n\t.poki-playtest-popup {\n\t\tborder-radius: 16px;\n\t\tbackground: #FFF;\n\t\tbox-shadow: 0px 60px 24px 0px rgba(93, 107, 132, 0.03), 0px 34px 20px 0px rgba(93, 107, 132, 0.09), 0px 15px 15px 0px rgba(93, 107, 132, 0.15), 0px 4px 8px 0px rgba(93, 107, 132, 0.18);\n\n\t\tdisplay: flex;\n\t\tmax-width: 480px;\n\t\tmin-width: 320px;\n\t\twidth: 100%;\n\t\tpadding: 8px 0 16px 0;\n\t\tflex-direction: column;\n\t\talign-items: flex-start;\n\t\tgap: 16px;\n\t\tcolor: #002B50;\n\n\t\tposition: fixed;\n\t\tz-index: 99999;\n\t\ttop: 50%;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t}\n\n\t.poki-playtest-popup__header {\n\t\t\tdisplay: flex;\n\t\t\twidth: 100%;\n\t\t\tpadding: 8px 16px 16px;\n\t\t\talign-items: center;\n\t\t\tgap: 12px;\n\t\t\tborder-bottom: 2px solid #F0F5FC;\n\t}\n\n\t.poki-playtest-popup__header__img {\n\t\tall: unset;\n\t}\n\n\t.poki-playtest-popup__header__title {\n\t\tfont: 700 24px/1.16 Torus, sans-serif;\n\t\tmargin: 0;\n\t}\n\n\t.poki-playtest-popup__content {\n\t\tfont: 400 14px/1.57 "Proxima Nova", sans-serif;\n\t\tpadding: 0 16px;\n\n\t\ta {\n\t\t\tcolor: #0074E0;\n\t\t\tpointer-events: auto;\n\n\t\t\t&:hover {\n\t\t\t\tcolor: #009CFF;\n\t\t\t}\n\t\t}\n\n\t\tp {\n\t\t\tmargin: 8px 0 0;\n\n\t\t\t&:first-child {\n\t\t\t\tmargin-top: 0;\n\t\t\t}\n\n\t\t\tsmall {\n\t\t\t\tall: unset;\n\t\t\t}\n\n\t\t\t&:has(small) {\n\t\t\t\tcolor: #5D6B84;\n\t\t\t\tfont-size: 12px;\n\t\t\t\tline-height: 1.33;\n\t\t\t\tletter-spacing: 0.3px;\n\t\t\t}\n\t\t}\n\n\t\th3 {\n\t\t\tfont-weight: 700;\n\t\t\tfont-size: 16px;\n\t\t\tline-height: 1.5;\n\t\t\tmargin: 16px 0 14px;\n\t\t}\n\t}\n\n\t@media screen and (max-width: 640px) {\n\t\t.poki-playtest-popup {\n\t\t\tgap: 8px;\n\t\t\tpadding: 8px 0 12px 0;\n\t\t}\n\t\t.poki-playtest-popup__header {\n\t\t\tpadding: 0px 16px 0px;\n\t\t\talign-items: center;\n\t\t\tgap: 8px;\n\t\t}\n\t\t.poki-playtest-popup__content {\n\t\t\tfont-size: 12px;\n\t\t\tline-height: 1.33;\n\t\t}\n\t}\n\n\t.poki-playtest-popup__actions {\n\t\tdisplay: flex;\n\t\twidth: 100%;\n\t\tpadding: 8px 16px 0;\n\t\tgap: 16px;\n\t\tjustify-content: center;\n\t}\n\n\t.poki-playtest-popup__button {\n\t\tdisplay: flex;\n\t\tpadding: 7px 24px 9px;\n\t\tborder: none;\n\t\tmargin: 0;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tflex: 1 0 0;\n\t\tborder-radius: 24px;\n\t\tbackground: #009CFF;\n\t\tcursor: pointer;\n\t\tpointer-events: auto;\n\n\t\tcolor: #FFF;\n\t\tfont: 700 16px/1.25 Torus, sans-serif;\n\n\t\t&:hover {\n\t\t\tbackground-color: #0074E0;\n\t\t}\n\t}\n\n\t.poki-playtest-popup-wrapper {\n\t\tall: unset;\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tbackground: #002B50AF;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tz-index: 99998;\n\t}\n\n\t.poki-playtest-popup-scope-reset {\n\t\tletter-spacing: normal;\n\t\ttext-align: left;\n\t\ttext-decoration: none;\n\t\ttext-indent: 0;\n\t\ttext-shadow: none;\n\t\ttext-transform: none;\n\t\twhite-space: normal;\n\t\tword-spacing: normal;\n\t}\n',n.id="poki-playtest-template-style",e.appendChild(n)}(o);const r=document.getElementById("poki-playtest-template-markup").content.cloneNode(!0);r.querySelector("#poki-playtest-popup-game-title").textContent=e,async function(){const e=new FontFace("ProximaNova","url(https://a.poki-cdn.com/fonts/proxima-nova-regular-latin.woff2)").load(),t=new FontFace("ProximaNova","url(https://a.poki-cdn.com/fonts/proxima-nova-bold-latin.woff2)",{weight:"bold"}).load(),n=new FontFace("Torus","url(https://a.poki-cdn.com/fonts/torus-bold-latin.woff2)").load(),[o,r,i]=await Promise.all([e,t,n]);document.fonts.add(o),document.fonts.add(r),document.fonts.add(i)}().then((()=>{o.appendChild(r),function({rejectCallback:e,resolveCallback:t}){const n=document.getElementById("poki-playtest-popup-reject"),o=document.getElementById("poki-playtest-popup-resolve");n?.addEventListener("pointerup",(()=>{setTimeout(Wt,10),e()})),o?.addEventListener("pointerup",(()=>{setTimeout(Wt,10),t()}));const r=document.getElementById("poki-playtest-popup-wrapper");r&&["pointerdown","pointerup","pointermove","click","mousedown","mouseup","mousemove","touchstart","touchend","touchmove","contextmenu","dragstart"].forEach((e=>r.addEventListener(e,$t)))}({rejectCallback:t,resolveCallback:n})}))}const Qt=window.requestAnimationFrame;function Zt(e){return Math.round(100*e)/100}class Xt{#i=[];#a=0;#s;constructor(e){Math.random()>e||(this.#s=performance.now()+1e3,Qt((()=>{this.#c()})))}#c(){const e=performance.now();for(;e>=this.#s;)this.#i.unshift(this.#a),this.#i.length>10&&this.#i.pop(),this.#a=0,this.#s+=1e3;this.#a++,Qt((()=>{this.#c()}))}stats(){if(0===this.#i.length)return;const e=Math.min(...this.#i),t=Math.max(...this.#i),n=Zt(this.#i.reduce(((e,t)=>e+t),0)/this.#i.length);let o=Zt(this.#i.slice(1).map(((e,t)=>Math.abs(e-this.#i[t]))).reduce(((e,t)=>e+t),0)/(this.#i.length-1));return Number.isNaN(o)&&(o=0),`${e}|${t}|${n}|${o}`}}function en(e){const t=[];let n=0;for(let o=0;o<e.length;o++){if(n>0){n--;continue}const r=e[o];if("string"==typeof r)n=(r.match(/%c/g)||[]).length,t.push(r.replace(/%c/g,""));else try{t.push(String(r))}catch(e){t.push(`<${e.message}>`)}}return t.join(" ")}const tn=window.requestAnimationFrame;function nn(e){fetch("https://mystery-game-tile.poki.io/v0/metric",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}function on(e){const t=Math.random().toString(36).substring(2);let n=0,o=!1,r=0,i=0,a=0,s=[];const c=()=>{a++,tn(c)};c(),setInterval((()=>{s.push(a),a=0}),1e3);window.addEventListener("beforeunload",(()=>{const a=vn()>0,c=s,d=performance.now();s=[],o||(n=d),nn({metrictest_id:e.metrictestID,play_id:t,started:a,duration:n,total_duration:d,timed_out:!0,sdk_version:"9912e5328984435a6f7175ff72da206233dcb942",fpss:c,upvotes:r,downvotes:i,have_interaction:Wn.lastInteractionTime>0})}));window.addEventListener("message",(e=>{e.data&&"vote"===e.data.type&&(e.data.direction<0?i++:e.data.direction>0&&r++)}));setInterval((()=>{const a=vn()>0,c=s,d=performance.now();if(s=[],!o){n=d;const e=6e4;d-Math.max(mn,Wn.lastInteractionTime)>e&&(o=!0)}nn({metrictest_id:e.metrictestID,play_id:t,started:a,duration:n,total_duration:d,timed_out:o,sdk_version:"9912e5328984435a6f7175ff72da206233dcb942",fpss:c,upvotes:r,downvotes:i,have_interaction:Wn.lastInteractionTime>0})}),1e4)}function rn(){let e;try{e=performance.getEntriesByType("resource").map((e=>e.encodedBodySize)).reduce(((e,t)=>e+t)),e+=performance.getEntriesByType("navigation")[0].encodedBodySize}catch{}return e}let an=!1;try{"1"===localStorage.getItem("poki_pbf")?an=!0:V.isPlayground||"GB"===V.country||localStorage.setItem("poki_pbf","1")}catch{}function sn(){if(void 0===window.MediaRecorder)return;let e='video/webm;codecs="vp9"';return("undefined"!=typeof navigator&&/(iPad|iPhone|iPod)/gi.test(navigator.userAgent)||ot||rt)&&(e='video/mp4;codecs="avc1.42000d"'),MediaRecorder.isTypeSupported(e)?e:void 0}let cn=(e,t)=>{},dn=[],ln=null,un=0,pn=0,mn=0;const gn=[...Object.values(e.tracking.screen),e.tracking.ads.status.completed,e.tracking.ads.status.error,e.tracking.ads.status.limit,e.tracking.ads.video.progress],fn={[e.tracking.screen.commercialBreak]:"commercialBreak",[e.tracking.screen.gameLoadingFinished]:"gameLoadingFinished",[e.tracking.screen.gameplayStart]:"gameplayStart",[e.tracking.screen.gameplayStop]:"gameplayStop",[e.tracking.screen.rewardedBreak]:"rewardedBreak"};let hn=[],yn=[];try{const e=e=>{const t=console[e];console[e]=(...n)=>{t.apply(console,n),yn&&yn.push({timeMs:performance.now(),level:e,message:en(n)})},hn.push((()=>{console[e]=t}))};V.gameID&&!V.isPlayground&&!V.isPokiExternal&&V.isPokiIframe&&(e("log"),e("info"),e("warn"),e("error"))}catch{}function wn(){dn=null,hn.forEach((e=>e())),hn=[],yn=null}function vn(){return pn}function bn(t,n){console.info("%cPOKI_PLAYTEST:%c start recording using codec","font-weight: bold","",n);const o=Yt(t,(()=>{ln?.close(1e3,"Playtest recording stopped")}));o&&(ln=new WebSocket("wss://playtest-recorder.poki.io/ws"),ln.addEventListener("error",(()=>{Tn.track(e.tracking.playtest.error,{message:"websocket error"}),console.info("%cPOKI_PLAYTEST:%c error","font-weight: bold","")})),ln.addEventListener("open",(()=>{if(!ln)return;if(ln.readyState===ln.OPEN){let e;try{const t=document.createElement("canvas"),n={powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1};let o=t.getContext("webgl2",n);if(o||(o=t.getContext("webgl",n),o||(o=t.getContext("experimental-webgl",n))),o){const t=o,n=t.getExtension("WEBGL_debug_renderer_info");n&&(e=t.getParameter(n.UNMASKED_RENDERER_WEBGL)),e||(e=t.getParameter(t.RENDERER))}}catch{}const n=JSON.stringify({type:"save",game_id:V.gameID,version_id:V.versionID,webgl_renderer:e,sdk_version:"9912e5328984435a6f7175ff72da206233dcb942",cpus:navigator.hardwareConcurrency,device_pixel_ratio:window.devicePixelRatio||1,canvasses:t.length});ln.send(n),console.info("%cPOKI_PLAYTEST:%c websocket open","font-weight: bold","",n)}const r=new MediaRecorder(o,{mimeType:n,videoBitsPerSecond:5e5}),i=performance.now(),a=e=>Math.round((e||performance.now())-i);r.addEventListener("stop",(()=>{console.info("%cPOKI_PLAYTEST:%c recording stopped","font-weight: bold","")})),r.addEventListener("error",(e=>{console.warn("%cPOKI_PLAYTEST:%c","font-weight: bold","",e.error)})),r.addEventListener("dataavailable",(e=>{e.data.size>0&&ln&&ln.readyState===ln.OPEN&&ln.send(e.data)})),r.start(250);const s={};let c=!1;document.addEventListener("keydown",(e=>{s[e.code]||(s[e.code]=!0,c=!0)})),document.addEventListener("keyup",(e=>{s[e.code]&&(s[e.code]=!1,c=!0)}));const d=setInterval((()=>{const e=Object.keys(s);c&&e.length>0&&ln&&ln.readyState===ln.OPEN&&ln.send(JSON.stringify({type:"keyboard",offset:a(),keys:s})),c=!1,e.forEach((e=>{s[e]||delete s[e]}))}),50);cn=(e,t)=>{if(!ln||ln.readyState!==ln.OPEN)return;ln.send(Ve({type:"sdk-event",offset:a(t),event:e}));const n=fn[e];n&&ln.send(Ve({type:"console",offset:a(t),level:"log",message:`PokiSDK.${n}()`}))},null!==dn&&(dn.forEach((e=>{cn(e.event,e.timeMs)})),dn=null),qe=e=>{ln&&ln.readyState===ln.OPEN&&ln.send(JSON.stringify({type:"error",offset:a(),error:e}))},hn.forEach((e=>e())),hn=[];try{const e=e=>{const t=console[e];console[e]=(...n)=>{t.apply(console,n),ln&&ln.readyState===ln.OPEN&&ln.send(JSON.stringify({type:"console",offset:a(),level:e,message:en(n)}))},hn.push((()=>{console[e]=t}))};e("log"),e("info"),e("warn"),e("error")}catch{}yn&&(yn.forEach((e=>{ln&&ln.readyState===ln.OPEN&&ln.send(JSON.stringify({type:"console",offset:a(e.timeMs),level:e.level,message:e.message}))})),yn=null),Wn.__playtestCaptureHTML===Kn&&ln.send(JSON.stringify({type:"console",offset:a(),level:"log",message:"No canvas found, using HTML capture"}));const l=({position:t})=>{if(!ln||ln.readyState!==ln.OPEN)return;let n=e.tracking.screen.commercialBreak,o="Commercial Break";t===e.ads.position.rewarded&&(n=e.tracking.screen.rewardedBreak,o="Rewarded Break"),zt(o),ln.send(JSON.stringify({type:"sdk-event",offset:a(),event:n}))};z.addEventListener(e.playtest.startVideo,l);const u=()=>{zt("")};z.addEventListener(e.playtest.stopVideo,u);const p=new Xt(1),m=setInterval((()=>{ln&&ln.readyState===ln.OPEN&&ln.send(JSON.stringify({type:"fps",offset:a(),stats:p.stats()}))}),1e3);ln.addEventListener("close",(t=>{console.info("%cPOKI_PLAYTEST:%c websocket closed","font-weight: bold","",t),cn=()=>{},z.removeEventListener(e.playtest.startVideo,l),z.removeEventListener(e.playtest.stopVideo,u),clearInterval(d),clearInterval(m),r.stop(),mt=!0,ln=null,wn(),Tn.track(e.tracking.playtest.closed,{reason:`${t.reason}:${t.code}:${t.wasClean}`})}))})))}function kn(t){const n=function(e){if("1"===C("playtest"))return!0;if(!V.country)return!1;if(!V.isPokiIframe)return!1;if(!e.playtestRecord)return!1;if(e.playtestVersion&&e.playtestVersion!==V.versionID)return!1;if(e.playtestNewUser&&an)return!1;const t=O()||D()||ot;if("desktop"===e.playtestDeviceCategory&&t)return!1;if("mobile"===e.playtestDeviceCategory&&!t)return!1;if(["GB","NL","CA"].includes(V.country))return!1;const n=navigator;if(n.connection&&n.connection.effectiveType&&"4g"!==n.connection.effectiveType)return!1;if(n?.hardwareConcurrency<8)return!1;if(!document.createElement("canvas").getContext("webgl2",{failIfMajorPerformanceCaveat:!0}))return!1;if(rt){const e=n.userAgent.match(/Version\/([\d]+)/);if(!e||parseInt(e[1],10)<18)return!1}else if(void 0===window.MediaStreamTrackProcessor)return!1;return!0}(t),o=sn(),r="1"===C("playerfittest");if(!n||!o||r)return(r||t.metrictestID&&V.isPokiIframe)&&on(t),void wn();var i;Tn.track(e.tracking.playtest.showModal,{show:!0}),console.info("%cPOKI_PLAYTEST:%c init","font-weight: bold","",o),(i=t?.gameTitle||"this game",new Promise(((e,t)=>{console.info("%cPOKI_PLAYTEST:%c showing consent screen","font-weight: bold",""),Jt({rejectCallback:t,resolveCallback:e,gameTitle:i})}))).then((()=>{Tn.track(e.tracking.playtest.accepted);const t=performance.now()+6e4;let n=0,r=performance.now();const i=setInterval((()=>{const a=performance.now();if(!function(){const e=window;return!!(e.pc&&(e.pc.app||e.pc.AppBase)||e.c3_runtimeInterface||e._dmJSDeviceShared||e.g_WebAudioContext||e.unityGame)}()){const t=rn()||0;t!==n&&(n=t,r=a),(un&&a-un>1e4||a-r>1e4)&&(Tn.track(e.tracking.playtest.noCanvas),console.info("%cPOKI_PLAYTEST:%c no canvas found, switch to HTML capture","font-weight: bold",""),Wn.__playtestCaptureHTML=Kn)}const s=qt();if(s.length){clearInterval(i),Tn.track(e.tracking.playtest.starting);try{bn(s,o)}catch{}}a>t&&(Tn.track(e.tracking.playtest.notLoaded),clearInterval(i),console.info("%cPOKI_PLAYTEST:%c no gameLoadingFinished within 2 minutes","font-weight: bold",""),wn())}),1e3)})).catch((t=>{Tn.track(e.tracking.playtest.rejected),console.info("%cPOKI_PLAYTEST:%c rejected","font-weight: bold","",t),wn()}))}function An(e,...t){console.warn(`%cPOKI:%c ${e}`,"background-color: red; border-radius: 3px; color: white; padding: 1px 5px","",...t)}function Sn(e,...t){console.error(`%cPOKI:%c ${e}`,"background-color: red; border-radius: 3px; color: white; padding: 1px 5px","",...t)}const _n=(e,t=!1)=>new Promise(((n,o)=>{const r=document.createElement("script");r.type=t?"module":"text/javascript",r.async=!0,r.src=e;const i=()=>{r.readyState&&"loaded"!==r.readyState&&"complete"!==r.readyState||(n(),r.onload=null,r.onreadystatechange=null)};r.onload=i,r.onreadystatechange=i,r.onerror=o,document.head.appendChild(r)})),En=K(e.tracking),In=window;class Tn{static logToObserver=!1;static cmpRequired=void 0;static cmpIndex=void 0;static eventQueue=[];static track(t,n={}){try{let o={...n};if(-1===En.indexOf(t))throw new TypeError(`Invalid 'event', must be one of ${En.join(", ")}`);if("object"!=typeof o)throw new TypeError("Invalid data, must be an object");const r=z.getVideoDataAnnotations();if(r?.pokiAdServer)switch(t){case e.tracking.ads.status.started:{const{creativeId:e}=r;z.addVideoDataAnnotations({houseAdId:e}),o.houseAdId=e;break}case e.tracking.ads.status.impression:{const e=o?.creativeId;H({...o,event:"video-impression",creativeId:e}),z.addVideoDataAnnotations({houseAdId:e}),o.houseAdId=e;break}case e.tracking.ads.video.error:H({...o,event:"video-error",errorCode:o?.errorCode});break;case e.tracking.ads.video.loaderError:H({...o,event:"video-adsloader-error",errorCode:o?.errorCode});break;case e.tracking.ads.status.completed:H({...o,event:"video-complete"})}if(t.includes("pokiTrackingRewardedWeb")&&(o=r),F.log){if("test"===window?.process?.env?.NODE_ENV)return;Object.keys(o).length?console.info(`%cPOKI_TRACKER:%c Tracked event '${t}' with data:`,"font-weight: bold","",o):console.info(`%cPOKI_TRACKER:%c Tracked event '${t}'`,"font-weight: bold","")}if(function(t){if(mn=performance.now(),t.event===e.tracking.screen.gameLoadingFinished?un=performance.now():t.event===e.tracking.screen.gameplayStart&&(pn=performance.now()),gn.includes(t.event))try{cn(t.event),null!==dn&&dn.push({event:t.event,timeMs:performance.now()})}catch(e){console.warn("%cPOKI_PLAYTEST:%c","font-weight: bold","",e)}}({event:t,data:o}),G.sendMessage(e.message.event,{event:t,data:o}),!(V.isPokiIframe||V.isInspector||V.isPlayground||V.isPokiExternal)){const n="sdk",r="message",i={content:{event:t,data:o,pokifordevs:{game_id:V.gameID,game_version_id:void 0}},type:e.message.event};Tn.logToObserver?Tn.pushEvent(n,r,i):(Tn.eventQueue.push([n,r,i]),Tn.eventQueue.length>100&&Tn.eventQueue.shift())}}catch(e){Sn("error while tracking event",e)}}static setupDefaultEvents(){const t={[e.ready]:e.tracking.sdk.status.initialized,[e.failed]:e.tracking.sdk.status.failed,[e.ads.busy]:e.tracking.ads.status.busy,[e.ads.completed]:e.tracking.ads.status.completed,[e.ads.error]:e.tracking.ads.status.error,[e.ads.impression]:e.tracking.ads.status.impression,[e.ads.limit]:e.tracking.ads.status.limit,[e.ads.ready]:e.tracking.ads.status.ready,[e.ads.requested]:e.tracking.ads.status.requested,[e.ads.prebidRequested]:e.tracking.ads.status.prebidRequested,[e.ads.skipped]:e.tracking.ads.status.skipped,[e.ads.started]:e.tracking.ads.status.started,[e.ads.video.clicked]:e.tracking.ads.video.clicked,[e.ads.video.error]:e.tracking.ads.video.error,[e.ads.video.loaderError]:e.tracking.ads.video.loaderError,[e.ads.video.buffering]:e.tracking.ads.status.buffering,[e.ads.video.progress]:e.tracking.ads.video.progress,[e.ads.video.paused]:e.tracking.ads.video.paused,[e.ads.video.resumed]:e.tracking.ads.video.resumed,[e.ads.extendedVideoError]:e.tracking.ads.video.extendedVideoError};Object.keys(t).forEach((e=>{z.addEventListener(e,(n=>{Tn.track(t[e],n)}))}))}static pushEvent(e,t,n){In.pokiGTM.push({event:`${e}-${t}`,eventNoun:e,eventVerb:t,eventData:n||{}})}static setRequireConsent(e){Tn.cmpRequired=e,Tn.setupObserverIfCMP()}static setupObserverWithCMP(e){Tn.cmpIndex=e,Tn.setupObserverIfCMP()}static setupObserverIfCMP(){if(void 0!==Tn.cmpRequired&&void 0!==Tn.cmpIndex)if(Tn.cmpRequired){if(!window.__tcfapi)return void console.error("%cPOKI:%c PokiSDK.enableEventTracking() was called but no CMP is present.","font-weight: bold","");window.__tcfapi("addEventListener",2,((e,t)=>{!t||"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||(window.__tcfapi("getNonIABVendorConsents",2,(e=>{e&&e.nonIabVendorConsents&&e.nonIabVendorConsents[Tn.cmpIndex||0]&&Tn.setupObserver()})),window.__tcfapi("removeEventListener",2,(()=>{}),e.listenerId))}))}else Tn.setupObserver()}static setupObserver(){for(In._pokiSessionGlobalName="pokiSession",In._pokiUserGlobalName="pokiUser",In._pokiContextGlobalName="pokiContext",In._pokiTrackerGlobalName="pokiTracker",T(window.location.pathname,"external",V.contentGameID),function(){var e,t,i,u,p=null===(e=window[window._pokiUserGlobalName])||void 0===e?void 0:e.id,m=(null===(t=window[window._pokiUserGlobalName])||void 0===t?void 0:t.is_new)||!1,g=(null===(i=window[window._pokiUserGlobalName])||void 0===i?void 0:i.version)||0,f=(null===(u=window[window._pokiUserGlobalName])||void 0===u?void 0:u.ttl)||l;p||(p=n(a),m="1"===n(s),g=parseInt(n(c),10)||0,f=parseInt(n(d),10)||f),p&&function(e){if(!/^[A-Za-z0-9-_]+$/.test(e))return!1;try{return 16===atob(e.replace(/-/g,"+").replace(/_/g,"/")).length}catch(e){return!1}}(p)||(p=r(),m=!0,g=2,f=l),o(a,p,f),o(s,m?"1":"0",f),o(c,g,f),o(d,f,f),window[window._pokiUserGlobalName]={id:p,is_new:m,version:g,ttl:f}}(),In[In._pokiSessionGlobalName].referrer=V.referrerParam,In[In._pokiContextGlobalName]={tag:null,site:{id:null,domain:window.location.hostname,prefix:""},page:{id:V.contentGameID,type:"external",path:window.location.pathname,pageview_id:r()},user:In[In._pokiUserGlobalName],session:In[In._pokiSessionGlobalName]},In.pokiGTM=In.pokiGTM||[],_n("https://a.poki-cdn.com/t2.js"),Tn.logToObserver=!0;Tn.eventQueue.length;){const[e,t,n]=Tn.eventQueue.shift();Tn.pushEvent(e,t,n)}}}function Pn(){const e=window,t=[];return"function"!=typeof e.ga&&"function"!=typeof e.gtag||t.push("ga"),e.mixpanel&&"function"==typeof e.mixpanel.track&&t.push("mixpanel"),"function"==typeof e.GameAnalytics&&t.push("gameanalytics"),(e.kongregateAPI||e.kongregate)&&t.push("kongregate"),e.FlurryAgent&&t.push("flurry"),e.Countly&&t.push("countly"),e.amplitude&&t.push("amplitude"),t}const xn=()=>{let e=Math.floor(Date.now()/1e3),t="";for(let n=0;n<4;n++)t=String.fromCharCode(255&e)+t,e>>=8;if(window.crypto&&crypto.getRandomValues&&Uint32Array){const e=new Uint32Array(12);crypto.getRandomValues(e);for(let n=0;n<12;n++)t+=String.fromCharCode(255&e[n])}else for(let e=0;e<12;e++)t+=String.fromCharCode(Math.floor(256*Math.random()));return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")};var Cn;!function(e){e.SMALL="small",e.MEDIUM="medium",e.LARGE="large"}(Cn||(Cn={}));const On=Math.random().toString(36).substring(2);async function Dn(){const e=await window.cookieStore.getAll(),t=window.indexedDB.databases?await window.indexedDB.databases():[];return[...e.map((e=>({name:e.name,expire_seconds:Math.round((e.expires-Date.now())/1e3),type:"cookie",domain:e.domain}))),...Object.keys(window.localStorage).map((e=>({name:e,expire_seconds:15552e3,type:"localStorage"}))),...t.map((e=>({name:e.name,expire_seconds:0,type:"idb"})))]}class Ln{static async collectAndLog(){try{const e={cookies:await Dn(),p4d_game_id:V.gameID,user_id:On};fetch("https://t.poki.io/game-cookies",{method:"post",body:JSON.stringify(e)}).catch()}catch{}}static trackSavegames(){window.cookieStore&&window.cookieStore.getAll&&V.gameID&&(Math.random()>.01||navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")<=-1||(Ln.collectAndLog(),setInterval(Ln.collectAndLog,12e4)))}}const Mn=new RegExp(`(${["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(;\\s+wv|Version/\\d.\\d\\s+Chrome/\\d+(\\.0){3})","Linux; U; Android"].join("|")})`,"ig");function Bn(){window.navigator.userAgent.match(Mn)&&!V.isPlayground&&document.addEventListener("touchmove",(e=>(e.preventDefault(),e.returnValue=!1,!1)),{passive:!1})}function Nn(){return`User_${Math.floor(9e8*Math.random())+1e8}`}class Rn{#d=null;#l(){if(!V.isPokiIframe)throw new Error("User accounts is not available")}getUser=async()=>F.debug?{username:"TestUser",avatarUrl:"https://a.poki-cdn.com/img/placeholder_gradient.png"}:(this.#l(),this.#d||(this.#d=await this.#u()),this.#d);getToken=async()=>F.debug?"dummy.jwt.token":(this.#l(),this.#p());login=async()=>{if(F.debug)return;this.#l();return await this.getUser()?void 0:new Promise(((t,n)=>{function o(t){t.data.type===e.accounts.authPanelClosed&&(window.removeEventListener("message",o),n(new Error("User closed the auth panel without signing in.")))}window?.top?.postMessage({type:e.accounts.openAuthPanel},"*"),window.addEventListener("message",o),setTimeout((()=>{window.removeEventListener("message",o),n(new Error("Login timeout. User took too long to complete the action."))}),45e3)}))};#u=async()=>{try{return new Promise((t=>{window?.top?.postMessage({type:e.accounts.getUserInfo},"*");const n=o=>{if(o.data.type===e.accounts.userInfo){window.removeEventListener("message",n);const{enabled:e,session:r}=o.data;if(!e||!r?.id)return void t(null);this.#d={username:Nn(),avatarUrl:"https://a.poki-cdn.com/img/placeholder_gradient.png"},t(this.#d)}};window.addEventListener("message",n),setTimeout((()=>{window.removeEventListener("message",n),t(null)}),8e3)}))}catch(e){An("failed to fetch user info:",e)}return null};#p=async()=>{try{return new Promise((t=>{window?.top?.postMessage({type:e.accounts.getUserToken},"*");const n=o=>{if(o.data.type===e.accounts.userToken){window.removeEventListener("message",n);const{token:e,error:r}=o.data;if(r)return An("failed to fetch user token:",r),void t(null);if(!e)return void t(null);t(e)}};window.addEventListener("message",n),setTimeout((()=>{window.removeEventListener("message",n),t(null)}),8e3)}))}catch(e){An("failed to fetch user token:",e)}return null}}let jn;const Vn=atob("bGVhZGVyYm9hcmQ=");function Gn(e,t){const n=performance.now();if(!Number.isInteger(t))return;if(!jn)try{jn=localStorage.getItem(`poki_${Vn}_user_id`)||void 0,jn||(jn=crypto.randomUUID(),localStorage.setItem(`poki_${Vn}_user_id`,jn))}catch{return}const o={time_on_page:Math.floor(n),p4d_game_id:V.gameID,[Vn]:e,user_id:jn,score:t},r=Object.keys(o),i=function(e,t){const n=Array.from({length:e},((e,t)=>t)),o=[],r=function(e){let t=1;for(;e--;)t*=e+1;return t}(e);let i=(t%r+r)%r,a=e,s=0;for(;;)switch(s){case 0:if(a<=0){s=3;break}s=1;break;case 1:{let e=1,t=a-1;for(;t;)e*=t,t--;const r=i/e|0;o[o.length]=n.splice(r,1)[0],i%=e,a--,s=0;break}case 3:return o}}(r.length,t),a={};for(let e=0;e<i.length;e++){const t=r[i[e]];a[t]=o[t]}let s=JSON.stringify(a);s+=" ".repeat(Math.abs((t+(performance.now()-n>100?1:0))%7)),fetch(`https://${Vn}.poki.com/v0/${Vn}s/submit`,{method:"POST",body:s}).catch((()=>{}))}var Fn;const Un="once",Kn="force",zn="on",Hn="off",qn=atob("c3VibWl0U2NvcmU=");class Yn{__monetization;__gameStarted=!1;#m=!1;#g;#f=new Xt(.01);#h;#y=0;#w=0;#v=0;#b=0;#k=new Rn;#A=!1;#S=null;static lastInteractionTime=0;static __playtestCanvas;static __playtestCaptureHTML="";static __godotVersion=void 0;constructor(e,t=!1){this.__monetization=e,this.#A=t,Bn(),setInterval((()=>{this.#w=Math.max(this.#w-1,0)}),1e3)}init=(t={})=>{if(this.__logCall("init",t),this.#S)return Sn("PokiSDK.init() called more than once"),this.#S;t[qn]&&t[qn](((e,t)=>{Gn(e,t)})),window.addEventListener("pointerdown",this.#_),document.addEventListener("keydown",this.#_);const n=window;if(n.engine?.config?.onPrint){const e=n.engine.config.onPrint;n.engine.config.onPrint=(...t)=>{e(...t);const o=t[0]?.match(/Godot Engine (.+)/);o&&o[1]&&(Fn.__godotVersion=o[1],n.engine.config.onPrint=e)}}return this.#S=new Promise((n=>{this.__monetization.init({onReady:()=>{C("preroll")&&this.__monetization.forcePreroll(),n()},...t}),this.#E(),V.isInspector&&this.#I(),document.location.search.length<=1&&(G.sendMessage(e.message.sendInspectorBadBehavior,{data:{behavior:"rewrite_query_params"}}),G.sendMessage(e.message.sendInspectorEvent,{event:"bad-behavior",data:{behavior:"rewrite_query_params"}})),G.sendMessage(e.message.sdkDetails,{version:"9912e5328984435a6f7175ff72da206233dcb942"})})),this.#S};#E=()=>{window.addEventListener("message",(async t=>{if("pokiGenerateScreenshot"===t.data.type)(async t=>{const{hasFrame:n}=t;let o=null;if(n){const{title:e,thumbnail:n}=t;o=await nt({title:e,thumbnail:n})}else o=await nt();const r={screenshot:o,errors:Ge};t.callback&&(r.callback=t.callback),G.sendMessage(e.message.sendGameScreenshot,{data:r})})(t.data);else if("pokiGenerateRawScreenshot"===t.data.type)(async()=>{const t=await tt();G.sendMessage(e.message.sendGameRawScreenshot,{data:{screenshot:t}})})();else if("pokiUploadScreenshot"===t.data.type){const n=await et(t.data);G.sendMessage(e.message.sendUploadScreenshot,{data:{screenshot:n}})}}),!1)};#I=()=>{if(window.addEventListener("message",(async t=>{if("pokiInspectorAllowCommercialBreak"===t.data.type&&(j("adOverrideMode",!0),j("houseAdsOnly",!0)),"pokiInspectorDisallowCommercialBreak"===t.data.type&&(j("adOverrideMode",!1),j("houseAdsOnly",!1)),"pokiInspectorRequestCookies"===t.data.type&&Dn().then((t=>{G.sendMessage(e.message.sendInspectorCookies,{data:{cookies:t}}),G.sendMessage(e.message.sendInspectorEvent,{event:"cookies",data:{cookies:t}})})),"pokiInspectorClearLocalStorage"===t.data.type)try{if(localStorage.clear(),indexedDB.databases){const e=await indexedDB.databases(),t=(await Promise.allSettled(e.filter((e=>"string"==typeof e.name)).map((e=>indexedDB.deleteDatabase(e.name))))).filter((e=>"rejected"===e.status));t.length>0&&An("PokiSDK: Some IndexedDB databases failed to delete",t)}document.cookie.split(";").forEach((e=>{const t=e.split("=")[0].trim();document.cookie=`${t}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`})),G.sendMessage(e.message.sendInspectorEvent,{event:"localStorageCleared"})}catch(t){An("PokiSDK: Error clearing localStorage",t),G.sendMessage(e.message.sendInspectorEvent,{event:"localStorageClearError",data:{error:String(t)}})}}),!1),"desktop"!==V.device)try{const t=t=>{const n=console[t];console[t]=(...o)=>{G.sendMessage(e.message.sendInspectorConsole,{data:{level:t,args:Ve(o)}}),G.sendMessage(e.message.sendInspectorEvent,{event:"console",data:{level:t,args:Ve(o)}}),n.apply(console,o)}};t("log"),t("warn"),t("error")}catch{}};initWithVideoHB=()=>this.init();setDebug=(t=!0)=>{this.__logCall("setDebug",t);const{hostname:n}=window.location;n.endsWith("poki-gdn.com")?t&&Tn.track(e.tracking.debugTrueInProduction):(F.debug=t,F.log=t??F.log,t?function(){if(ze){ze=!1,window.removeEventListener("unhandledrejection",$e),window.removeEventListener("error",Je);try{console.error=Ue}catch{}}}():Qe())};setLogging=e=>{this.__logCall("setLogging",e),F.log=e};#T=()=>this.#w>=10;gameLoadingFinished=()=>{this.__logCall("gameLoadingFinished"),clearInterval(window.pokiCancelProgressInterval),Tn.track(e.tracking.screen.gameLoadingFinished,{transferSize:rn(),trackers:Pn().join(","),error_session_id:He,now:Math.round(window.performance?.now?.())||void 0});const t=window.pokiMeasureBuildin;window.PokiSDK.measure("game","loading","complete"),window.pokiMeasureBuildin=t};gameplayStart=t=>{if(this.__logCall("gameplayStart",t),this.#T())return void An("PokiSDK.gameplayStart() ignored because of too many events");this.#m=!0,this.__gameStarted||(this.__gameStarted=!0,Tn.track(e.tracking.screen.firstRound),this.__monetization.startStartAdsAfterTimer());const n=this.#w;setTimeout((()=>{let o;performance.now()-Fn.lastInteractionTime<5e3&&(o=this.#h),Tn.track(e.tracking.screen.gameplayStart,{...t,fps:this.#f.stats(),badEvents:n,interaction:o})}),0),clearTimeout(this.#g),this.#g=setTimeout((()=>{window.addEventListener("pointermove",this.#P),document.addEventListener("keydown",this.#P)}),6e5),this.#y&&(this.#y>performance.now()-50&&this.#w++,this.#y=0)};gameplayStop=t=>{this.__logCall("gameplayStop",t),this.#T()?An("PokiSDK.gameplayStart() ignored because of too many events"):(this.#m=!1,Tn.track(e.tracking.screen.gameplayStop,{...t,fps:this.#f.stats()}),clearTimeout(this.#g),window.removeEventListener("pointermove",this.#P),document.removeEventListener("keydown",this.#P),this.#y=performance.now())};customEvent=(t,n,o={})=>{this.__logCall("customEvent",t,n,o),t&&n?(t=String(t),n=String(n),o={...o},"game"===t&&"segment"===n&&o.segment||Tn.track(e.tracking.custom,{eventNoun:t,eventVerb:n,eventData:o})):console.error("%cPOKI:%c PokiSDK.customEvent() needs at least a noun and a verb","font-weight: bold","")};commercialBreak=t=>new Promise((n=>{if(this.__logCall("commercialBreak",t),"977b60eb-ff81-4c3a-895b-b585410d6c0d"===V.gameID)return void n();if(this.#T())return An("PokiSDK.commercialBreak() ignored because of too many calls"),void n();const o=this.__gameStarted?e.ads.position.midroll:e.ads.position.preroll;let r=!1;this.__runVideoAd({amount:1,position:o,onStart:()=>{if(this.#v++,r=!0,window.pokiMeasureBuildin&&window.PokiSDK.measure("midroll",this.#v,"start"),"function"==typeof t)try{t()}catch(e){An("error in onStart callback of PokiSDK.commercialBreak()",e)}}}).then((()=>{r&&window.pokiMeasureBuildin&&window.PokiSDK.measure("midroll",this.#v,"complete"),n()}))}));rewardedBreak=t=>new Promise((n=>{if(this.__logCall("rewardedBreak",t),"977b60eb-ff81-4c3a-895b-b585410d6c0d"===V.gameID)return void n(!1);let o,r=1;if("function"==typeof t)o=t;else if("object"==typeof t){t.onStart&&(o=t.onStart);const e=t?.size||Cn.SMALL;e===Cn.SMALL?r=1:e===Cn.MEDIUM?r=2:e===Cn.LARGE&&(r=3)}let i=!1;setTimeout((()=>{this.__runVideoAd({position:e.ads.position.rewarded,amount:r,onStart:()=>{if(this.#b++,i=!0,window.pokiMeasureBuildin&&window.PokiSDK.measure("rewarded",this.#b,"start"),"function"==typeof o)try{o()}catch(e){An("error in onStart callback of PokiSDK.rewardedBreak()",e)}}}).then((e=>{i&&window.pokiMeasureBuildin&&window.PokiSDK.measure("rewarded",this.#b,"complete"),n(e)}))}),0)}));displayAd=(t,n,o,r)=>{if(this.__logCall("displayAd",t,n,o,r),"977b60eb-ff81-4c3a-895b-b585410d6c0d"===V.gameID)return void(o&&o());const i=xn();Tn.track(e.tracking.screen.displayAd,{size:n,opportunityId:i,duringGameplay:this.#m});const a={container:t,opportunityId:i,size:n,duringGameplay:this.#m,onCanDestroy:o,onDisplayRendered:r,headerBiddingAllowed:!0};this.__monetization.displayAd(a)};destroyAd=e=>{this.__logCall("destroyAd",e),this.__monetization.destroyAd(e)};isAdBlocked=()=>!1;muteAd=()=>{this.__logCall("muteAd"),this.__monetization.muteAd()};setVolume=e=>{this.__logCall("setVolume",e),this.__monetization.setVolume(e)};logError=e=>{this.captureError(e)};setPlaytestCanvas=e=>{this.__logCall("setPlaytestCanvas",e),this.playtestSetCanvas(e)};playtestSetCanvas=e=>{this.__logCall("playtestSetCanvas",e),e?(Fn.__playtestCanvas=[].concat(e),Ht(Fn.__playtestCanvas)):Fn.__playtestCanvas=[]};playtestCaptureHtmlOnce=()=>{this.__logCall("playtestCaptureHtmlOnce"),Fn.__playtestCaptureHTML=Un};playtestCaptureHtmlForce=()=>{this.__logCall("playtestCaptureHtmlForce"),Fn.__playtestCaptureHTML=Kn};playtestCaptureHtmlOn=()=>{this.__logCall("playtestCaptureHtmlOn"),Fn.__playtestCaptureHTML=zn};playtestCaptureHtmlOff=()=>{this.__logCall("playtestCaptureHtmlOff"),Fn.__playtestCaptureHTML=Hn};getIsoLanguage=()=>C("iso_lang");shareableURL=(t={})=>new Promise(((n,o)=>{this.__logCall("shareableURL",t);const r=new URLSearchParams,i=Object.keys(t);if(V.isPokiIframe||V.isInspector){const o=C("poki_url");i.forEach((e=>{void 0!==t[e]&&null!==t[e]&&r.set(`gd${e}`,t[e])})),n(`${o}?${r.toString()}`),G.sendMessage(e.message.setPokiURLParams,{params:t})}else window.self===window.top?(i.forEach((e=>{void 0!==t[e]&&null!==t[e]&&r.set(`${e}`,t[e])})),n(`${window.location.origin}${window.location.pathname}?${r.toString()}`)):o(new Error("shareableURL only works on Poki or a top level frame"))}));getURLParam=e=>C(`gd${e}`)||C(e);captureError=e=>{this.__logCall("captureError",e),We(e)};getLanguage=()=>navigator.language.toLowerCase().split("-")[0];generateScreenshot=async()=>(this.__logCall("generateScreenshot"),nt());enableEventTracking=e=>{this.__logCall("enableEventTracking",e),V.isPlayground||V.isPokiIframe||V.isInspector||document?.referrer?.includes("games.poki.com")||Tn.setupObserverWithCMP(e||0)};__runVideoAd=({position:t,amount:n,onStart:o,timeBetweenAds:r})=>new Promise((i=>{let a=1;this.__monetization.setNrAds(a,n);const s=xn(),c=o=>{setTimeout((()=>{if(o?.type===e.ads.limit||o?.type===e.ads.busy)return void i(!1);if(a===n||this.#A)return z.dispatchEvent(e.ads.startTimer,{overwriteTimeBetweenAds:r}),void i(!!o?.rewardAllowed);const d=z.getVideoDataAnnotations();if("poki"===d?.bidder)return z.dispatchEvent(e.ads.startTimer,{overwriteTimeBetweenAds:r}),void i(!0);a++,z.clearVideoDataAnnotations(),z.addVideoDataAnnotations({adBreakId:s,position:t,opportunityId:xn(),currentAdNumber:a,totalAdAmount:n}),this.__monetization.setNrAds(a,n),this.__monetization.requestAd({position:t,onFinish:c})}),0)};z.clearVideoDataAnnotations(),z.addVideoDataAnnotations({adBreakId:s,position:t,opportunityId:xn(),currentAdNumber:1,totalAdAmount:n}),this.__monetization.requestAd({position:t,onFinish:c,onStart:()=>{if(this.__monetization.setNrAds(a,n),"function"==typeof o)try{o()}catch(e){console.error("%cPOKI:%c error in onStart callback of PokiSDK.runVideoAd()","font-weight: bold","",e)}}})}));#P=()=>{window.removeEventListener("pointermove",this.#P),document.removeEventListener("keydown",this.#P),Tn.track(e.tracking.screen.playerActive),this.#g=setTimeout((()=>{window.addEventListener("pointermove",this.#P),document.addEventListener("keydown",this.#P)}),6e5)};#_=e=>{"pointerdown"===e.type?this.#h="pointerdown":"keydown"===e.type?this.#h=`keydown-${e.code}`:this.#h="unknown",Fn.lastInteractionTime=performance.now()};__logCall=(e,...t)=>{if(!V.isPlayground){for(let e=0;e<t.length;e++)void 0===t[e]&&(t[e]="");!function(e,...t){console.info(`%cPOKI:%c ${e}`,"background-color: green; border-radius: 3px; color: white; padding: 1px 5px","",...t)}(`PokiSDK.${e}(`,...t,")")}};setDebugTouchOverlayController=()=>{};gameInteractive=()=>{};gameLoadingProgress=()=>{};gameLoadingStart=()=>{};getLeaderboard=()=>Promise.resolve([]);happyTime=()=>{};sendHighscore=()=>{};setPlayerAge=()=>{};roundStart=()=>{};roundEnd=()=>{};getUser=async()=>this.#k.getUser();getToken=async()=>this.#k.getToken();login=async()=>this.#k.login()}Fn=Yn;const Wn=Yn,$n={adTagUrl:"//pubads.g.doubleclick.net/gampad/ads?sz=640x360|640x480&iu=/1053551/Pub-Poki-Generic&ciu_szs&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url={url}&description_url={descriptionUrl}&correlator={timestamp}&nofb=1",adTiming:{preroll:!1,timeBetweenAds:12e4,timePerTry:7e3,startAdsAfter:12e4},waterfallRetries:2};function Jn(e){let t=`/21682198607/debug-display/debug-display-${e}`;return F.debug||(t=V.isPokiIframe?`/21682198607/${V.device}_ingame_${e}/${V.siteID}_${V.device}_ingame_${e}`:V.isPokiExternal?`/21682198607/external_${V.device}_display_platform`:`/21682198607/external_${V.device}_display_ingame/external_${V.device}_ingame_${e}`),t}const Qn=()=>{let{pathname:e}=window.location;"/"!==e[0]&&(e=`/${e}`);let t="";window.top!==window&&(t=encodeURIComponent(document.referrer));return Xe(`https://devs-api.poki.com/gameinfo/@sdk?href=${encodeURIComponent(`${window.location.protocol}//${window.location.host}${e}${window.location.search}`)}&referrer=${t}`,{method:"GET",headers:{"Content-Type":"text/plain"}}).then((async e=>{if(e.status>=200&&e.status<400){const t=await e.json();if(!t.game_id)return;return{gameID:t.game_id,gameTitle:t.game_name,playtestRecord:t.playtest_record,playtestVersion:t.playtest_version,playtestDeviceCategory:t.playtest_device_category,playtestNewUser:t.playtest_new_user,metrictestID:t.metrictest_id,metrictestVersion:t.metrictest_version,metrictestDeviceCategory:t.metrictest_device_category,cachedContentGameID:t.cached_content_game_id,specialConditions:t.ad_settings.special_conditions,adTiming:{preroll:t.ad_settings.preroll,timePerTry:t.ad_settings.time_per_try,timeBetweenAds:t.ad_settings.time_between_ads,startAdsAfter:t.ad_settings.start_ads_after}}}throw e})).catch((e=>async function(e){console.warn("%cPOKI:%c failed request p4d info","font-weight: bold","",e);try{let{pathname:t}=window.location;"/"!==t[0]&&(t=`/${t}`);const n=JSON.stringify({c:"sdk-p4d-error",ve:7,d:[{k:"error",v:JSON.stringify({status:e.status,json:e.json&&await e.json(),body:JSON.stringify({href:`${window.location.protocol}//${window.location.host}${t}${window.location.search}`}),name:e.name,message:e.message})}]}),o="https://t.poki.io/l";if(navigator.sendBeacon)navigator.sendBeacon(o,n);else try{const e=new XMLHttpRequest;e.open("POST",o,!0),e.send(n)}catch{}}catch{}}(e)))};function Zn(e){if(!document.body||!document.body.appendChild)return void document.addEventListener("DOMContentLoaded",(()=>{Zn(e)}));const t=document.createElement("iframe");t.style.display="none",document.body.appendChild(t),t.contentWindow&&(t.contentWindow.document.open(),t.contentWindow.document.write(`\x3cscript\x3e${e}<\/script>`),t.contentWindow.document.close())}const Xn=()=>{V.isPokiIframe&&(setTimeout(Ln.trackSavegames,1e4),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&Zn("\nwindow.addEventListener('storage', function(event) {\n\ttry {\n\t\tconst key = event.key;\n\n\t\t// key is null when localStorage.clear() is called.\n\t\tif (key === null) {\n\t\t\twindow.top.postMessage({\n\t\t\t\ttype: 'mutateSaveGame',\n\t\t\t\tcontent: {\n\t\t\t\t\taction: 'clear',\n\t\t\t\t},\n\t\t\t}, '*');\n\t\t\treturn;\n\t\t}\n\n\t\t// newValue is null when localStorage.removeItem() is called.\n\t\tif (event.newValue === null) {\n\t\t\twindow.top.postMessage({\n\t\t\t\ttype: 'mutateSaveGame',\n\t\t\t\tcontent: {\n\t\t\t\t\taction: 'delete',\n\t\t\t\t\tkey,\n\t\t\t\t},\n\t\t\t}, '*');\n\t\t} else {\n\t\t\twindow.top.postMessage({\n\t\t\t\ttype: 'mutateSaveGame',\n\t\t\t\tcontent: {\n\t\t\t\t\taction: 'set',\n\t\t\t\t\tkey,\n\t\t\t\t\tvalue: event.newValue,\n\t\t\t\t},\n\t\t\t}, '*');\n\t\t}\n\t} catch { }\n});\n"))};function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function to(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function no(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,so(o.key),o)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oo(e,t,n){return(t=so(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function io(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(n),!0).forEach((function(t){oo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ao(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i,a,s=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=i.call(n)).done)&&(s.push(o.value),s.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(d)throw r}}return s}}(e,t)||lo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function so(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t);if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function co(e){return co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},co(e)}function lo(e,t){if(e){if("string"==typeof e)return eo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eo(e,t):void 0}}var uo=no((function e(t){to(this,e),this.p=new Promise(t)}));uo.__typeson__type__="TypesonPromise","undefined"!=typeof Symbol&&Object.defineProperty(uo.prototype,Symbol.toStringTag,{get:function(){return"TypesonPromise"}}),uo.prototype.then=function(e,t){var n=this;return new uo((function(o,r){n.p.then((function(t){o(e?e(t):t)})).catch((function(e){return t?t(e):Promise.reject(e)})).then(o,r)}))},uo.prototype.catch=function(e){return this.then((function(){}),e)},uo.resolve=function(e){return new uo((function(t){t(e)}))},uo.reject=function(e){return new uo((function(t,n){n(e)}))},uo.all=function(e){return new uo((function(t,n){Promise.all(e.map((function(e){return null!=e&&e.constructor&&"__typeson__type__"in e.constructor&&"TypesonPromise"===e.constructor.__typeson__type__?e.p:e}))).then(t,n)}))},uo.race=function(e){return new uo((function(t,n){Promise.race(e.map((function(e){return null!=e&&e.constructor&&"__typeson__type__"in e.constructor&&"TypesonPromise"===e.constructor.__typeson__type__?e.p:e}))).then(t,n)}))},uo.allSettled=function(e){return new uo((function(t,n){Promise.allSettled(e.map((function(e){return null!=e&&e.constructor&&"__typeson__type__"in e.constructor&&"TypesonPromise"===e.constructor.__typeson__type__?e.p:e}))).then(t,n)}))};var po=Object.hasOwn,mo=Object.getPrototypeOf;function go(e,t){return vo(e)&&"function"==typeof e.then&&(!t||"function"==typeof e.catch)}function fo(e){return Object.prototype.toString.call(e).slice(8,-1)}function ho(e,t){if(!e||"object"!==co(e))return!1;var n=mo(e);if(!n)return null===t;var o=po(n,"constructor")&&n.constructor;return"function"!=typeof o?null===t:t===o||null!==t&&Function.prototype.toString.call(o)===Function.prototype.toString.call(t)||"function"==typeof t&&"string"==typeof o.__typeson__type__&&o.__typeson__type__===t.__typeson__type__}function yo(e){return!(!e||"Object"!==fo(e))&&(!mo(e)||ho(e,Object))}function wo(e){if(!e||"Object"!==fo(e))return!1;var t=mo(e);return!t||ho(e,Object)||wo(t)}function vo(e){return null!==e&&"object"===co(e)}function bo(e){return e.replaceAll("''","''''").replace(/^$/,"''").replaceAll("~","~0").replaceAll(".","~1")}function ko(e){return e.replaceAll("~1",".").replaceAll("~0","~").replace(/^''$/,"").replaceAll("''''","''")}function Ao(e,t){if(""===t)return e;if(null===e||"object"!==co(e))throw new TypeError("Unexpected non-object type");var n=t.indexOf(".");if(-1!==n){var o=e[ko(t.slice(0,n))];return void 0===o?void 0:Ao(o,t.slice(n+1))}return e[ko(t)]}function So(e,t,n){if(""===t)return n;if(!e||"object"!==co(e))throw new TypeError("Unexpected non-object type");if("__proto__"===t)throw new TypeError("Invalid property");var o=t.indexOf(".");return-1!==o?So(e[ko(t.slice(0,o))],t.slice(o+1),n):(e[ko(t)]=n,e)}function _o(e){return null===e?"null":Array.isArray(e)?"array":co(e)}function Eo(e,t,n){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}var Io=Object.keys,To=Object.hasOwn,Po=Array.isArray,xo=["type","replaced","iterateIn","iterateUnsetNumeric","addLength"];function Co(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function Oo(e,t){var n,o;if(""===e.keypath)return-1;var r=null!==(n=e.keypath.match(/\./g))&&void 0!==n?n:0,i=null!==(o=t.keypath.match(/\./g))&&void 0!==o?o:0;return r&&(r=r.length),i&&(i=i.length),r>i?-1:r<i?1:e.keypath<t.keypath?-1:e.keypath>t.keypath?1:0}var Do=no((function e(t){to(this,e),this.options=t,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}),[{key:"stringify",value:function(e,t,n,o){o=io(io(io({},this.options),o),{},{stringification:!0});var r=this.encapsulate(e,null,o);return Po(r)?JSON.stringify(r[0],t,n):r.then((function(e){return JSON.stringify(e,t,n)}))}},{key:"stringifySync",value:function(e,t,n,o){return this.stringify(e,t,n,io(io({throwOnBadSyncType:!0},o),{},{sync:!0}))}},{key:"stringifyAsync",value:function(e,t,n,o){return this.stringify(e,t,n,io(io({throwOnBadSyncType:!0},o),{},{sync:!1}))}},{key:"parse",value:function(e,t,n){return n=io(io(io({},this.options),n),{},{parse:!0}),this.revive(JSON.parse(e,t),n)}},{key:"parseSync",value:function(e,t,n){return this.parse(e,t,io(io({throwOnBadSyncType:!0},n),{},{sync:!0}))}},{key:"parseAsync",value:function(e,t,n){return this.parse(e,t,io(io({throwOnBadSyncType:!0},n),{},{sync:!1}))}},{key:"specialTypeNames",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.returnTypeNames=!0,this.encapsulate(e,t,n)}},{key:"rootTypeName",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.iterateNone=!0,this.encapsulate(e,t,n)}},{key:"encapsulate",value:function(e,t,n){var o=this,r=io(io({sync:!0},this.options),n),i=r.sync,a={},s=[],c=[],d=[],l=!("cyclic"in r)||r.cyclic,u=r.encapsulateObserver,p=function(e){var t=Object.values(a);if(r.iterateNone)return t.length?t[0]:_o(e);if(t.length){if(r.returnTypeNames)return function(e){return function(e){if(Array.isArray(e))return eo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||lo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(t));e&&yo(e)&&!To(e,"$types")?e.$types=a:e={$:e,$types:{$:a}}}else vo(e)&&To(e,"$types")&&(e={$:e,$types:!0});return!r.returnTypeNames&&e},m=Co((function(e,t){return Eo(Promise.all(t.map((function(e){return e[1].p}))),(function(n){return Eo(Promise.all(n.map(Co((function(n){var o=!1,r=[],i=ao(t.splice(0,1),1),a=ao(i[0],7),s=a[0],c=a[2],d=a[3],l=a[4],u=a[5],p=a[6],g=f(s,n,c,d,r,!0,p),h=ho(g,uo);return function(e,t){var n=e();return n&&n.then?n.then(t):t(n)}((function(){if(s&&h)return Eo(g.p,(function(t){l[u]=t;var n=m(e,r);return o=!0,n}))}),(function(t){return o?t:(s?l[u]=g:e=h?g.p:g,m(e,r))}))})))),(function(){return e}))}))})),g=function(e,t,n){Object.assign(e,t);var o=xo.map((function(t){var n=e[t];return delete e[t],n}));n(),xo.forEach((function(t,n){e[t]=o[n]}))},f=function(e,t,n,i,d,l,p){var m,y={},w=co(t),v=u?function(o){var r,a=null!==(r=null!=p?p:i.type)&&void 0!==r?r:_o(t);u(Object.assign(null!=o?o:y,{keypath:e,value:t,cyclic:n,stateObj:i,promisesData:d,resolvingTypesonPromise:l,awaitingTypesonPromise:ho(t,uo)},{type:a}))}:null;if(["string","boolean","number","undefined"].includes(w))return void 0===t||Number.isNaN(t)||t===Number.NEGATIVE_INFINITY||t===Number.POSITIVE_INFINITY||0===t?(m=i.replaced?t:h(e,t,i,d,!1,l,v))!==t&&(y={replaced:m}):m=t,v&&v(),m;if(null===t)return v&&v(),t;if(n&&!i.iterateIn&&!i.iterateUnsetNumeric&&t&&"object"===co(t)){var b=s.indexOf(t);if(-1!==b)return a[e]="#",v&&v({cyclicKeypath:c[b]}),"#"+c[b];!0===n&&(s.push(t),c.push(e))}var k,A=yo(t),S=Po(t),_=(A||S)&&(!o.plainObjectReplacers.length||i.replaced)||i.iterateIn?t:h(e,t,i,d,A||S,null,v);if(_!==t?(m=_,y={replaced:_}):""===e&&ho(t,uo)?(d.push([e,t,n,i,void 0,void 0,i.type]),m=t):S&&"object"!==i.iterateIn||"array"===i.iterateIn?(k=new Array(t.length),y={clone:k}):(["function","symbol"].includes(co(t))||"toJSON"in t||ho(t,uo)||ho(t,Promise)||ho(t,ArrayBuffer))&&!A&&"object"!==i.iterateIn?m=t:(k={},i.addLength&&(k.length=t.length),y={clone:k}),v&&v(),r.iterateNone)return null!=k?k:m;if(!k)return m;if(i.iterateIn){var E=function(o){var r={ownKeys:To(t,o)};g(i,r,(function(){var r=e+(e?".":"")+bo(o),a=f(r,t[o],Boolean(n),i,d,l);ho(a,uo)?d.push([r,a,Boolean(n),i,k,o,i.type]):void 0!==a&&(k[o]=a)}))};for(var I in t)E(I);v&&v({endIterateIn:!0,end:!0})}else Io(t).forEach((function(o){var r=e+(e?".":"")+bo(o);g(i,{ownKeys:!0},(function(){var e=f(r,t[o],Boolean(n),i,d,l);ho(e,uo)?d.push([r,e,Boolean(n),i,k,o,i.type]):void 0!==e&&(k[o]=e)}))})),v&&v({endIterateOwn:!0,end:!0});if(i.iterateUnsetNumeric){for(var T=t.length,P=function(o){if(!(o in t)){var r="".concat(e).concat(e?".":"").concat(String(o));g(i,{ownKeys:!1},(function(){var e=f(r,void 0,Boolean(n),i,d,l);ho(e,uo)?d.push([r,e,Boolean(n),i,k,o,i.type]):void 0!==e&&(k[o]=e)}))}},x=0;x<T;x++)P(x);v&&v({endIterateUnsetNumeric:!0,end:!0})}return k},h=function(e,t,n,r,s,c,d){for(var u=s?o.plainObjectReplacers:o.nonplainObjectReplacers,p=u.length;p--;){var m=u[p];if(m.test(t,n)){var g=m.type;if(o.revivers[g]){var h=a[e];a[e]=h?[g].concat(h):g}if(Object.assign(n,{type:g,replaced:!0}),(i||!m.replaceAsync)&&!m.replace)return d&&d({typeDetected:!0}),f(e,t,l&&"readonly",n,r,c,g);d&&d({replacing:!0});var y=void 0;if(i||!m.replaceAsync){if(void 0===m.replace)throw new TypeError("Missing replacer");y=m.replace(t,n)}else y=m.replaceAsync(t,n);return f(e,y,l&&"readonly",n,r,c,g)}}return t},y=f("",e,l,null!=t?t:{},d);if(d.length)return i&&r.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(m(y,d)).then(p);if(!i&&r.throwOnBadSyncType)throw new TypeError("Async method requested but sync result obtained");return r.stringification&&i?[p(y)]:i?p(y):Promise.resolve(p(y))}},{key:"encapsulateSync",value:function(e,t,n){return this.encapsulate(e,t,io(io({throwOnBadSyncType:!0},n),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(e,t,n){return this.encapsulate(e,t,io(io({throwOnBadSyncType:!0},n),{},{sync:!1}))}},{key:"revive",value:function(e,t){var n=this,o=io(io({sync:!0},this.options),t),r=o.sync;function i(e){if(r)return e;if(o.throwOnBadSyncType)throw new TypeError("Async method requested but sync result obtained");return Promise.resolve(e)}if(!e||"object"!==co(e)||Array.isArray(e))return i(e);var a=e.$types;if(!0===a)return i(e.$);if(!a||"object"!==co(a)||Array.isArray(a))return i(e);var s=[],c={},d=!0;a.$&&yo(a.$)&&(e=e.$,a=a.$,d=!1);var l=function(e,t){var o,i=ao(null!==(o=n.revivers[e])&&void 0!==o?o:[],1)[0];if(!i)throw new Error("Unregistered type: "+e);if(r&&!("revive"in i))return t;if(!r&&i.reviveAsync)return i.reviveAsync(t,c);if(i.revive)return i.revive(t,c);throw new Error("Missing reviver")},u=[];function p(e){return ho(e,Lo)?void 0:e}var m,g=function(){var t=[];if(!a)throw new Error("Found bad `types`");if(Object.entries(a).forEach((function(e){var o=ao(e,2),r=o[0],i=o[1];"#"!==i&&[].concat(i).forEach((function(e){var o;ao(null!==(o=n.revivers[e])&&void 0!==o?o:[null,{}],2)[1].plain&&(t.push({keypath:r,type:e}),delete a[r])}))})),t.length)return t.sort(Oo),t.reduce((function t(n,o){var r=o.keypath,i=o.type;if(go(n))return n.then((function(e){return t(e,{keypath:r,type:i})}));var a=Ao(e,r);if(ho(a=l(i,a),uo))return a.then((function(t){var n=So(e,r,t);n===t&&(e=n)}));var s=So(e,r,a);s===a&&(e=s)}),void 0)}();return ho(g,uo)?m=g.then((function(){return e})):(m=function e(t,n,o,r,i){if(!d||"$types"!==t){var c=a[t],p=Po(n);if(p||yo(n)){var m=p?new Array(n.length):{};for(Io(n).forEach((function(r){var i=e(t+(t?".":"")+bo(r),n[r],null!=o?o:m,m,r),a=function(e){return ho(e,Lo)?m[r]=void 0:void 0!==e&&(m[r]=e),e};ho(i,uo)?u.push(i.then((function(e){return a(e)}))):a(i)})),n=m;s.length;){var g=ao(s[0],4),f=g[0],h=g[1],y=g[2],w=g[3],v=Ao(f,h);if(void 0===v)break;y[w]=v,s.splice(0,1)}}if(!c)return n;if("#"===c){var b=Ao(o,n.slice(1));return void 0===b&&s.push([o,n.slice(1),r,i]),b}return[].concat(c).reduce((function e(t,n){if(ho(t,uo))return t.then((function(t){return e(t,n)}));if("string"!=typeof n)throw new TypeError("Bad type JSON");return l(n,t)}),n)}}("",e,null),u.length&&(m=uo.resolve(m).then((function(e){return uo.all([e].concat(u))})).then((function(e){return ao(e,1)[0]})))),go(m)?r&&o.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():ho(m,uo)?m.p.then(p):m:!r&&o.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():r?p(m):Promise.resolve(p(m))}},{key:"reviveSync",value:function(e,t){return this.revive(e,io(io({throwOnBadSyncType:!0},t),{},{sync:!0}))}},{key:"reviveAsync",value:function(e,t){return this.revive(e,io(io({throwOnBadSyncType:!0},t),{},{sync:!1}))}},{key:"register",value:function(e,t){var n=this,o=null!=t?t:{},r=function(e){Po(e)?e.forEach((function(e){r(e)})):Io(e).forEach((function(t){var r;if("#"===t)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(Mo.includes(t))throw new TypeError("Plain JSON object types are reserved as type names");var i=e[t],a=i&&"function"!=typeof i&&!Array.isArray(i)&&i.testPlainObjects?n.plainObjectReplacers:n.nonplainObjectReplacers,s=a.filter((function(e){return e.type===t}));if(s.length&&(a.splice(a.indexOf(s[0]),1),delete n.revivers[t],delete n.types[t]),"function"==typeof i){var c=i;i={test:function(e){return e&&e.constructor===c},replace:function(e){return io({},e)},revive:function(e){return Object.assign(Object.create(c.prototype),e)}}}else if(Po(i)){var d=ao(i,3);i={test:d[0],replace:d[1],revive:d[2]}}if(null!==(r=i)&&void 0!==r&&r.test){var l={type:t,test:i.test.bind(i)};i.replace&&(l.replace=i.replace.bind(i)),i.replaceAsync&&(l.replaceAsync=i.replaceAsync.bind(i));var u="number"==typeof o.fallback?o.fallback:o.fallback?0:Number.POSITIVE_INFINITY;if(i.testPlainObjects?n.plainObjectReplacers.splice(u,0,l):n.nonplainObjectReplacers.splice(u,0,l),i.revive||i.reviveAsync){var p={};i.revive&&(p.revive=i.revive.bind(i)),i.reviveAsync&&(p.reviveAsync=i.reviveAsync.bind(i)),n.revivers[t]=[p,{plain:i.testPlainObjects}]}n.types[t]=i}}))};return[].concat(e).forEach((function(e){r(e)})),this}}]),Lo=no((function e(){to(this,e)}));Lo.__typeson__type__="TypesonUndefined";for(var Mo=["null","boolean","number","string","array","object"],Bo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",No=new Uint8Array(256),Ro=0;Ro<64;Ro++)No[Bo.codePointAt(Ro)]=Ro;var jo=function(e,t,n){null==n&&(n=e.byteLength);for(var o=new Uint8Array(e,0,n),r=o.length,i="",a=0;a<r;a+=3)i+=Bo[o[a]>>2],i+=Bo[(3&o[a])<<4|o[a+1]>>4],i+=Bo[(15&o[a+1])<<2|o[a+2]>>6],i+=Bo[63&o[a+2]];return r%3==2?i=i.slice(0,-1)+"=":r%3==1&&(i=i.slice(0,-2)+"=="),i},Vo=function(e,t){var n=e.length;if(n%4)throw new Error("Bad base64 length: not divisible by four");var o,r,i,a,s=.75*e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);for(var d=new ArrayBuffer(s,t),l=new Uint8Array(d),u=0;u<n;u+=4)o=No[e.codePointAt(u)],r=No[e.codePointAt(u+1)],i=No[e.codePointAt(u+2)],a=No[e.codePointAt(u+3)],l[c++]=o<<2|r>>4,l[c++]=(15&r)<<4|i>>2,l[c++]=(3&i)<<6|63&a;return d};const Go={arraybuffer:{test:e=>"ArrayBuffer"===fo(e),replace(e,t){t.buffers||(t.buffers=[]);const n=t.buffers.indexOf(e);return-1!==n?{index:n}:(t.buffers.push(e),{s:jo(e),maxByteLength:e.maxByteLength,resizable:e.resizable})},revive(e,t){if(t.buffers||(t.buffers=[]),Object.hasOwn(e,"index"))return t.buffers[e.index];const n=Vo(e.s,e.resizable?{maxByteLength:e.maxByteLength}:void 0);return t.buffers.push(n),n}}},Fo={bigintObject:{test:e=>"object"==typeof e&&ho(e,BigInt),replace:String,revive:e=>new Object(BigInt(e))}},Uo={bigint:{test:e=>"bigint"==typeof e,replace:String,revive:e=>BigInt(e)}};function Ko(e){return new Uint8Array(e).reduce(((e,t)=>e+String.fromCodePoint(t)),"")}function zo(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}const Ho={blob:{test:e=>"Blob"===fo(e),replace(e){const t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),200!==t.status&&0!==t.status)throw new Error("Bad Blob access: "+t.status);return{type:e.type,stringContents:t.responseText}},revive(e){const{type:t,stringContents:n}=e;return new Blob([zo(n)],{type:t})},replaceAsync:e=>new uo(((t,n)=>{const o=new FileReader;o.addEventListener("load",(()=>{t({type:e.type,stringContents:Ko(o.result)})})),o.addEventListener("error",(()=>{n(o.error)})),o.readAsArrayBuffer(e)}))}};const qo={cryptokey:{test:e=>"CryptoKey"===fo(e)&&e.extractable,replaceAsync:e=>new uo((async(t,n)=>{let o;try{o=await crypto.subtle.exportKey("jwk",e)}catch(t){return void n(t)}t({jwk:o,algorithm:e.algorithm,usages:e.usages})})),revive(e){const{jwk:t,algorithm:n,usages:o}=e;return crypto.subtle.importKey("jwk",t,n,!0,o)}}},Yo={dataview:{test:e=>"DataView"===fo(e),replace({buffer:e,byteOffset:t,byteLength:n},o){o.buffers||(o.buffers=[]);const r=o.buffers.indexOf(e);return-1!==r?{index:r,byteOffset:t,byteLength:n}:(o.buffers.push(e),{encoded:jo(e),maxByteLength:e.maxByteLength,resizable:e.resizable,byteOffset:t,byteLength:n})},revive(e,t){t.buffers||(t.buffers=[]);const{byteOffset:n,byteLength:o,encoded:r,index:i,maxByteLength:a,resizable:s}=e;let c;return"index"in e?c=t.buffers[i]:(c=Vo(r,s?{maxByteLength:a}:a),t.buffers.push(c)),new DataView(c,n,o)}}},Wo={date:{test:e=>"Date"===fo(e),replace(e){const t=e.getTime();return Number.isNaN(t)?"NaN":t},revive:e=>"NaN"===e?new Date(Number.NaN):new Date(e)}},$o={domexception:{test:e=>"DOMException"===fo(e),replace:e=>({name:e.name,message:e.message}),revive:({message:e,name:t})=>new DOMException(e,t)}},Jo={};function Qo(e){Jo[e.name.toLowerCase()]={test:t=>fo(t)===e.name,replace:e=>e.is2D?{a:e.a,b:e.b,c:e.c,d:e.d,e:e.e,f:e.f}:{m11:e.m11,m12:e.m12,m13:e.m13,m14:e.m14,m21:e.m21,m22:e.m22,m23:e.m23,m24:e.m24,m31:e.m31,m32:e.m32,m33:e.m33,m34:e.m34,m41:e.m41,m42:e.m42,m43:e.m43,m44:e.m44},revive:t=>Object.hasOwn(t,"a")?new e([t.a,t.b,t.c,t.d,t.e,t.f]):new e([t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44])}}"undefined"!=typeof DOMMatrix&&Qo(DOMMatrix),"undefined"!=typeof DOMMatrixReadOnly&&Qo(DOMMatrixReadOnly);const Zo={};function Xo(e){Zo[e.name.toLowerCase()]={test:t=>fo(t)===e.name,replace:e=>({x:e.x,y:e.y,z:e.z,w:e.w}),revive:({x:t,y:n,z:o,w:r})=>new e(t,n,o,r)}}"undefined"!=typeof DOMPoint&&Xo(DOMPoint),"undefined"!=typeof DOMPointReadOnly&&Xo(DOMPointReadOnly);const er={domquad:{test:e=>"DOMQuad"===fo(e),replace:e=>({p1:e.p1,p2:e.p2,p3:e.p3,p4:e.p4}),revive:({p1:e,p2:t,p3:n,p4:o})=>new DOMQuad(e,t,n,o)}},tr={};function nr(e){tr[e.name.toLowerCase()]={test:t=>fo(t)===e.name,replace:e=>({x:e.x,y:e.y,width:e.width,height:e.height}),revive:({x:t,y:n,width:o,height:r})=>new e(t,n,o,r)}}"undefined"!=typeof DOMRect&&nr(DOMRect),"undefined"!=typeof DOMRectReadOnly&&nr(DOMRectReadOnly);const or={error:{test:e=>"Error"===fo(e),replace:({name:e,message:t,cause:n,stack:o,fileName:r,lineNumber:i,columnNumber:a})=>({name:e,message:t,cause:n,stack:o,fileName:r,lineNumber:i,columnNumber:a}),revive(e){const t=new Error(e.message);return t.name=e.name,t.cause=e.cause,t.stack=e.stack,t.fileName=e.fileName,t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}}},rr={};function ir(e){rr[e.name.toLowerCase()]={test:t=>ho(t,e),replace:({name:e,message:t,cause:n,stack:o,fileName:r,lineNumber:i,columnNumber:a,errors:s})=>({name:e,message:t,cause:n,stack:o,fileName:r,lineNumber:i,columnNumber:a,errors:s}),revive(t){const n="undefined"!=typeof AggregateError&&e===AggregateError?new e(t.errors,t.message):new e(t.message);return n.name=t.name,n.cause=t.cause,n.stack=t.stack,n.fileName=t.fileName,n.lineNumber=t.lineNumber,n.columnNumber=t.columnNumber,n}}}[TypeError,RangeError,SyntaxError,ReferenceError,EvalError,URIError].forEach((e=>ir(e))),"undefined"!=typeof AggregateError&&ir(AggregateError),"function"==typeof InternalError&&ir(InternalError);const ar={file:{test:e=>"File"===fo(e),replace(e){const t=new XMLHttpRequest;if(t.overrideMimeType("text/plain; charset=x-user-defined"),t.open("GET",URL.createObjectURL(e),!1),t.send(),200!==t.status&&0!==t.status)throw new Error("Bad File access: "+t.status);return{type:e.type,stringContents:t.responseText,name:e.name,lastModified:e.lastModified}},revive:({name:e,type:t,stringContents:n,lastModified:o})=>new File([zo(n)],e,{type:t,lastModified:o}),replaceAsync:e=>new uo((function(t,n){const o=new FileReader;o.addEventListener("load",(function(){t({type:e.type,stringContents:Ko(o.result),name:e.name,lastModified:e.lastModified})})),o.addEventListener("error",(function(){n(o.error)})),o.readAsArrayBuffer(e)}))}},sr={file:ar.file,filelist:{test:e=>"FileList"===fo(e),replace(e){const t=[];for(let n=0;n<e.length;n++)t[n]=e.item(n);return t},revive(e){class t{constructor(){this._files=arguments[0],this.length=this._files.length}item(e){return this._files[e]}get[Symbol.toStringTag](){return"FileList"}}return new t(e)}}},cr={imagebitmap:{test:e=>"ImageBitmap"===fo(e)||e&&e.dataset&&"ImageBitmap"===e.dataset.toStringTag,replace(e){const t=document.createElement("canvas");return t.getContext("2d").drawImage(e,0,0),{width:e.width,height:e.height,dataURL:t.toDataURL()}},revive(e){const t="undefined"==typeof OffscreenCanvas?document.createElement("canvas"):new OffscreenCanvas(e.width,e.height),n=t.getContext("2d"),o=document.createElement("img");return o.addEventListener("load",(function(){n.drawImage(o,0,0)})),o.src=e.dataURL,"undefined"==typeof OffscreenCanvas?t:t.transferToImageBitmap()},reviveAsync(e){const t=document.createElement("canvas"),n=t.getContext("2d"),o=document.createElement("img");return o.addEventListener("load",(function(){n.drawImage(o,0,0)})),o.src=e.dataURL,new uo((async(e,n)=>{try{e(await createImageBitmap(t))}catch(e){n(e)}}))}}},dr={imagedata:{test:e=>"ImageData"===fo(e),replace:e=>({array:[...e.data],width:e.width,height:e.height}),revive:e=>new ImageData(new Uint8ClampedArray(e.array),e.width,e.height)}},lr={infinity:{test:e=>e===Number.POSITIVE_INFINITY,replace:()=>"Infinity",revive:()=>Number.POSITIVE_INFINITY}},ur={test:e=>ho(e,Intl.Collator),replace:e=>e.resolvedOptions(),revive:e=>new Intl.Collator(e.locale,e)},pr={IntlCollator:ur,IntlDateTimeFormat:{test:e=>ho(e,Intl.DateTimeFormat),replace:e=>e.resolvedOptions(),revive:e=>new Intl.DateTimeFormat(e.locale,e)},IntlNumberFormat:{test:e=>ho(e,Intl.NumberFormat),replace:e=>e.resolvedOptions(),revive:e=>new Intl.NumberFormat(e.locale,e)}},mr={map:{test:e=>"Map"===fo(e),replace:e=>[...e.entries()],revive:e=>new Map(e)}},gr={nan:{test:e=>Number.isNaN(e),replace:()=>"NaN",revive:()=>Number.NaN}},fr={negativeInfinity:{test:e=>e===Number.NEGATIVE_INFINITY,replace:()=>"-Infinity",revive:()=>Number.NEGATIVE_INFINITY}},hr={negativeZero:{test:e=>Object.is(e,-0),replace:()=>0,revive:()=>-0}},yr={StringObject:{test:e=>"String"===fo(e)&&"object"==typeof e,replace:String,revive:e=>new String(e)},BooleanObject:{test:e=>"Boolean"===fo(e)&&"object"==typeof e,replace:e=>e.valueOf(),revive:e=>new Boolean(e)},NumberObject:{test:e=>"Number"===fo(e)&&"object"==typeof e,replace:Number,revive:e=>new Number(e)}},wr={regexp:{test:e=>"RegExp"===fo(e),replace:e=>({source:e.source,flags:(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.sticky?"y":"")+(e.unicode?"u":"")+(e.unicodeSets?"v":"")+(e.hasIndices?"d":"")+(e.dotAll?"s":"")}),revive:({source:e,flags:t})=>new RegExp(e,t)}},vr={set:{test:e=>"Set"===fo(e),replace:e=>[...e.values()],revive:e=>new Set(e)}},br={};"function"==typeof Int8Array&&[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,..."function"==typeof BigInt64Array?[BigInt64Array,BigUint64Array]:[]].forEach((e=>function(e){const t=e.name;br[t.toLowerCase()]={test:e=>fo(e)===t,replace:e=>(0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e:e.slice(0)).buffer,revive:t=>"ArrayBuffer"===fo(t)?new e(t):t}}(e)));const kr={};"function"==typeof Int8Array&&[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,..."function"==typeof BigInt64Array?[BigInt64Array,BigUint64Array]:[]].forEach((e=>function(e){const t=e.name;kr[t.toLowerCase()]={test:e=>fo(e)===t,replace({buffer:e,byteOffset:t,length:n},o){o.buffers||(o.buffers=[]);const r=o.buffers.indexOf(e);return-1!==r?{index:r,byteOffset:t,length:n}:(o.buffers.push(e),{maxByteLength:e.maxByteLength,resizable:e.resizable,encoded:jo(e),byteOffset:t,length:n})},revive(t,n){n.buffers||(n.buffers=[]);const{byteOffset:o,length:r,encoded:i,index:a,maxByteLength:s,resizable:c}=t;let d;return"index"in t?d=n.buffers[a]:(d=Vo(i,c?{maxByteLength:s}:void 0),n.buffers.push(d)),new e(d,o,r)}}}(e)));const Ar={undef:{test:(e,t)=>void 0===e&&(t.ownKeys||!("ownKeys"in t)),replace:()=>0,revive:()=>new Lo}},Sr={userObject:{test:e=>wo(e),replace:e=>({...e}),revive:e=>e}},_r=[{arrayNonindexKeys:{testPlainObjects:!0,test:(e,t)=>!!Array.isArray(e)&&(Object.keys(e).some((e=>String(Number.parseInt(e))!==e))&&(t.iterateIn="object",t.addLength=!0),!0),replace:(e,t)=>(t.iterateUnsetNumeric=!0,e),revive(e){if(Array.isArray(e))return e;const t=[];return Object.entries(e).forEach((([e,n])=>{t[e]=n})),t}}},{sparseUndefined:{test:(e,t)=>void 0===e&&!1===t.ownKeys,replace:()=>0,revive(){}}}],Er=[gr,lr,fr,hr],Ir=([Ar,_r,yr,Er,Wo,or,rr,wr].concat("function"==typeof Map?mr:[],"function"==typeof Set?vr:[],"function"==typeof ArrayBuffer?Go:[],"function"==typeof Uint8Array?kr:[],"function"==typeof DataView?Yo:[],"undefined"!=typeof Intl?pr:[],"undefined"!=typeof BigInt?[Uo,Fo]:[]),[Sr,Ar,_r,yr,Er,Wo,wr,dr,cr,ar,sr,Ho,or,rr].concat("function"==typeof Map?mr:[],"function"==typeof Set?vr:[],"function"==typeof ArrayBuffer?Go:[],"function"==typeof Uint8Array?kr:[],"function"==typeof DataView?Yo:[],"undefined"!=typeof crypto?qo:[],"undefined"!=typeof BigInt?[Uo,Fo]:[],"undefined"!=typeof DOMException?$o:[],"undefined"!=typeof DOMRect?tr:[],"undefined"!=typeof DOMPoint?Zo:[],"undefined"!=typeof DOMQuad?er:[],"undefined"!=typeof DOMMatrix?Jo:[]));Ir.concat({checkDataCloneException:{test(e){const t={}.toString.call(e).slice(8,-1);if(["symbol","function"].includes(typeof e)||["Arguments","Module","Promise","WeakMap","WeakSet","Event","MessageChannel"].includes(t)||e&&"object"==typeof e&&"number"==typeof e.nodeType&&"function"==typeof e.insertBefore)throw new DOMException("The object cannot be cloned.","DataCloneError");return!1}}});function Tr(e,t=300,n=1e3){let o,r;return function(...i){const a=this,s=()=>{clearTimeout(o),clearTimeout(r),o=void 0,r=void 0,e.apply(a,i)};clearTimeout(o),o=setTimeout(s,t),r||(r=setTimeout(s,n))}}function Pr(e,t,n,o,r,i){return Lr(function(e,t){return e<<t|e>>>32-t}(Lr(Lr(t,e),Lr(o,i)),r),n)}function xr(e,t,n,o,r,i,a){return Pr(t&n|~t&o,e,t,r,i,a)}function Cr(e,t,n,o,r,i,a){return Pr(t&o|n&~o,e,t,r,i,a)}function Or(e,t,n,o,r,i,a){return Pr(t^n^o,e,t,r,i,a)}function Dr(e,t,n,o,r,i,a){return Pr(n^(t|~o),e,t,r,i,a)}function Lr(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}let Mr,Br="";try{const e=window.location.href.split("?")[0].replace(/\/[^/]*$/,"");Br=function(e){const t=function(e){for(var t,n="0123456789ABCDEF",o="",r=0;r<e.length;r++)t=e.charCodeAt(r),o+=n.charAt(t>>>4&15)+n.charAt(15&t);return o}(function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}(function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,o=-271733879,r=-1732584194,i=271733878,a=0;a<e.length;a+=16){const t=n,s=o,c=r,d=i;o=Dr(o=Dr(o=Dr(o=Dr(o=Or(o=Or(o=Or(o=Or(o=Cr(o=Cr(o=Cr(o=Cr(o=xr(o=xr(o=xr(o=xr(o,r=xr(r,i=xr(i,n=xr(n,o,r,i,e[a+0],7,-680876936),o,r,e[a+1],12,-389564586),n,o,e[a+2],17,606105819),i,n,e[a+3],22,-1044525330),r=xr(r,i=xr(i,n=xr(n,o,r,i,e[a+4],7,-176418897),o,r,e[a+5],12,1200080426),n,o,e[a+6],17,-1473231341),i,n,e[a+7],22,-45705983),r=xr(r,i=xr(i,n=xr(n,o,r,i,e[a+8],7,1770035416),o,r,e[a+9],12,-1958414417),n,o,e[a+10],17,-42063),i,n,e[a+11],22,-1990404162),r=xr(r,i=xr(i,n=xr(n,o,r,i,e[a+12],7,1804603682),o,r,e[a+13],12,-40341101),n,o,e[a+14],17,-1502002290),i,n,e[a+15],22,1236535329),r=Cr(r,i=Cr(i,n=Cr(n,o,r,i,e[a+1],5,-165796510),o,r,e[a+6],9,-1069501632),n,o,e[a+11],14,643717713),i,n,e[a+0],20,-373897302),r=Cr(r,i=Cr(i,n=Cr(n,o,r,i,e[a+5],5,-701558691),o,r,e[a+10],9,38016083),n,o,e[a+15],14,-660478335),i,n,e[a+4],20,-405537848),r=Cr(r,i=Cr(i,n=Cr(n,o,r,i,e[a+9],5,568446438),o,r,e[a+14],9,-1019803690),n,o,e[a+3],14,-187363961),i,n,e[a+8],20,1163531501),r=Cr(r,i=Cr(i,n=Cr(n,o,r,i,e[a+13],5,-1444681467),o,r,e[a+2],9,-51403784),n,o,e[a+7],14,1735328473),i,n,e[a+12],20,-1926607734),r=Or(r,i=Or(i,n=Or(n,o,r,i,e[a+5],4,-378558),o,r,e[a+8],11,-2022574463),n,o,e[a+11],16,1839030562),i,n,e[a+14],23,-35309556),r=Or(r,i=Or(i,n=Or(n,o,r,i,e[a+1],4,-1530992060),o,r,e[a+4],11,1272893353),n,o,e[a+7],16,-155497632),i,n,e[a+10],23,-1094730640),r=Or(r,i=Or(i,n=Or(n,o,r,i,e[a+13],4,681279174),o,r,e[a+0],11,-358537222),n,o,e[a+3],16,-722521979),i,n,e[a+6],23,76029189),r=Or(r,i=Or(i,n=Or(n,o,r,i,e[a+9],4,-640364487),o,r,e[a+12],11,-421815835),n,o,e[a+15],16,530742520),i,n,e[a+2],23,-995338651),r=Dr(r,i=Dr(i,n=Dr(n,o,r,i,e[a+0],6,-198630844),o,r,e[a+7],10,1126891415),n,o,e[a+14],15,-1416354905),i,n,e[a+5],21,-57434055),r=Dr(r,i=Dr(i,n=Dr(n,o,r,i,e[a+12],6,1700485571),o,r,e[a+3],10,-1894986606),n,o,e[a+10],15,-1051523),i,n,e[a+1],21,-2054922799),r=Dr(r,i=Dr(i,n=Dr(n,o,r,i,e[a+8],6,1873313359),o,r,e[a+15],10,-30611744),n,o,e[a+6],15,-1560198380),i,n,e[a+13],21,1309151649),r=Dr(r,i=Dr(i,n=Dr(n,o,r,i,e[a+4],6,-145523070),o,r,e[a+11],10,-1120210379),n,o,e[a+2],15,718787259),i,n,e[a+9],21,-343485551),n=Lr(n,t),o=Lr(o,s),r=Lr(r,c),i=Lr(i,d)}return Array(n,o,r,i)}(function(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}(e),8*e.length)));return t.toLowerCase()}(e),Mr=localStorage.getItem("savegame_idbfs_hash")}catch{}function Nr(e){if(!Mr)return e;try{return e.replace(Br,Mr)}catch{return e}}const Rr=5e3,jr=15e3,Vr=[];let Gr=Date.now();async function Fr(){if(!("databases"in indexedDB))return console.warn("%cPOKI_SAVEGAME:%c indexedDB.databases() is not supported in this browser.","font-weight: bold",""),[];const e=await indexedDB.databases();0===e.length&&(console.info("%cPOKI_SAVEGAME:%c No databases found, using IDBDatabaseInfos","font-weight: bold","",Vr.map((e=>e.name))),e.push(...Vr));const t=[];e.forEach((async e=>{var n;(n=e.name)&&"UnityCache"!==n&&t.push(function(e,t){return new Promise(((n,o)=>{if(!e)return void o(new Error("Cannot export database without a name"));const r=indexedDB.open(e,t);r.onsuccess=t=>{const o=t.target.result,r=Array.from(o.objectStoreNames),i={name:e,version:o.version,objectStores:[]};let a=r.length;if(0===a)return o.close(),void n(i);r.forEach((t=>{const r=o.transaction(t,"readonly").objectStore(t),s=Array.from(r.indexNames),c=[],d={name:t,keyPath:r.keyPath,autoIncrement:r.autoIncrement,indexes:[],data:[]};s.forEach((e=>{const t=r.index(e),n={name:e,keyPath:t.keyPath,unique:t.unique,multiEntry:t.multiEntry};d.indexes.push(n)}));const l=r.openCursor();l.onerror=()=>{console.warn(`%cPOKI_SAVEGAME:%c error fetching data from object store ${t}`,"font-weight: bold",""),a--,0===a&&(o.close(),n(i))},l.onsuccess=r=>{const s=r.target;if(!s)return;const l=s.result;if(null===l)return d.data=c,i.objectStores.push(d),a--,void(0===a&&(o.close(),n(i)));!function(e,t,n){return"string"==typeof n&&!("/data"!==e||"FILE_DATA"!==t||!n.endsWith(".zip")&&!n.includes("liveupdate.arc"))}(e,t,l.primaryKey)?c.push({k:Nr(l.primaryKey),v:l.value}):console.info(`%cPOKI_SAVEGAME:%c Skipping row ${l.primaryKey}`,"font-weight: bold",""),l.continue()}}))},r.onerror=e=>{console.warn("%cPOKI_SAVEGAME:%c error opening database","font-weight: bold","",e.target.error),o(e.target.error)}}))}(e.name||"",e.version))}));const n=await Promise.allSettled(t);return n?.map((e=>"fulfilled"===e.status?e.value:null))}const Ur="none",Kr="requesting";class zr{runningAsInGameHoistingSDK=!0;#x={};#C=$n.adTiming;#O=new MutationObserver(this.mutationObserved.bind(this));#D=Ur;#L;#M=!1;init=e=>{if(this.#M)return;this.#M=!0;const{onReady:t=null}=e;Xn(),V.cloudSaveGames&&function(){console.info("%cPOKI_SAVEGAME:%c setupCloudSaveExports","font-weight: bold","");const e=(new Do).register([Ir]),t=()=>{const t=Date.now(),n=Math.ceil((t-Gr)/1e3);Gr=t;try{const t={};Object.keys(localStorage).forEach((e=>{const n=localStorage.getItem(e);null!==n&&(t[e]=n)})),Fr().then((o=>{const r={ls:JSON.stringify(t),idb:e.stringify(o),playtimeInterval:n};console.info("%cPOKI_SAVEGAME:%c Sending export","font-weight: bold","",r),window?.top?.postMessage({type:"mutateSaveGame",content:r},"*")}))}catch(e){console.warn("%cPOKI_SAVEGAME:%c savegame error","font-weight: bold","",e)}};function n(e,t){const n={name:e,version:t};Vr.find((n=>n.name===e&&n.version===t))||Vr.push(n)}Zn(`(${function(){window.addEventListener("storage",(()=>{window?.parent?.postMessage({type:"LocalStorageChanged"},"*")}))}.toString()})();`);const o=Tr((()=>{console.info("%cPOKI_SAVEGAME:%c Local Storage changed","font-weight: bold",""),t()}),Rr,jr);window.addEventListener("message",(async e=>{"LocalStorageChanged"===e?.data?.type&&o()}));const r=Tr((()=>{console.info("%cPOKI_SAVEGAME:%c IDB Pulse","font-weight: bold",""),t()}),Rr,jr),i=window.IDBObjectStore.prototype.put;window.IDBObjectStore.prototype.put=function(...e){n(this.transaction.db.name,this.transaction.db.version);const t=i.apply(this,e);return console.info("%cPOKI_SAVEGAME:%c IDB Put","font-weight: bold","",e),r(),t};const a=window.IDBObjectStore.prototype.add;window.IDBObjectStore.prototype.add=function(...e){n(this.transaction.db.name,this.transaction.db.version);const t=a.apply(this,e);return console.info("%cPOKI_SAVEGAME:%c IDB add","font-weight: bold","",e),r(),t};const s=window.IDBObjectStore.prototype.delete;window.IDBObjectStore.prototype.delete=function(...e){n(this.transaction.db.name,this.transaction.db.version);const t=s.apply(this,e);return console.info("%cPOKI_SAVEGAME:%c IDB delete","font-weight: bold","",e),r(),t};const c=window.IDBObjectStore.prototype.clear;window.IDBObjectStore.prototype.clear=function(...e){n(this.transaction.db.name,this.transaction.db.version);const t=c.apply(this,e);return console.info("%cPOKI_SAVEGAME:%c IDB clear","font-weight: bold","",e),r(),t}}(),V.kioskMode&&document.addEventListener("keydown",(e=>{"Escape"===e.key&&this.postSDKMessage("keydownEscape")}));const n=()=>{let e,n=1;this.#x.playgroundInit=()=>{clearTimeout(e),t?.()};const o=()=>{this.postSDKMessage("adTiming",{adTiming:this.#C,specialConditions:this.#L}),n++,e=setTimeout(o,100*n)};e=setTimeout(o,100*n)};if(V.forceAd)return this.#C={preroll:!0,timeBetweenAds:12e4,timePerTry:7e3,startAdsAfter:0},void n();if(F.debug)return void n();Qn().then((e=>{if(this.#C=e?.adTiming||$n.adTiming,this.#L=e?.specialConditions||[],O()||D()?this.#C={startAdsAfter:36e4,timeBetweenAds:36e4}:this.#C={startAdsAfter:12e4,timeBetweenAds:18e4},n(),e)try{kn(e)}catch(e){console.warn("%cPOKI:%c error in maybeStartPlaytest","font-weight: bold","",e)}})).catch((()=>{n()}))};forcePreroll(){this.postSDKMessage("forcePreroll")}startStartAdsAfterTimer(){this.postSDKMessage("startStartAdsAfterTimer")}isAdBlocked=()=>!1;muteAd(){this.postSDKMessage("muteAd")}setVolume(e){this.postSDKMessage("setVolume",{volume:e||1})}requestAd(t){const{onStart:n,onFinish:o,position:r,customCriteria:i}=t,a=xn();if(this.#D===Ur)this.#D=Kr,this.#x[a]={position:r,onStart:()=>{if(n&&"function"==typeof n)try{n()}catch(e){console.error("%cPOKI:%c error in onStart callback","font-weight: bold","",e)}},onFinish:e=>{if(o&&"function"==typeof o)try{o({rewardAllowed:e})}catch(e){console.error("%cPOKI:%c error in onFinish callback","font-weight: bold","",e)}}},this.postSDKMessage("requestVideoAd",{position:r,customCriteria:i,opportunityId:a});else if(o)try{r===e.ads.position.rewarded?o({rewardAllowed:!1}):o()}catch(e){console.error("%cPOKI:%c error in onFinish callback","font-weight: bold","",e)}}displayAd(e){if(V.kioskMode)return!1;const{container:t,size:n,opportunityId:o,onCanDestroy:r,onDisplayRendered:i}=e;if(!t)return console.error("%cPOKI:%c PokiSDK.displayAd() given container does not exist","font-weight: bold",""),!1;const a=t.getAttribute("data-poki-ad-container-id")||xn();this.cleanAdContainer(a),t.setAttribute("data-poki-ad-container-id",a),t.setAttribute("data-poki-opportunity-id",o);const[s,c]=n.split("x").map((e=>parseInt(e,10))),d=document.createElement("div");d.style.width=`${s}px`,d.style.height=`${c}px`,d.style.overflow="hidden",d.style.position="relative",d.style.pointerEvents="none",t.appendChild(d);const l=t.getBoundingClientRect(),u={x:l?.x||0,y:l?.y||0,w:s||0,h:c||0};return this.#x[o]={onCanDestroy:()=>{r&&"function"==typeof r&&r()},onDisplayRendered:e=>{i&&"function"==typeof i&&i(e)}},this.#O.observe(t.parentElement||document.body,{childList:!0}),this.#O.observe(t,{attributes:!0,attributeFilter:["style"]}),this.postSDKMessage("displayAd",{containerID:a,adUnitPath:Jn(n),size:e.size,opportunityId:o,duringGameplay:e.duringGameplay,location:u}),!0}destroyAd(e){if(!e)return void console.error("%cPOKI:%c PokiSDK.destroyAd() given container does not exist","font-weight: bold","");const t=e.getAttribute("data-poki-opportunity-id"),n=e.getAttribute("data-poki-ad-container-id");n&&(delete this.#x[t],this.cleanAdContainer(n),this.postSDKMessage("destroyAd",{containerID:n,opportunityId:t}))}mutationObserved(e){e.forEach((e=>{var t;"childList"===e?.type&&e.removedNodes?.forEach?.((e=>{e?.getAttribute?.("data-poki-ad-container-id")&&this.destroyAd(e)})),"attributes"===e?.type&&e?.target?.getAttribute?.("data-poki-ad-container-id")&&(t=e.target,("none"===t?.style.display||parseInt(t.style.opacity,10)<1||"hidden"===t.style.visibility)&&this.destroyAd(e.target))}))}postSDKMessage=async(t,n={})=>{G.sendMessage(e.message.sendCommand,{event:t,data:n},window.top)};handleMessageReceived=t=>{switch(t?.data?.type){case"hoist_displayAd_onDisplayRendered":{const e=t?.data?.data;if(e){const{opportunityId:t,isEmpty:n}=e;this.#x[t]?.onDisplayRendered?.(n)}break}case"hoist_displayAd_onCanDestroy":{const e=t?.data?.data;if(e){const{opportunityId:t}=e;this.#x[t]?.onCanDestroy?.()}break}case"hoist_videoAd_onStart":{const n=t?.data?.data;if(n){const{opportunityId:t}=n;if(this.#D!==Kr)return;if(!this.#x[t])return;const{onStart:o,position:r}=this.#x[t];o&&o(),z.dispatchEvent(e.playtest.startVideo,{position:r}),this.#D="playing"}break}case"hoist_videoAd_onFinish":{const n=t?.data?.data;if(n){const{opportunityId:t,rewardAllowed:o}=n;if(!this.#x[t])return;const{onFinish:r,position:i}=this.#x[t];if(this.#D===Kr){if(r)try{i===e.ads.position.rewarded?r(!!o):r()}catch(e){console.error("%cPOKI:%c error in onFinish callback","font-weight: bold","",e)}return this.#D=Ur,void delete this.#x[t]}if(r)try{r(o)}catch(e){console.error("%cPOKI:%c error in onFinish callback","font-weight: bold","",e)}z.dispatchEvent(e.playtest.stopVideo),this.#D=Ur,delete this.#x[t]}break}case"hoist_playgroundInit":this.#x.playgroundInit?.(),delete this.#x.playgroundInit;break;case"hoist_displayAd_destroy":{const e=t?.data?.data;if(e){const{containerID:t}=e;this.cleanAdContainer(t)}break}case"hoist_refocus_game":{const e=new Event("focus");window.dispatchEvent(e);break}}};cleanAdContainer=e=>{const t=document.querySelector(`*[data-poki-ad-container-id="${e}"]`);if(t){for(;t.lastChild;)t.removeChild(t.lastChild);t.removeAttribute("data-poki-opportunity-id"),t.removeAttribute("data-poki-ad-container-id")}};stopVideoAd(){}resizeVideoAd(){}setAdTimings(e){}setSpecialConditions(e){}setNrAds(e){}}const Hr=new class extends Wn{constructor(){super(new zr,!0),window.addEventListener("message",this.__monetization.handleMessageReceived)}};for(const e in Hr)e.startsWith("__")||(window.PokiSDK[e]=Hr[e])})();</script><base href="https://26749800-1dbe-11ea-a2d8-f21898135c45.poki-gdn.com/e7f92ba8-48a8-4001-8b27-95508dba83a2/index.html?country=US&amp;ccpaApplies=0&amp;url_referrer=https%3A%2F%2Fpoki.com%2F&amp;tag=pg-9b00601e7517075015f790e097620ef83abcb8c2&amp;site_id=3&amp;iso_lang=en&amp;poki_url=https%3A%2F%2Fpoki.com%2Fen%2Fg%2F2048&amp;hoist=yes&amp;nonPersonalized=n&amp;cloudsavegames=n&amp;familyFriendly=n&amp;categories=7%2C35%2C72%2C400%2C823%2C832%2C852%2C891%2C933%2C1103%2C1155&amp;game_id=26749800-1dbe-11ea-a2d8-f21898135c45&amp;game_version_id=e7f92ba8-48a8-4001-8b27-95508dba83a2&amp;inspector=0&amp;csp=1"></head>
  <body>
    <div class="cookie-notice">
      <p>
        2048 uses cookies to analyse traffic to the site and to serve ads.
        <a href="https://play2048.co/privacy.html" target="_blank" rel="noopener noreferrer">Learn More</a>
      </p>
      <a class="cookie-notice-dismiss-button">Got it</a>
    </div>

    <div class="container">
      <div class="meta">
        <div class="heading">
          <h1 class="title">2048</h1>
          <div class="scores-container">
            <div class="score-container">0</div>
            <div class="best-container">0</div>
          </div>
        </div>

        <div class="above-game">
          <a class="restart-button">New Game</a>
          <p class="game-intro">
            Join the numbers and get to the <strong>2048 tile!</strong>
          </p>
          <div class="extras">
            <p class="game-explanation">
              <strong class="important">How to play:</strong> Use your
              <strong>arrow keys</strong> to move the tiles. When two tiles with
              the same number touch, they
              <strong>merge into one!</strong>
            </p>

            <div class="footer">
              <p class="attribution">
                <span>Created</span> by
                <a href="http://gabrielecirulli.com" target="_blank">Gabriele Cirulli.</a>
              </p>

              <a href="https://play2048.co/privacy.html" target="_blank" rel="noopener noreferrer">Privacy Policy</a>
            </div>
            <div class="sharing">
              <a href="https://twitter.com/share" class="twitter-share-button" data-text="Check out 2048, a game where you join numbers to score high! #2048game" data-via="gabrielecirulli" data-url="http://git.io/2048" data-counturl="http://gabrielecirulli.github.io/2048/">Tweet</a>
              <script>
                !(function(d, s, id) {
                  var js,
                    fjs = d.getElementsByTagName(s)[0],
                    p = /^http:/.test(d.location) ? "http" : "https";
                  if (!d.getElementById(id)) {
                    js = d.createElement(s);
                    js.id = id;
                    js.src = p + "://platform.twitter.com/widgets.js";
                    fjs.parentNode.insertBefore(js, fjs);
                  }
                })(document, "script", "twitter-wjs");
              </script>

              <form class="pp-donate" action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
                <input type="hidden" name="cmd" value="_s-xclick">
                <input type="hidden" name="hosted_button_id" value="NVNPJLTBZ8AME">
                <button name="submit">
                  <img src="data:image/svg+xml; charset=utf-8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIwIDIwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxjaXJjbGUgZmlsbD0iI0ZGRkZGRiIgY3g9IjEwIiBjeT0iMTAiIHI9IjEwIi8+DQo8L2c+DQo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzE5NUE3RiIgZD0iTTEyLjMsNC44aC01TDUsMTVoM2wwLjctMy40aDIuMWMyLDAsMy43LTEuMiw0LjItMy40DQoJQzE1LjUsNS45LDEzLjgsNC44LDEyLjMsNC44eiBNMTIuMiw4LjNjLTAuMiwwLjgtMC45LDEuNC0xLjcsMS40SDkuMWwwLjYtMi44aDEuNEMxMS45LDYuOSwxMi40LDcuNSwxMi4yLDguM3oiLz4NCjwvc3ZnPg0K">Donate
                </button>
                <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
              </form>

              <span class="btc-donate">
                <a href="bitcoin:1Ec6onfsQmoP9kkL3zkpB6c5sA4PVcXU2i">
                  <img src="data:image/svg+xml; charset=utf-8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNS4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMjBweCIgaGVpZ2h0PSIyMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDIwIDIwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxwYXRoIGZpbGw9IiNEREI4MDIiIGQ9Ik0xMCwxOS41Yy01LjIsMC05LjUtNC4zLTkuNS05LjVTNC44LDAuNSwxMCwwLjVzOS41LDQuMyw5LjUsOS41UzE1LjIsMTkuNSwxMCwxOS41eiIvPg0KCTxwYXRoIGZpbGw9IiNGRkVEOTUiIGQ9Ik0xMCwxYzUsMCw5LDQsOSw5YzAsNS00LDktOSw5Yy01LDAtOS00LTktOUMxLDUsNSwxLDEwLDEgTTEwLDBDNC41LDAsMCw0LjUsMCwxMGMwLDUuNSw0LjUsMTAsMTAsMTANCgkJYzUuNSwwLDEwLTQuNSwxMC0xMEMyMCw0LjUsMTUuNSwwLDEwLDBMMTAsMHoiLz4NCjwvZz4NCjxwYXRoIGZpbGw9IiNGRkZGRkYiIGQ9Ik0xNSw4LjVjMC4yLTEuNC0wLjktMi4yLTIuNS0yLjdsMC41LTJsLTEuMy0wLjNsLTAuNSwxLjljLTAuMy0wLjEtMC43LTAuMi0xLTAuMmwwLjUtMS45TDkuNCwzTDguOSw1DQoJQzguNiw0LjksOC4zLDQuOCw4LjEsNC44bDAsMEw2LjMsNC40TDYsNS42YzAsMCwwLjksMC4yLDAuOSwwLjJDNy40LDYsNy41LDYuMyw3LjUsNi41TDYuOSw4LjhjMCwwLDAuMSwwLDAuMSwwYzAsMC0wLjEsMC0wLjEsMA0KCWwtMC44LDMuMUM2LDEyLDUuOSwxMi4zLDUuNSwxMi4yYzAsMC0wLjktMC4yLTAuOS0wLjJMNCwxMy4zbDEuNiwwLjRjMC4zLDAuMSwwLjYsMC4xLDAuOSwwLjJsLTAuNSwybDEuMywwLjNsMC41LTINCgljMC4zLDAuMSwwLjcsMC4yLDEsMC4ybC0wLjUsMS45bDEuMywwLjNsMC41LTJjMi4yLDAuNCwzLjgsMC4yLDQuNS0xLjZjMC42LTEuNSwwLTIuMy0xLjItMi45QzE0LjIsMTAuMSwxNC44LDkuNiwxNSw4LjVMMTUsOC41eg0KCSBNMTIuMSwxMi4zYy0wLjQsMS41LTMsMC43LTMuOSwwLjVsMC43LTIuNkM5LjcsMTAuNCwxMi41LDEwLjgsMTIuMSwxMi4zeiBNMTIuNSw4LjVDMTIuMSw5LjksOS45LDkuMiw5LjIsOWwwLjYtMi40DQoJQzEwLjUsNi44LDEyLjgsNy4xLDEyLjUsOC41eiIvPg0KPC9zdmc+DQo=">Donate BTC
                </a>
                <span class="address"><code>1Ec6onfsQmoP9kkL3zkpB6c5sA4PVcXU2i</code></span>
              </span>
            </div>
          </div>
        </div>

        <div class="app-notice">
          <span class="notice-close-button">Ã—</span>
          <p>
            Get 2048 for
            <a href="https://itunes.apple.com/us/app/2048-by-gabriele-cirulli/id868076805" target="_blank">iOS</a>
            and
            <a href="https://play.google.com/store/apps/details?id=com.gabrielecirulli.app2048" target="_blank">Android!</a>
          </p>
        </div>
      </div>
      <div class="inner">
        <div class="game-container">
          <div class="game-message">
            <p></p>
            <div class="lower">
              <a class="keep-playing-button">Keep going</a>
              <a class="retry-button">Try again</a>
              <div class="score-sharing"></div>
              <div class="mailing-list">
                <!-- MailChimp Signup Form -->
                <form action="http://gabrielecirulli.us8.list-manage.com/subscribe/post?u=991201206817cfb4e4247ed6c&amp;id=7928ea817b" method="post" name="mc-embedded-subscribe-form" class="mailing-list-form" target="_blank">
                  <strong>Get email updates from Gabriele</strong>

                  <input type="email" value="" name="EMAIL" class="mailing-list-email-field" placeholder="Your email address" spellcheck="false">

                  <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                  <div style="position: absolute; left: -9999px;">
                    <input type="text" name="b_991201206817cfb4e4247ed6c_7928ea817b" value="">
                  </div>

                  <input type="submit" value="Go" name="subscribe" class="mailing-list-subscribe-button">
                </form>
              </div>
            </div>
          </div>

          <div class="grid-container">
            <div class="grid-row">
              <div class="grid-cell"></div>
              <div class="grid-cell"></div>
              <div class="grid-cell"></div>
              <div class="grid-cell"></div>
            </div>
            <div class="grid-row">
              <div class="grid-cell"></div>
              <div class="grid-cell"></div>
              <div class="grid-cell"></div>
              <div class="grid-cell"></div>
            </div>
            <div class="grid-row">
              <div class="grid-cell"></div>
              <div class="grid-cell"></div>
              <div class="grid-cell"></div>
              <div class="grid-cell"></div>
            </div>
            <div class="grid-row">
              <div class="grid-cell"></div>
              <div class="grid-cell"></div>
              <div class="grid-cell"></div>
              <div class="grid-cell"></div>
            </div>
          </div>

          <div class="tile-container"></div>
        </div>
      </div>

      <div class="extras below-game">
        <p class="game-explanation">
          <strong class="important">How to play:</strong> Use your
          <strong>arrow keys</strong> to move the tiles. When two tiles with the
          same number touch, they
          <strong>merge into one!</strong>
        </p>

        <div class="footer">
          <p class="attribution">
            <span>Created</span> by
            <a href="https://gabrielecirulli.com" target="_blank">Gabriele Cirulli.</a>
          </p>

          <a a="" href="https://play2048.co/privacy.html" target="_blank" rel="noopener noreferrer">Privacy Policy</a>
        </div>
      </div>
    </div>

    <script src="//game-cdn.poki.com/scripts/v2/poki-sdk.js"></script>
    <script>Function.prototype.bind = Function.prototype.bind || function (target) {
  var self = this;
  return function (args) {
    if (!(args instanceof Array)) {
      args = [args];
    }
    self.apply(target, args);
  };
};
</script>
    <script>(function () {
  if (typeof window.Element === "undefined" ||
      "classList" in document.documentElement) {
    return;
  }

  var prototype = Array.prototype,
      push = prototype.push,
      splice = prototype.splice,
      join = prototype.join;

  function DOMTokenList(el) {
    this.el = el;
    // The className needs to be trimmed and split on whitespace
    // to retrieve a list of classes.
    var classes = el.className.replace(/^\s+|\s+$/g, '').split(/\s+/);
    for (var i = 0; i < classes.length; i++) {
      push.call(this, classes[i]);
    }
  }

  DOMTokenList.prototype = {
    add: function (token) {
      if (this.contains(token)) return;
      push.call(this, token);
      this.el.className = this.toString();
    },
    contains: function (token) {
      return this.el.className.indexOf(token) != -1;
    },
    item: function (index) {
      return this[index] || null;
    },
    remove: function (token) {
      if (!this.contains(token)) return;
      for (var i = 0; i < this.length; i++) {
        if (this[i] == token) break;
      }
      splice.call(this, i, 1);
      this.el.className = this.toString();
    },
    toString: function () {
      return join.call(this, ' ');
    },
    toggle: function (token) {
      if (!this.contains(token)) {
        this.add(token);
      } else {
        this.remove(token);
      }

      return this.contains(token);
    }
  };

  window.DOMTokenList = DOMTokenList;

  function defineElementGetter(obj, prop, getter) {
    if (Object.defineProperty) {
      Object.defineProperty(obj, prop, {
        get: getter
      });
    } else {
      obj.__defineGetter__(prop, getter);
    }
  }

  defineElementGetter(HTMLElement.prototype, 'classList', function () {
    return new DOMTokenList(this);
  });
})();
</script>
    <script>(function () {
  var lastTime = 0;
  var vendors = ['webkit', 'moz'];
  for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
    window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];
    window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||
      window[vendors[x] + 'CancelRequestAnimationFrame'];
  }

  if (!window.requestAnimationFrame) {
    window.requestAnimationFrame = function (callback) {
      var currTime = new Date().getTime();
      var timeToCall = Math.max(0, 16 - (currTime - lastTime));
      var id = window.setTimeout(function () {
        callback(currTime + timeToCall);
      },
      timeToCall);
      lastTime = currTime + timeToCall;
      return id;
    };
  }

  if (!window.cancelAnimationFrame) {
    window.cancelAnimationFrame = function (id) {
      clearTimeout(id);
    };
  }
}());
</script>
    <script>function KeyboardInputManager() {
  this.events = {};

  this.hasReceivedFirstInput = false;

  if (window.navigator.msPointerEnabled) {
    //Internet Explorer 10 style
    this.eventTouchstart = "MSPointerDown";
    this.eventTouchmove = "MSPointerMove";
    this.eventTouchend = "MSPointerUp";
  } else {
    this.eventTouchstart = "touchstart";
    this.eventTouchmove = "touchmove";
    this.eventTouchend = "touchend";
  }

  this.listen();
}

KeyboardInputManager.prototype.on = function(event, callback) {
  if (!this.events[event]) {
    this.events[event] = [];
  }
  this.events[event].push(callback);
};

KeyboardInputManager.prototype.emit = function(event, data) {
  if (
    typeof window.PokiSDK !== "undefined" &&
    PokiSDK.__2048TriggeredCommercialBreakRunning === true
  ) {
    return;
  }

  var callbacks = this.events[event];
  if (callbacks) {
    callbacks.forEach(function(callback) {
      callback(data);
    });
  }
};

KeyboardInputManager.prototype.listen = function() {
  var self = this;

  var map = {
    38: 0, // Up
    39: 1, // Right
    40: 2, // Down
    37: 3, // Left
    75: 0, // Vim up
    76: 1, // Vim right
    74: 2, // Vim down
    72: 3, // Vim left
    87: 0, // W
    68: 1, // D
    83: 2, // S
    65: 3, // A
  };

  // Respond to direction keys
  document.addEventListener("keydown", function(event) {
    var modifiers =
      event.altKey || event.ctrlKey || event.metaKey || event.shiftKey;
    var mapped = map[event.which];

    // Ignore the event if it's happening in a text field
    if (self.targetIsInput(event)) return;

    if (!modifiers) {
      if (mapped !== undefined) {
        event.preventDefault();

        self.triggerCommercialBreakOnFirstInput(function() {
          self.emit("move", mapped);
        });
      }
    }

    // R key restarts the game
    if (!modifiers && event.which === 82) {
      self.restart.call(self, event);
    }
  });

  // Respond to button presses
  this.bindButtonPress(".retry-button", this.restart);
  this.bindButtonPress(".restart-button", this.restart);
  this.bindButtonPress(".keep-playing-button", this.keepPlaying);

  // Respond to swipe events
  var touchStartClientX, touchStartClientY;
  var body = document.querySelector("body");

  body.addEventListener(this.eventTouchstart, function(event) {
    if (
      (!window.navigator.msPointerEnabled && event.touches.length > 1) ||
      event.targetTouches.length > 1 ||
      self.targetIsInput(event)
    ) {
      return; // Ignore if touching with more than 1 finger or touching input
    }

    if (window.navigator.msPointerEnabled) {
      touchStartClientX = event.pageX;
      touchStartClientY = event.pageY;
    } else {
      touchStartClientX = event.touches[0].clientX;
      touchStartClientY = event.touches[0].clientY;
    }

    event.preventDefault();
  });

  body.addEventListener(this.eventTouchmove, function(event) {
    event.preventDefault();
  });

  body.addEventListener(this.eventTouchend, function(event) {
    if (
      (!window.navigator.msPointerEnabled && event.touches.length > 0) ||
      event.targetTouches.length > 0 ||
      self.targetIsInput(event)
    ) {
      return; // Ignore if still touching with one or more fingers or input
    }

    var touchEndClientX, touchEndClientY;

    if (window.navigator.msPointerEnabled) {
      touchEndClientX = event.pageX;
      touchEndClientY = event.pageY;
    } else {
      touchEndClientX = event.changedTouches[0].clientX;
      touchEndClientY = event.changedTouches[0].clientY;
    }

    var dx = touchEndClientX - touchStartClientX;
    var absDx = Math.abs(dx);

    var dy = touchEndClientY - touchStartClientY;
    var absDy = Math.abs(dy);

    if (Math.max(absDx, absDy) > 10) {
      self.triggerCommercialBreakOnFirstInput(function() {
        // (right : left) : (down : up)
        self.emit("move", absDx > absDy ? (dx > 0 ? 1 : 3) : dy > 0 ? 2 : 0);
      });
    }
  });
};

KeyboardInputManager.prototype.triggerCommercialBreakOnFirstInput = function(
  callback
) {
  if (!this.hasReceivedFirstInput) {
    this.hasReceivedFirstInput = true;

    if (typeof window.PokiSDK !== "undefined") {
      PokiSDK.__2048TriggeredCommercialBreakRunning = true;
      PokiSDK.commercialBreak().then(function() {
        PokiSDK.gameplayStart();

        setTimeout(function() {
          PokiSDK.__2048TriggeredCommercialBreakRunning = false;
          callback();
        }, 200);
      });
    }
  } else {
    callback();
  }
};

KeyboardInputManager.prototype.restart = function(event) {
  event.preventDefault();
  this.emit("restart");
};

KeyboardInputManager.prototype.keepPlaying = function(event) {
  event.preventDefault();
  this.emit("keepPlaying");
};

KeyboardInputManager.prototype.bindButtonPress = function(selector, fn) {
  var button = document.querySelector(selector);
  button.addEventListener("click", fn.bind(this));
  button.addEventListener(this.eventTouchend, fn.bind(this));
};

KeyboardInputManager.prototype.targetIsInput = function(event) {
  return event.target.tagName.toLowerCase() === "input";
};
</script>
    <script>function HTMLActuator() {
  this.tileContainer = document.querySelector(".tile-container");
  this.scoreContainer = document.querySelector(".score-container");
  this.bestContainer = document.querySelector(".best-container");
  this.messageContainer = document.querySelector(".game-message");
  this.sharingContainer = document.querySelector(".score-sharing");

  this.score = 0;

  this.pokiGameplayStopped = false;
}

HTMLActuator.prototype.actuate = function(grid, metadata) {
  var self = this;

  window.requestAnimationFrame(function() {
    self.clearContainer(self.tileContainer);

    grid.cells.forEach(function(column) {
      column.forEach(function(cell) {
        if (cell) {
          self.addTile(cell);
        }
      });
    });

    self.updateScore(metadata.score);
    self.updateBestScore(metadata.bestScore);

    if (metadata.terminated) {
      if (typeof window.PokiSDK !== "undefined") {
        PokiSDK.gameplayStop();
        self.pokiGameplayStopped = true;
      }

      if (metadata.over) {
        self.message(false); // You lose
      } else if (metadata.won) {
        PokiSDK.happyTime(1);
        self.message(true); // You win!
      }
    }
  });
};

// Continues the game (both restart and keep playing)
HTMLActuator.prototype.continueGame = function() {
  var self = this;

  if (typeof window.PokiSDK !== "undefined") {
    if (!self.pokiGameplayStopped) {
      PokiSDK.gameplayStop();
      self.pokiGameplayStopped = true;
    }

    PokiSDK.__2048TriggeredCommercialBreakRunning = true;
    PokiSDK.commercialBreak().then(function() {
      PokiSDK.__2048TriggeredCommercialBreakRunning = false;
      self.pokiGameplayStopped = false;
      PokiSDK.gameplayStart();
    });
  }

  if (typeof gtag !== "undefined") {
    gtag("event", "restart", {
      event_category: "game",
    });
  }

  this.clearMessage();
};

HTMLActuator.prototype.clearContainer = function(container) {
  while (container.firstChild) {
    container.removeChild(container.firstChild);
  }
};

HTMLActuator.prototype.addTile = function(tile) {
  var self = this;

  var wrapper = document.createElement("div");
  var inner = document.createElement("div");
  var position = tile.previousPosition || { x: tile.x, y: tile.y };
  var positionClass = this.positionClass(position);

  // We can't use classlist because it somehow glitches when replacing classes
  var classes = ["tile", "tile-" + tile.value, positionClass];

  if (tile.value > 2048) classes.push("tile-super");

  this.applyClasses(wrapper, classes);

  inner.classList.add("tile-inner");
  inner.textContent = tile.value;

  if (tile.previousPosition) {
    // Make sure that the tile gets rendered in the previous position first
    window.requestAnimationFrame(function() {
      classes[2] = self.positionClass({ x: tile.x, y: tile.y });
      self.applyClasses(wrapper, classes); // Update the position
    });
  } else if (tile.mergedFrom) {
    classes.push("tile-merged");
    this.applyClasses(wrapper, classes);

    // Render the tiles that merged
    tile.mergedFrom.forEach(function(merged) {
      self.addTile(merged);
    });
  } else {
    classes.push("tile-new");
    this.applyClasses(wrapper, classes);
  }

  // Add the inner part of the tile to the wrapper
  wrapper.appendChild(inner);

  // Put the tile on the board
  this.tileContainer.appendChild(wrapper);
};

HTMLActuator.prototype.applyClasses = function(element, classes) {
  element.setAttribute("class", classes.join(" "));
};

HTMLActuator.prototype.normalizePosition = function(position) {
  return { x: position.x + 1, y: position.y + 1 };
};

HTMLActuator.prototype.positionClass = function(position) {
  position = this.normalizePosition(position);
  return "tile-position-" + position.x + "-" + position.y;
};

HTMLActuator.prototype.updateScore = function(score) {
  this.clearContainer(this.scoreContainer);

  var difference = score - this.score;
  this.score = score;

  this.scoreContainer.textContent = this.score;

  if (difference > 0) {
    var addition = document.createElement("div");
    addition.classList.add("score-addition");
    addition.textContent = "+" + difference;

    this.scoreContainer.appendChild(addition);
  }
};

HTMLActuator.prototype.updateBestScore = function(bestScore) {
  this.bestContainer.textContent = bestScore;
};

HTMLActuator.prototype.message = function(won) {
  var type = won ? "game-won" : "game-over";
  var message = won ? "You win!" : "Game over!";

  if (typeof gtag !== "undefined") {
    gtag("event", "end", {
      event_category: "game",
      event_label: type,
      value: this.score,
    });
  }

  this.messageContainer.classList.add(type);
  this.messageContainer.getElementsByTagName("p")[0].textContent = message;

  this.clearContainer(this.sharingContainer);
  this.sharingContainer.appendChild(this.scoreTweetButton());
  twttr.widgets.load();
};

HTMLActuator.prototype.clearMessage = function() {
  // IE only takes one value to remove at a time.
  this.messageContainer.classList.remove("game-won");
  this.messageContainer.classList.remove("game-over");
};

HTMLActuator.prototype.scoreTweetButton = function() {
  var tweet = document.createElement("a");
  tweet.classList.add("twitter-share-button");
  tweet.setAttribute("href", "https://twitter.com/share");
  tweet.setAttribute("data-via", "gabrielecirulli");
  tweet.setAttribute("data-url", "http://git.io/2048");
  tweet.setAttribute("data-counturl", "http://gabrielecirulli.github.io/2048/");
  tweet.textContent = "Tweet";

  var text =
    "I scored " +
    this.score +
    " points at 2048, a game where you " +
    "join numbers to score high! #2048game";
  tweet.setAttribute("data-text", text);

  return tweet;
};
</script>
    <script>function Grid(size, previousState) {
  this.size = size;
  this.cells = previousState ? this.fromState(previousState) : this.empty();
}

// Build a grid of the specified size
Grid.prototype.empty = function () {
  var cells = [];

  for (var x = 0; x < this.size; x++) {
    var row = cells[x] = [];

    for (var y = 0; y < this.size; y++) {
      row.push(null);
    }
  }

  return cells;
};

Grid.prototype.fromState = function (state) {
  var cells = [];

  for (var x = 0; x < this.size; x++) {
    var row = cells[x] = [];

    for (var y = 0; y < this.size; y++) {
      var tile = state[x][y];
      row.push(tile ? new Tile(tile.position, tile.value) : null);
    }
  }

  return cells;
};

// Find the first available random position
Grid.prototype.randomAvailableCell = function () {
  var cells = this.availableCells();

  if (cells.length) {
    return cells[Math.floor(Math.random() * cells.length)];
  }
};

Grid.prototype.availableCells = function () {
  var cells = [];

  this.eachCell(function (x, y, tile) {
    if (!tile) {
      cells.push({ x: x, y: y });
    }
  });

  return cells;
};

// Call callback for every cell
Grid.prototype.eachCell = function (callback) {
  for (var x = 0; x < this.size; x++) {
    for (var y = 0; y < this.size; y++) {
      callback(x, y, this.cells[x][y]);
    }
  }
};

// Check if there are any cells available
Grid.prototype.cellsAvailable = function () {
  return !!this.availableCells().length;
};

// Check if the specified cell is taken
Grid.prototype.cellAvailable = function (cell) {
  return !this.cellOccupied(cell);
};

Grid.prototype.cellOccupied = function (cell) {
  return !!this.cellContent(cell);
};

Grid.prototype.cellContent = function (cell) {
  if (this.withinBounds(cell)) {
    return this.cells[cell.x][cell.y];
  } else {
    return null;
  }
};

// Inserts a tile at its position
Grid.prototype.insertTile = function (tile) {
  this.cells[tile.x][tile.y] = tile;
};

Grid.prototype.removeTile = function (tile) {
  this.cells[tile.x][tile.y] = null;
};

Grid.prototype.withinBounds = function (position) {
  return position.x >= 0 && position.x < this.size &&
         position.y >= 0 && position.y < this.size;
};

Grid.prototype.serialize = function () {
  var cellState = [];

  for (var x = 0; x < this.size; x++) {
    var row = cellState[x] = [];

    for (var y = 0; y < this.size; y++) {
      row.push(this.cells[x][y] ? this.cells[x][y].serialize() : null);
    }
  }

  return {
    size: this.size,
    cells: cellState
  };
};
</script>
    <script>function Tile(position, value) {
  this.x                = position.x;
  this.y                = position.y;
  this.value            = value || 2;

  this.previousPosition = null;
  this.mergedFrom       = null; // Tracks tiles that merged together
}

Tile.prototype.savePosition = function () {
  this.previousPosition = { x: this.x, y: this.y };
};

Tile.prototype.updatePosition = function (position) {
  this.x = position.x;
  this.y = position.y;
};

Tile.prototype.serialize = function () {
  return {
    position: {
      x: this.x,
      y: this.y
    },
    value: this.value
  };
};
</script>
    <script>window.fakeStorage = {
  _data: {},

  setItem: function (id, val) {
    return this._data[id] = String(val);
  },

  getItem: function (id) {
    return this._data.hasOwnProperty(id) ? this._data[id] : undefined;
  },

  removeItem: function (id) {
    return delete this._data[id];
  },

  clear: function () {
    return this._data = {};
  }
};

function LocalStorageManager() {
  this.bestScoreKey          = "bestScore";
  this.gameStateKey          = "gameState";
  this.noticeClosedKey       = "noticeClosed";
  this.cookieNoticeClosedKey = "cookieNoticeClosed";

  var supported = this.localStorageSupported();
  this.storage = supported ? window.localStorage : window.fakeStorage;
}

LocalStorageManager.prototype.localStorageSupported = function () {
  var testKey = "test";
  

  try {
    var storage = window.localStorage;
    storage.setItem(testKey, "1");
    storage.removeItem(testKey);
    return true;
  } catch (error) {
    return false;
  }
};

// Best score getters/setters
LocalStorageManager.prototype.getBestScore = function () {
  return this.storage.getItem(this.bestScoreKey) || 0;
};

LocalStorageManager.prototype.setBestScore = function (score) {
  this.storage.setItem(this.bestScoreKey, score);
};

// Game state getters/setters and clearing
LocalStorageManager.prototype.getGameState = function () {
  var stateJSON = this.storage.getItem(this.gameStateKey);
  return stateJSON ? JSON.parse(stateJSON) : null;
};

LocalStorageManager.prototype.setGameState = function (gameState) {
  this.storage.setItem(this.gameStateKey, JSON.stringify(gameState));
};

LocalStorageManager.prototype.clearGameState = function () {
  this.storage.removeItem(this.gameStateKey);
};

LocalStorageManager.prototype.setNoticeClosed = function (noticeClosed) {
  this.storage.setItem(this.noticeClosedKey, JSON.stringify(noticeClosed));
};

LocalStorageManager.prototype.getNoticeClosed = function () {
  return JSON.parse(this.storage.getItem(this.noticeClosedKey) || "false");
};

LocalStorageManager.prototype.setCookieNoticeClosed = function (cookieNoticeClosed) {
  this.storage.setItem(this.cookieNoticeClosedKey, JSON.stringify(cookieNoticeClosed));
};

LocalStorageManager.prototype.getCookieNoticeClosed = function () {
  return JSON.parse(this.storage.getItem(this.cookieNoticeClosedKey) || "false");
};
</script>
    <script>function GameManager(size, InputManager, Actuator, StorageManager) {
  this.size           = size; // Size of the grid
  this.inputManager   = new InputManager;
  this.storageManager = new StorageManager;
  this.actuator       = new Actuator;

  this.startTiles     = 2;

  this.inputManager.on("move", this.move.bind(this));
  this.inputManager.on("restart", this.restart.bind(this));
  this.inputManager.on("keepPlaying", this.keepPlaying.bind(this));

  this.setup();
}

// Restart the game
GameManager.prototype.restart = function () {
  this.storageManager.clearGameState();
  this.actuator.continueGame(); // Clear the game won/lost message
  this.setup();
};

// Keep playing after winning (allows going over 2048)
GameManager.prototype.keepPlaying = function () {
  this.keepPlaying = true;
  this.actuator.continueGame(); // Clear the game won/lost message
};

// Return true if the game is lost, or has won and the user hasn't kept playing
GameManager.prototype.isGameTerminated = function () {
  return this.over || (this.won && !this.keepPlaying);
};

// Set up the game
GameManager.prototype.setup = function () {
  var previousState = this.storageManager.getGameState();

  // Reload the game from a previous game if present
  if (previousState) {
    this.grid        = new Grid(previousState.grid.size,
                                previousState.grid.cells); // Reload grid
    this.score       = previousState.score;
    this.over        = previousState.over;
    this.won         = previousState.won;
    this.keepPlaying = previousState.keepPlaying;
  } else {
    this.grid        = new Grid(this.size);
    this.score       = 0;
    this.over        = false;
    this.won         = false;
    this.keepPlaying = false;

    // Add the initial tiles
    this.addStartTiles();
  }

  // Update the actuator
  this.actuate();
};

// Set up the initial tiles to start the game with
GameManager.prototype.addStartTiles = function () {
  for (var i = 0; i < this.startTiles; i++) {
    this.addRandomTile();
  }
};

// Adds a tile in a random position
GameManager.prototype.addRandomTile = function () {
  if (this.grid.cellsAvailable()) {
    var value = Math.random() < 0.9 ? 2 : 4;
    var tile = new Tile(this.grid.randomAvailableCell(), value);

    this.grid.insertTile(tile);
  }
};

// Sends the updated grid to the actuator
GameManager.prototype.actuate = function () {
  if (this.storageManager.getBestScore() < this.score) {
    this.storageManager.setBestScore(this.score);
  }

  // Clear the state when the game is over (game over only, not win)
  if (this.over) {
    this.storageManager.clearGameState();
  } else {
    this.storageManager.setGameState(this.serialize());
  }

  this.actuator.actuate(this.grid, {
    score:      this.score,
    over:       this.over,
    won:        this.won,
    bestScore:  this.storageManager.getBestScore(),
    terminated: this.isGameTerminated()
  });

};

// Represent the current game as an object
GameManager.prototype.serialize = function () {
  return {
    grid:        this.grid.serialize(),
    score:       this.score,
    over:        this.over,
    won:         this.won,
    keepPlaying: this.keepPlaying
  };
};

// Save all tile positions and remove merger info
GameManager.prototype.prepareTiles = function () {
  this.grid.eachCell(function (x, y, tile) {
    if (tile) {
      tile.mergedFrom = null;
      tile.savePosition();
    }
  });
};

// Move a tile and its representation
GameManager.prototype.moveTile = function (tile, cell) {
  this.grid.cells[tile.x][tile.y] = null;
  this.grid.cells[cell.x][cell.y] = tile;
  tile.updatePosition(cell);
};

// Move tiles on the grid in the specified direction
GameManager.prototype.move = function (direction) {
  // 0: up, 1: right, 2: down, 3: left
  var self = this;

  if (this.isGameTerminated()) return; // Don't do anything if the game's over

  var cell, tile;

  var vector     = this.getVector(direction);
  var traversals = this.buildTraversals(vector);
  var moved      = false;

  // Save the current tile positions and remove merger information
  this.prepareTiles();

  // Traverse the grid in the right direction and move tiles
  traversals.x.forEach(function (x) {
    traversals.y.forEach(function (y) {
      cell = { x: x, y: y };
      tile = self.grid.cellContent(cell);

      if (tile) {
        var positions = self.findFarthestPosition(cell, vector);
        var next      = self.grid.cellContent(positions.next);

        // Only one merger per row traversal?
        if (next && next.value === tile.value && !next.mergedFrom) {
          var merged = new Tile(positions.next, tile.value * 2);
          merged.mergedFrom = [tile, next];

          self.grid.insertTile(merged);
          self.grid.removeTile(tile);

          // Converge the two tiles' positions
          tile.updatePosition(positions.next);

          // Update the score
          self.score += merged.value;

          // The mighty 2048 tile
          if (merged.value === 2048) self.won = true;
        } else {
          self.moveTile(tile, positions.farthest);
        }

        if (!self.positionsEqual(cell, tile)) {
          moved = true; // The tile moved from its original cell!
        }
      }
    });
  });

  if (moved) {
    this.addRandomTile();

    if (!this.movesAvailable()) {
      this.over = true; // Game over!
    }

    this.actuate();
  }
};

// Get the vector representing the chosen direction
GameManager.prototype.getVector = function (direction) {
  // Vectors representing tile movement
  var map = {
    0: { x: 0,  y: -1 }, // Up
    1: { x: 1,  y: 0 },  // Right
    2: { x: 0,  y: 1 },  // Down
    3: { x: -1, y: 0 }   // Left
  };

  return map[direction];
};

// Build a list of positions to traverse in the right order
GameManager.prototype.buildTraversals = function (vector) {
  var traversals = { x: [], y: [] };

  for (var pos = 0; pos < this.size; pos++) {
    traversals.x.push(pos);
    traversals.y.push(pos);
  }

  // Always traverse from the farthest cell in the chosen direction
  if (vector.x === 1) traversals.x = traversals.x.reverse();
  if (vector.y === 1) traversals.y = traversals.y.reverse();

  return traversals;
};

GameManager.prototype.findFarthestPosition = function (cell, vector) {
  var previous;

  // Progress towards the vector direction until an obstacle is found
  do {
    previous = cell;
    cell     = { x: previous.x + vector.x, y: previous.y + vector.y };
  } while (this.grid.withinBounds(cell) &&
           this.grid.cellAvailable(cell));

  return {
    farthest: previous,
    next: cell // Used to check if a merge is required
  };
};

GameManager.prototype.movesAvailable = function () {
  return this.grid.cellsAvailable() || this.tileMatchesAvailable();
};

// Check for available matches between tiles (more expensive check)
GameManager.prototype.tileMatchesAvailable = function () {
  var self = this;

  var tile;

  for (var x = 0; x < this.size; x++) {
    for (var y = 0; y < this.size; y++) {
      tile = this.grid.cellContent({ x: x, y: y });

      if (tile) {
        for (var direction = 0; direction < 4; direction++) {
          var vector = self.getVector(direction);
          var cell   = { x: x + vector.x, y: y + vector.y };

          var other  = self.grid.cellContent(cell);

          if (other && other.value === tile.value) {
            return true; // These two tiles can be merged
          }
        }
      }
    }
  }

  return false;
};

GameManager.prototype.positionsEqual = function (first, second) {
  return first.x === second.x && first.y === second.y;
};
</script>
    <script>// Wait till the browser is ready to render the game (avoids glitches)
window.requestAnimationFrame(function() {
  if (typeof window.PokiSDK !== "undefined") {
    PokiSDK.init()
      .then(function() {
        PokiSDK.gameLoadingStart();
        PokiSDK.gameLoadingProgress({ percentageDone: 1 });
        PokiSDK.gameLoadingFinished();

        runApplication();
      })
      .catch(() => {
        runApplication();
      });
  } else {
    runApplication();
  }
});

function runApplication() {
  new GameManager(4, KeyboardInputManager, HTMLActuator, LocalStorageManager);

  // TODO: This code is in need of a refactor (along with the rest)
  var storage = new LocalStorageManager();
  var noticeClose = document.querySelector(".notice-close-button");
  var notice = document.querySelector(".app-notice");
  var cookieNotice = document.querySelector(".cookie-notice");
  var cookieNoticeClose = document.querySelector(
    ".cookie-notice-dismiss-button"
  );

  if (storage.getNoticeClosed()) {
    notice.parentNode.removeChild(notice);
  } else {
    noticeClose.addEventListener("click", function() {
      notice.parentNode.removeChild(notice);
      storage.setNoticeClosed(true);
      if (typeof gtag !== undefined) {
        gtag("event", "closed", {
          event_category: "notice",
        });
      }
    });
  }

  if (storage.getCookieNoticeClosed()) {
    cookieNotice.parentNode.removeChild(cookieNotice);
  } else {
    cookieNoticeClose.addEventListener("click", function() {
      cookieNotice.parentNode.removeChild(cookieNotice);
      storage.setCookieNoticeClosed(true);
      if (typeof gtag !== undefined) {
        gtag("event", "closed", {
          event_category: "cookie-notice",
        });
      }
    });
  }
}
</script>
  

</body>
