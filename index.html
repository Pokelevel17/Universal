<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unblocked Games</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <div class="container">
    <h1>Unblocked Games</h1>
    <div class="controls">
      <input type="text" id="search" placeholder="Search games...">
      <select id="category">
        <option value="All">All Categories</option>
      </select>
    </div>
  </div>
</header>

<main>
  <div class="container">
    <div id="games-grid"></div>
  </div>
</main>

<footer>
  <div class="container">
    <p>© 2025 Unblocked Games</p>
  </div>
</footer>

<script>
const GAMES_URL = 'games.json'; // Your JSON file with all games

async function loadGames() {
  const res = await fetch(GAMES_URL);
  const games = await res.json();
  const grid = document.getElementById('games-grid');
  const search = document.getElementById('search');
  const categorySelect = document.getElementById('category');

  // Populate categories dynamically
  const categories = ['All', ...new Set(games.map(g => g.category))];
  categories.forEach(cat => {
    const option = document.createElement('option');
    option.value = cat;
    option.textContent = cat;
    categorySelect.appendChild(option);
  });

  // Render game cards
  function render(list) {
    grid.innerHTML = '';
    list.forEach(game => {
      const card = document.createElement('div');
      card.className = 'game-card';
      card.innerHTML = `
        <div class="thumb-container">
          <img src="${game.thumbnail}" alt="${game.name}">
        </div>
        <h2>${game.name}</h2>
        <span class="category">${game.category}</span>
        <div class="card-actions">
          <button class="fullscreen-btn" data-url="${game.url}">Play Fullscreen</button>
        </div>`;
      grid.appendChild(card);
    });

    // Fullscreen functionality for all buttons
    const buttons = document.querySelectorAll('.fullscreen-btn');
    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        const url = btn.dataset.url;
        
        // Create overlay
        const overlay = document.createElement('div');
        overlay.id = 'game-overlay';
        overlay.style.position = 'fixed';
        overlay.style.top = '0';
        overlay.style.left = '0';
        overlay.style.width = '100vw';
        overlay.style.height = '100vh';
        overlay.style.background = '#121212';
        overlay.style.zIndex = '9999';
        overlay.style.display = 'flex';
        overlay.style.flexDirection = 'column';
        overlay.style.alignItems = 'center';
        overlay.style.justifyContent = 'center';

        // Back button
        const backBtn = document.createElement('button');
        backBtn.textContent = '⬅ Back';
        backBtn.style.position = 'absolute';
        backBtn.style.top = '10px';
        backBtn.style.left = '10px';
        backBtn.style.padding = '8px 15px';
        backBtn.style.border = 'none';
        backBtn.style.borderRadius = '6px';
        backBtn.style.background = '#0078d7';
        backBtn.style.color = '#fff';
        backBtn.style.cursor = 'pointer';
        backBtn.addEventListener('click', () => {
          document.body.removeChild(overlay);
          if (document.fullscreenElement) document.exitFullscreen();
        });

        // Game iframe
        const iframe = document.createElement('iframe');
        iframe.src = url;
        iframe.style.width = '100%';
        iframe.style.height = '100%';
        iframe.style.border = 'none';

        overlay.appendChild(backBtn);
        overlay.appendChild(iframe);
        document.body.appendChild(overlay);

        // Request fullscreen
        if (overlay.requestFullscreen) {
          overlay.requestFullscreen();
        } else if (overlay.webkitRequestFullscreen) {
          overlay.webkitRequestFullscreen();
        } else if (overlay.msRequestFullscreen) {
          overlay.msRequestFullscreen();
        }
      });
    });
  }

  function filterGames() {
    const searchTerm = search.value.toLowerCase();
    const selectedCategory = categorySelect.value;
    const filtered = games.filter(g =>
      g.name.toLowerCase().includes(searchTerm) &&
      (selectedCategory === 'All' || g.category === selectedCategory)
    );
    render(filtered);
  }

  search.addEventListener('input', filterGames);
  categorySelect.addEventListener('change', filterGames);

  render(games);
}

loadGames();
</script>

</body>
</html>
